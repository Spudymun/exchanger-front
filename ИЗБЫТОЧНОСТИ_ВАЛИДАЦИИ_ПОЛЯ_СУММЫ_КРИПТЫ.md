# üö® –ê–ù–ê–õ–ò–ó –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ï–ô –í–ê–õ–ò–î–ê–¶–ò–ò –ü–û–õ–Ø –°–£–ú–ú–´ –ö–†–ò–ü–¢–´

## üìä –û–ë–ó–û–† –ü–†–û–ë–õ–ï–ú–´

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 29 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°—Ç–∞—Ç—É—Å:** –°–†–ï–î–ù–ï-–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ò –£–°–¢–†–ê–ù–Ø–Æ–¢–°–Ø  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏:** 3 –≥—Ä—É–ø–ø—ã  
**–£—Å—Ç—Ä–∞–Ω–µ–Ω–æ:** ‚úÖ 4 –∏–∑ 6 —Å—Ä–µ–¥–Ω–µ-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–µ–π

---

## üîç –ù–ê–ô–î–ï–ù–ù–´–ï –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ò

### **1. –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –õ–û–ì–ò–ö–ò –í–ê–õ–ò–î–ê–¶–ò–ò –ú–ï–ñ–î–£ –°–•–ï–ú–ê–ú–ò**

#### –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –ø–∞—Ä–∞:

- **`cryptoAmountStringSchema`** (schemas-crypto.ts) - –ü–û–õ–ù–ê–Ø –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **`validateExchangeAmountFormat()`** (security-enhanced-exchange-schemas.ts) - –£–†–ï–ó–ê–ù–ù–ê–Ø –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

| –ü—Ä–æ–≤–µ—Ä–∫–∞              | `cryptoAmountStringSchema`    | `validateExchangeAmountFormat()` |
| --------------------- | ----------------------------- | -------------------------------- |
| ‚úÖ XSS –∑–∞—â–∏—Ç–∞         | `containsPotentialXSS(val)`   | `containsPotentialXSS(val)`      |
| ‚úÖ Allow empty string | `if (val === '') return true` | `if (val === '') return true`    |
| ‚úÖ Numeric validation | `Number.isNaN(num)`           | `Number.isNaN(num)`              |
| ‚úÖ Decimal places     | `val.split('.')` ‚â§ 2          | `val.split('.')` ‚â§ 2             |
| ‚úÖ Decimal precision  | –î–æ 8 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏       | ‚ùå **–ù–ï–¢**                       |
| ‚úÖ Positive check     | `Number(val) > 0`             | ‚ùå **–ù–ï–¢**                       |

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

- **`cryptoAmountStringSchema`:** useExchangeStoreWithTranslations.ts (3 –º–µ—Å—Ç–∞)
- **`validateExchangeAmountFormat()`:** 2 —Å—Ö–µ–º—ã exchange —Ñ–æ—Ä–º

---

### **2. –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ü–û–î–•–û–î–û–í –ö –í–ê–õ–ò–î–ê–¶–ò–ò –°–£–ú–ú–´**

#### String –ø–æ–¥—Ö–æ–¥—ã:

```typescript
// –ü–æ–¥—Ö–æ–¥ 1: –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–æ–∫–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
export const cryptoAmountStringSchema = z
  .string()
  .refine(val => !containsPotentialXSS(val), 'INVALID_CHARACTERS_DETECTED')
  .refine(/* full validation logic */);

// –ü–æ–¥—Ö–æ–¥ 2: –£—Ä–µ–∑–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
function validateExchangeAmountFormat(val: string): boolean {
  if (containsPotentialXSS(val)) return false;
  // simplified validation logic
}
```

#### Number –ø–æ–¥—Ö–æ–¥—ã:

```typescript
// –ü–æ–¥—Ö–æ–¥ 3: Number –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è calculate
export const securityEnhancedCalculateAmountSchema = z.object({
  amount: z.number().positive(),
});

// –ü–æ–¥—Ö–æ–¥ 4: Number –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è create order
export const securityEnhancedCreateExchangeOrderSchema = z.object({
  cryptoAmount: z
    .number()
    .positive('AMOUNT_POSITIVE_REQUIRED')
    .min(VALIDATION_LIMITS.MIN_ORDER_AMOUNT, 'AMOUNT_MIN_REQUIRED')
    .max(VALIDATION_LIMITS.MAX_ORDER_AMOUNT, 'AMOUNT_MAX_EXCEEDED')
    .finite('AMOUNT_MUST_BE_FINITE'),
});
```

---

### **3. LEGACY POSITIVE –í–ê–õ–ò–î–ê–¶–ò–Ø (–ù–ï –ê–ö–¢–ò–í–ù–ê –í UI)**

#### ‚ö†Ô∏è –í–ê–ñ–ù–û: –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ù–ï–í–û–ó–ú–û–ñ–ù–û –í–í–ï–°–¢–ò –≤ UI

**–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** `useNumericInput` –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–≤–æ–¥ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —á–µ—Ä–µ–∑ `isNumericChar()` –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ —Ç–æ—á–∫—É.

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏:**

- ‚úÖ `AMOUNT_REQUIRED` - –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ
- ‚úÖ `AMOUNT_MIN_VALUE` - –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞
- ‚úÖ `AMOUNT_MAX_VALUE` - –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞
- ‚ùå **Positive –ø—Ä–æ–≤–µ—Ä–∫–∏ –ù–ï –°–†–ê–ë–ê–¢–´–í–ê–Æ–¢** - legacy –∫–æ–¥

#### Legacy positive –ø—Ä–æ–≤–µ—Ä–∫–∏ (–æ—Å—Ç–∞–ª–∏—Å—å –≤ –∫–æ–¥–µ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):

```typescript
// Legacy 1: String-based (deprecated)
.refine(val => val === '' || Number(val) > 0, { message: 'AMOUNT_POSITIVE' })

// Legacy 2: Number-based –¥–ª—è API
z.number().positive() // –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

// Legacy 3: Number-based —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
z.number().positive('AMOUNT_POSITIVE_REQUIRED') // –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
```

---

## üìã –ü–û–õ–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                                                | –¢–∏–ø      | –§–∞–π–ª                                  | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                   | –°—Ç–∞—Ç—É—Å                           |
| -------------------------------------------------------- | -------- | ------------------------------------- | ------------------------------- | -------------------------------- |
| `cryptoAmountStringSchema`                               | Schema   | schemas-crypto.ts                     | ‚ùå –£–î–ê–õ–ï–ù–ê (deprecated)         | **‚úÖ –£–°–¢–†–ê–ù–ï–ù–û**                 |
| `validateExchangeAmountFormat()`                         | Function | security-enhanced-exchange-schemas.ts | ‚úÖ 2 —Å—Ö–µ–º—ã exchange —Ñ–æ—Ä–º        | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          |
| `securityEnhancedCalculateAmountSchema`                  | Schema   | security-enhanced-utils.ts            | ‚úÖ exchange.ts tRPC router (2x) | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (number)** |
| `securityEnhancedCreateExchangeOrderSchema.cryptoAmount` | Field    | security-enhanced-exchange-schemas.ts | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è                 | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          |
| `validateAmountFormat()`                                 | Function | security-enhanced-exchange-schemas.ts | ‚úÖ validateCryptoAmountLimits() | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          |
| `validateBusinessLimits()`                               | Function | security-enhanced-exchange-schemas.ts | ‚úÖ validateCryptoAmountLimits() | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          |
| `validateCryptoAmountLimits()`                           | Function | security-enhanced-exchange-schemas.ts | ‚úÖ 3 —Å—Ö–µ–º—ã exchange —Ñ–æ—Ä–º        | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          |
| `handleAmountValidation()`                               | Function | handlers.ts                           | ‚úÖ core.ts                      | **–†–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**          |

---

## üéØ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ï–õ–ö–ò–ï –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ò

### 1. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–§–∞–π–ª**: `packages/utils/src/validation/security-enhanced-exchange-schemas.ts`

```typescript
// –§—É–Ω–∫—Ü–∏—è 1: validateAmountFormat() - –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞
function validateAmountFormat(fromAmount: string): number | null {
  if (!fromAmount || fromAmount === '' || Number.isNaN(Number(fromAmount))) {
    return null;
  }
  return Number(fromAmount);
}

// –§—É–Ω–∫—Ü–∏—è 2: validateExchangeAmountFormat() - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
function validateExchangeAmountFormat(val: string): boolean {
  if (containsPotentialXSS(val)) return false;
  if (val === '') return true;
  const num = Number(val);
  if (Number.isNaN(num)) return false;
  // Check decimal places...
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç `Number.isNaN(Number())` - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

### 2. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç–µ–π—Ç–µ

**–§–∞–π–ª—ã**: `packages/hooks/src/state/exchange-store.ts` vs –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–æ—Ä–º

```typescript
// ExchangeFormData - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–ª–µ–π
interface ExchangeFormData {
  fromAmount: number; // ‚úÖ –£–°–¢–†–ê–ù–ï–ù–û: –±—ã–≤—à–∏–π cryptoAmount ‚Üí fromAmount
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}

// ExchangeCalculation
interface ExchangeCalculation {
  fromAmount: number; // —Ç–µ–ø–µ—Ä—å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è
  toAmount: number;
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–£–°–¢–†–ê–ù–ï–ù–û** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π (commit a6d6315)

```typescript
// –í —Å—Ç–µ–π—Ç–µ
export interface ExchangeFormData {
  cryptoAmount: number; // number for calculations
}

// –í —Ñ–æ—Ä–º–∞—Ö
export interface HeroExchangeFormData {
  fromAmount: string; // string –≤ UI
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –û–¥–Ω–æ –∏ —Ç–æ –∂–µ –ø–æ–ª–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ `cryptoAmount: number` –∏ `fromAmount: string`

### 3. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–§–∞–π–ª—ã**: `packages/hooks/src/useExchangeStore.ts` + Zod —Å—Ö–µ–º—ã

```typescript
// –í useExchangeStore.ts
if (!formData.cryptoAmount || formData.cryptoAmount <= 0) {
  errors.cryptoAmount = ['Enter correct amount'];
}

// –í Zod —Å—Ö–µ–º–∞—Ö
cryptoAmount: z.number().positive('AMOUNT_POSITIVE_REQUIRED');
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –û–¥–∏–Ω–∞–∫–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö

### 4. ‚ö†Ô∏è –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ CryptoAmountInput

**–§–∞–π–ª**: `packages/ui/src/components/exchange/CryptoAmountInput.tsx`

```typescript
export function CryptoAmountInput({
  fieldName = 'fromAmount', // –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä
  // ...
}) {
  // –ù–æ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∂–µ—Å—Ç–∫–æ –∑–∞—à–∏—Ç–æ–µ –ø–æ–ª–µ:
  const { handleKeyDown } = useNumericInput(form.values.fromCurrency as string);
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞—Ä–∞–º–µ—Ç—Ä `fieldName` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –ª–æ–≥–∏–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 5. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**–§–∞–π–ª**: `packages/utils/src/validation/handlers.ts`

```typescript
// –°–ø–æ—Å–æ–± 1: –ü—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
return { message: t(VALIDATION_KEYS.AMOUNT_MIN_VALUE, { min: validationContext.params.min }) };

// –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫–∏
if (message?.startsWith('AMOUNT_MIN_VALUE:')) {
  const min = message.split(':')[1];
  return { message: t(VALIDATION_KEYS.AMOUNT_MIN_VALUE, { min }) };
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –æ—à–∏–±–æ–∫

### 6. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Ñ–æ—Ä–º

**–§–∞–π–ª—ã**: `apps/web/src/components/HeroExchangeForm.tsx` vs `packages/hooks/src/state/exchange-store.ts`

```typescript
// HeroExchangeFormData
export interface HeroExchangeFormData {
  fromAmount: string;
  fromCurrency: string;
  tokenStandard?: string;
  toCurrency: string;
  selectedBankId?: string;
}

// ExchangeFormData (—á–∞—Å—Ç–∏—á–Ω–æ)
export interface ExchangeFormData {
  fromCurrency: CryptoCurrency;
  tokenStandard: string;
  toCurrency: 'UAH';
  cryptoAmount: number; // —Ç–æ –∂–µ –ø–æ–ª–µ, –¥—Ä—É–≥–æ–µ –∏–º—è
  selectedBankId: string;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø–æ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–°–¢–†–ê–ù–ï–ù–ò–Æ

### 1. ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û - Deprecated –∫–æ–¥ —É–¥–∞–ª–µ–Ω:

- **–£–¥–∞–ª–µ–Ω–æ:** `cryptoAmountStringSchema` + legacy —Ñ–∞–π–ª
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ:** —Å–æ–æ–±—â–µ–Ω–∏—è positive –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–µ–π ‚úÖ

### 2. ‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è:

#### üî• –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

- **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**: `validateAmountFormat` + `validateExchangeAmountFormat`
- **–ò—Å–ø—Ä–∞–≤–∏—Ç—å CryptoAmountInput**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π `fieldName`
- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**: –æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –¥–ª—è `AMOUNT_MIN_VALUE`

#### üîÑ –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

- **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: HeroExchangeFormData vs ExchangeFormData
- **–£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–µ–π—Ç–∞**: `cryptoAmount` vs `fromAmount`

#### ‚ö†Ô∏è –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

- **–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –≤—ã–±—Ä–∞—Ç—å Zod –ò–õ–ò useExchangeStore

### 3. ‚úÖ –°–û–•–†–ê–ù–ò–¢–¨ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

- **String —Å—Ö–µ–º—ã** - –¥–ª—è UI —Ñ–æ—Ä–º (—Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- **Number —Å—Ö–µ–º—ã** - –¥–ª—è tRPC API (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω—ã)
- **XSS –∑–∞—â–∏—Ç–∞** - –≤ security-enhanced —Å—Ö–µ–º–∞—Ö (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)---

## üí∞ –ú–ï–¢–†–ò–ö–ò –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ò

### ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏:

- **–†–ï–ê–õ–¨–ù–´–ï –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏**: 2 —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ (deprecated —Å—Ö–µ–º–∞ + –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è**: 3 –ø–æ–¥—Ö–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (UI string, API number, business validation)

### ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏:

- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**: 2 —Ñ—É–Ω–∫—Ü–∏–∏ (`validateAmountFormat` + `validateExchangeAmountFormat`)
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç–µ–π—Ç–µ**: `cryptoAmount: number` vs `fromAmount: string`
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: useExchangeStore + Zod —Å—Ö–µ–º—ã
- **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: CryptoAmountInput –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç `fieldName`
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**: 2 —Å–ø–æ—Å–æ–±–∞ –¥–ª—è `AMOUNT_MIN_VALUE`/`AMOUNT_MAX_VALUE`
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**: HeroExchangeFormData vs ExchangeFormData

### üìä –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:

- **–ê–ö–¢–ò–í–ù–´–ï –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**: 3 —Ç–∏–ø–∞ (required, min, max)
- **–§–∞–π–ª–æ–≤ —Å –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—è–º–∏**: 6 —Ñ–∞–π–ª–æ–≤ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥**: –ù–ï –ù–ê–†–£–®–ï–ù ‚úÖ

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û–°–¢–¨

**–°–†–ï–î–ù–Ø–Ø –ö–†–ò–¢–ò–ß–ù–û–°–¢–¨** - –Ω–∞–π–¥–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

- ‚úÖ **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –†–ï–®–ï–ù–´** - deprecated –∫–æ–¥ —É–¥–∞–ª–µ–Ω, —Å–æ–æ–±—â–µ–Ω–∏—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
- ‚ö†Ô∏è **–ù–∞–π–¥–µ–Ω—ã –º–µ–ª–∫–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏** - 6 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–¥–µ
- ‚úÖ **–†–∞–±–æ—á–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –Ω–µ –Ω–∞—Ä—É—à–µ–Ω–∞
- üîß **–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

**–°–õ–ï–î–£–Æ–©–ò–ô –≠–¢–ê–ü:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–µ–π –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–ê–Ø –û–ß–ò–°–¢–ö–ê (2025-01-28)

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ deprecated –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- **`cryptoAmountStringSchema`** - —É–¥–∞–ª–µ–Ω–∞ –∏–∑ `packages/utils/src/validation/schemas-crypto.ts`
- **`useExchangeStoreWithTranslations.ts`** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω legacy —Ñ–∞–π–ª ‚úÖ
- **Export statements** - –æ—á–∏—â–µ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç—ã –≤ `apps/web/src/hooks/index.ts`
- **`legacyAmountSchema`** - –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

- **`validateExchangeAmountFormat()`** - –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤ —Ä–∞–±–æ—á–∏—Ö —Ñ–æ—Ä–º–∞—Ö
- **`unifiedExchangeBaseSchema`** - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ HeroExchangeForm –∏ ExchangePage
- **`useNumericInput`** - –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ UI —É—Ä–æ–≤–Ω–µ

### –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

- **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏**: –ü–û–õ–ù–û–°–¢–¨–Æ –£–°–¢–†–ê–ù–ï–ù–´ ‚úÖ
- **Legacy –∫–æ–¥**: –ü–û–õ–ù–û–°–¢–¨–Æ –£–î–ê–õ–ï–ù ‚úÖ
- **–°–æ–æ–±—â–µ–Ω–∏—è**: –£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–´ ‚úÖ
- **–†–∞–±–æ—á–∏–π –∫–æ–¥**: –°–û–•–†–ê–ù–ï–ù ‚úÖ
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ù–ï –ù–ê–†–£–®–ï–ù–ê ‚úÖ---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã  
**–ü–µ—Ä–≤–∏—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:** 2025-01-28 ‚úÖ  
**–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑:** 2025-01-28 ‚ö†Ô∏è  
**–°—Ç–∞—Ç—É—Å:** üîÑ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ò –ù–ê–ô–î–ï–ù–´
