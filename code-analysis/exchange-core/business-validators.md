### Путь: packages/exchange-core/src/utils/business-validators.ts

**Краткое назначение (1 предложение)**

Специализированные бизнес-валидаторы для операций обмена криптовалют с проверкой валютных типов и лимитов сумм.

**Подробное описание (3–6 предложений)**

Модуль содержит валидаторы, которые реализуют конкретную бизнес-логику обменного сервиса, отделенную от базовых валидаторов для лучшей организации архитектуры. Функции проверяют корректность криптовалют против списка поддерживаемых валют из констант и валидируют суммы обмена с учетом специфических лимитов для каждой валюты. Все валидаторы возвращают единообразные ValidationResult объекты с детальными сообщениями об ошибках для пользовательского интерфейса. Модуль использует централизованные константы сообщений и границ валидации для консистентности во всем приложении. Система интегрирована с расчетными функциями для проверки сумм в реальном времени и поддерживает различные типы криптовалют. Валидаторы критически важны для предотвращения создания невалидных заявок на обмен.

**Экспортируемые сущности / API**

- `export function validateCurrency(currency: string): ValidationResult` — Валидация типа криптовалюты
- `export function validateCryptoAmount(amount: number, currency: CryptoCurrency): ValidationResult` — Валидация суммы с учетом лимитов

**Входы (expected inputs) / Параметры**

- `validateCurrency`: `currency: string` — строковое представление криптовалюты для проверки
- `validateCryptoAmount`: `amount: number` (числовая сумма), `currency: CryptoCurrency` (тип валюты для проверки лимитов)

**Выходы / Побочные эффекты**

- Обе функции возвращают `ValidationResult` — объект с массивом ошибок и статусом валидации
- `validateCurrency`: проверяет наличие валюты в `CRYPTOCURRENCIES` списке
- `validateCryptoAmount`: проверяет минимальный порог и вызывает `isAmountWithinLimits` для проверки лимитов
- Побочные эффекты отсутствуют — чистые функции без мутаций состояния

**Взаимосвязи (кто вызывает / что вызывает)**

Файлы, которые импортируют этот файл:

- `packages/exchange-core/src/utils/order-validators.ts` — использует обе функции для валидации заявок
- `packages/exchange-core/src/index.ts` — реэкспорт функций (предположительно)

Файлы, которые импортируются здесь:

- `@repo/constants` — CRYPTOCURRENCIES, EXCHANGE_VALIDATION_MESSAGES, VALIDATION_BOUNDS
- `@repo/utils` — createValidationResult, ValidationResult типы
- `../types` — CryptoCurrency интерфейс
- `./calculations` — isAmountWithinLimits функция для проверки лимитов

**Домен данных / типы**

```typescript
// Входные типы
type CurrencyString = string;
type CryptoAmount = number;
type CryptoCurrency = 'BTC' | 'ETH' | 'USDT' | 'LTC'; // из типов

// Возвращаемые типы
interface ValidationResult {
  isValid: boolean;
  errors: string[];
}

// Используемые константы
const CRYPTOCURRENCIES: CryptoCurrency[];
const EXCHANGE_VALIDATION_MESSAGES: {
  CURRENCY_INVALID: string;
  // другие сообщения
};
const VALIDATION_BOUNDS: {
  MIN_VALUE: number;
  // другие границы
};
```

**Риски и безопасность**

- **Currency validation bypass**: неправильная валидация валют может привести к созданию заявок с неподдерживаемыми криптовалютами
- **Amount limits enforcement**: критически важно корректно проверять лимиты для предотвращения слишком больших или маленьких операций
- **Type safety**: зависимость от корректной типизации CryptoCurrency для предотвращения runtime ошибок
- **Constants synchronization**: изменения в CRYPTOCURRENCIES должны синхронизироваться с типами
- **Business logic consistency**: валидация должна соответствовать реальным возможностям обменного сервиса

**Тесты / рекомендации по покрытию**

- Unit тесты для validateCurrency: все поддерживаемые валюты (BTC, ETH, USDT, LTC), неподдерживаемые валюты, пустые строки
- Unit тесты для validateCryptoAmount: граничные значения (минимум, максимум), нулевые суммы, отрицательные значения
- Integration тесты с isAmountWithinLimits для каждой валюты с различными суммами
- Edge case тесты: очень большие числа, числа с большой точностью, специальные значения (NaN, Infinity)
- Тесты сообщений об ошибках: корректность текстов для UI
- Performance тесты: валидация при высокой нагрузке

**Оценка сложности (low/medium/high)**

**low** — простые функции валидации с понятной бизнес-логикой, минимальными зависимостями.

**TODO / Рефакторинг**

- Добавить валидацию диапазонов для amount (проверка на NaN, Infinity)
- Рассмотреть добавление кеширования результатов валидации валют для производительности
- Возможно объединить с другими валидаторами в более крупный модуль для уменьшения фрагментации
- Добавить более детальные проверки точности для различных криптовалют
- Рассмотреть добавление асинхронной валидации для проверки актуальных лимитов из API
