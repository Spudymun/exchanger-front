### Путь: apps/web/src/server/trpc/routers/user/index.ts

**Краткое назначение (1 предложение)**

Агрегатор пользовательских tRPC роутеров в namespace-композицию для организации API структуры.

**Подробное описание (3–6 предложений)**

Файл создает централизованный роутер для всех пользовательских операций через namespace композицию вместо spread procedures подхода. Такая архитектура обеспечивает четкое разделение функциональных доменов: profile для управления профилем, security для операций безопасности и orders для работы с заявками. Клиентский код получает удобный API с иерархической структурой вызовов типа `trpc.user.profile.getProfile.useQuery()`, что улучшает организацию кода и предотвращает конфликты имен. Подход следует принципам модульности и позволяет независимо развивать каждую функциональную область без влияния на остальные части системы.

**Экспортируемые сущности / API**

- `export const userRouter` — композитный роутер с namespace структурой:
  - `profile: profileRouter` — операции управления профилем пользователя
  - `security: securityRouter` — операции безопасности и аутентификации
  - `orders: ordersRouter` — операции работы с заявками пользователя

**Входы (expected inputs) / Параметры**

Файл не принимает прямых входных параметров, но делегирует их дочерним роутерам:

- Profile операции через `profile.*` namespace
- Security операции через `security.*` namespace
- Orders операции через `orders.*` namespace

**Выходы / Побочные эффекты**

- Иерархическая API структура для клиентского кода
- Namespace изоляция функций для предотвращения конфликтов
- Композитная типизация для TypeScript client
- Логическая группировка связанных операций

**Взаимосвязи (кто вызывает / что вызывает)**

Файлы, которые импортируют этот файл:

- `../index.ts` — включение в главный appRouter как `user: userRouter`
- Клиентский код через `trpc.user.*` namespace вызовы
- Пользовательские компоненты и хуки

Файлы, которые импортируются здесь:

- `../../init` — createTRPCRouter для композиции
- `./orders` — роутер управления заявками
- `./profile` — роутер управления профилем
- `./security` — роутер операций безопасности

**Домен данных / типы**

```typescript
// Композитная структура пользовательского API
interface UserRouter {
  profile: ProfileRouter;
  security: SecurityRouter;
  orders: OrdersRouter;
}

// Примеры namespace вызовов
type UserAPICalls =
  | 'user.profile.getProfile'
  | 'user.profile.updateProfile'
  | 'user.security.changePassword'
  | 'user.security.enable2FA'
  | 'user.orders.getMyOrders'
  | 'user.orders.createOrder';
```

**Риски и безопасность**

- **Authorization consistency**: Все дочерние роутеры должны корректно реализовать проверки доступа
- **Namespace pollution**: Неправильная организация может привести к конфликтам имен
- **Type safety**: Изменения в дочерних роутерах влияют на типизацию всего namespace
- **API surface**: Большая композитная структура увеличивает attack surface

**Тесты / рекомендации по покрытию**

- Integration тесты полной namespace структуры
- Тесты типизации TypeScript для всех вложенных роутеров
- E2E тесты клиентского API через namespace вызовы
- Консистентность авторизации across всех дочерних роутеров

**Оценка сложности (low/medium/high)**

**low** — простая композиция без собственной бизнес-логики

**TODO / Рефакторинг**

- Добавить JSDoc документацию для каждого namespace
- Рассмотреть добавление общих middleware для всех user операций
- Добавить версионирование API при необходимости breaking changes
- Реализовать общие утилиты для всех user роутеров
