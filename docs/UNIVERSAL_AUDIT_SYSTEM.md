# üîç –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 5 –∏—é–ª—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

**–û—Å–Ω–æ–≤–∞:** CODE_REVIEW_PROTOCOLS.md + —Ä–µ–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ + —á–µ—Å—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

---

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### –ß–µ—Å—Ç–Ω–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:

- ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:** —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏–º–ø–æ—Ä—Ç—ã, —Ä–∞–∑–º–µ—Ä—ã, —Ç–æ—á–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã (90-100% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üß† **AI-assisted —á–µ—Ä–µ–∑ —á—Ç–µ–Ω–∏–µ:** —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è, –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (80-95% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üë®‚Äçüíº **–≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –¥–æ–º–µ–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ (95-100% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üéØ **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ —Ç—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É

### –ö–ª—é—á–µ–≤—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏:

1. **–¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫—Ä—ã—Ç–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞ + AI-assisted + —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ = —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ 100%
2. **–í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ CODE_REVIEW_PROTOCOLS.md —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è** —á–µ—Ä–µ–∑ AI-assisted —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è** - AI —á–∏—Ç–∞–µ—Ç –≤—Å—é –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–≤—è–∑–µ–π
4. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** - –æ—Ç 100% –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏ –¥–æ 100% —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞

---

## üîß –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Ä–æ–≤–Ω—è

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞

```typescript
interface LevelAuditConfig {
  levelNumber: 1 | 2 | 3 | 4 | 5 | 6;
  files: string[];
  maxGroupSize: number; // –õ–∏–º–∏—Ç —Ñ–∞–π–ª–æ–≤ –≤ –≥—Ä—É–ø–ø–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
  criteria: LevelCriteria; // –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ CODE_REVIEW_PROTOCOLS.md
  dependencies: {
    imports: string[]; // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
    exports: string[]; // –ö—É–¥–∞ –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
    forbidden: string[]; // –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  };
}

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —É—Ä–æ–≤–Ω—è –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
function determineAuditStrategy(config: LevelAuditConfig): AuditStrategy {
  const totalFiles = config.files.length;

  if (totalFiles <= config.maxGroupSize) {
    return { type: 'full', groups: [config.files] };
  }

  return {
    type: 'grouped',
    groups: createLogicalGroups(config.files, config.maxGroupSize),
    requiresIntegration: true,
  };
}
```

### –§–∞–∑–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≥—Ä—É–ø–ø —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

````typescript
interface FileMetrics {
  path: string;
  linesOfCode: number;
  complexity: number;
  dependencies: string[];
  logicalDomain: string;
  criticalityLevel: 'critical' | 'important' | 'standard';
}

interface GroupLimits {
  maxFiles: number;
  maxTotalLines: number;
  maxComplexity: number;
  maxDependencies: number;
}

// –ß–ï–°–¢–ù–´–ï –ª–∏–º–∏—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö AI
const AI_CONTEXT_LIMITS: GroupLimits = {
  maxFiles: 12, // –†–µ–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
  maxTotalLines: 3000, // –ú–∞–∫—Å–∏–º—É–º —Å—Ç—Ä–æ–∫ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
  maxComplexity: 100, // –°—É–º–º–∞—Ä–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø—ã
  maxDependencies: 50, // –ú–∞–∫—Å–∏–º—É–º —Å–≤—è–∑–µ–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
};

function createLogicalGroups(
  files: string[],
  levelConfig: LevelAuditConfig
): Promise<FileGroup[]> {
  return analyzeAndGroup(files, levelConfig);
}

async function analyzeAndGroup(
  files: string[],
  config: LevelAuditConfig
): Promise<FileGroup[]> {
  // 1. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
  const fileMetrics: FileMetrics[] = [];

  for (const file of files) {
    const metrics = await analyzeFileMetrics(file, config.levelNumber);
    fileMetrics.push(metrics);
  }

  // 2. –õ–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤
  const logicalGroups = groupByLogicalDomains(fileMetrics, config.levelNumber);

  // 3. –†–∞–∑–±–∏–≤–∫–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
  const finalGroups = await splitOversizedGroups(logicalGroups, AI_CONTEXT_LIMITS);

  // 4. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
  validateGrouping(finalGroups, fileMetrics);

  return finalGroups;
}

async function analyzeFileMetrics(filePath: string, level: number): Promise<FileMetrics> {
  const content = await readFile(filePath);

  return {
    path: filePath,
    linesOfCode: countEffectiveLines(content),
    complexity: calculateComplexity(content, level),
    dependencies: extractDependencies(content),
    logicalDomain: determineLogicalDomain(filePath, content, level),
    criticalityLevel: assessCriticality(filePath, content, level),
  };
}

function groupByLogicalDomains(
  metrics: FileMetrics[],
  level: number
): Map<string, FileMetrics[]> {
  const groups = new Map<string, FileMetrics[]>();

  // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã
  const domainRules = LEVEL_DOMAIN_RULES[level];

  for (const metric of metrics) {
    const domain = metric.logicalDomain;
    if (!groups.has(domain)) {
      groups.set(domain, []);
    }
    groups.get(domain)!.push(metric);
  }

  return groups;
}

async function splitOversizedGroups(
  logicalGroups: Map<string, FileMetrics[]>,
  limits: GroupLimits
): Promise<FileGroup[]> {
  const finalGroups: FileGroup[] = [];

  for (const [domain, files] of logicalGroups) {
    const groupMetrics = calculateGroupMetrics(files);

    if (isWithinLimits(groupMetrics, limits)) {
      // –ì—Ä—É–ø–ø–∞ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –ª–∏–º–∏—Ç—ã
      finalGroups.push({
        name: domain,
        files: files.map(f => f.path),
        metrics: groupMetrics,
        splitStrategy: 'none',
      });
    } else {
      // –ì—Ä—É–ø–ø–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç—ã - –Ω—É–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å
      const splitGroups = await intelligentSplit(files, limits, domain);
      finalGroups.push(...splitGroups);
    }
  }

  return finalGroups;
}

async function intelligentSplit(
  files: FileMetrics[],
  limits: GroupLimits,
  baseDomain: string
): Promise<FileGroup[]> {
  const groups: FileGroup[] = [];

  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–º —Ñ–∞–π–ª–∞–º
  const sorted = files.sort((a, b) => {
    const priorityOrder = { critical: 0, important: 1, standard: 2 };
    return priorityOrder[a.criticalityLevel] - priorityOrder[b.criticalityLevel];
  });

  let currentGroup: FileMetrics[] = [];
  let currentMetrics = initializeGroupMetrics();

  for (const file of sorted) {
    const wouldExceedLimits = wouldExceedGroupLimits(
      currentMetrics,
      file,
      limits
    );

    if (wouldExceedLimits && currentGroup.length > 0) {
      // –ó–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É
      groups.push({
        name: `${baseDomain}_part_${groups.length + 1}`,
        files: currentGroup.map(f => f.path),
        metrics: currentMetrics,
        splitStrategy: 'by_complexity',
      });

      // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É
      currentGroup = [file];
      currentMetrics = fileToGroupMetrics(file);
    } else {
      currentGroup.push(file);
      currentMetrics = mergeMetrics(currentMetrics, file);
    }
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –≥—Ä—É–ø–ø—É
  if (currentGroup.length > 0) {
    groups.push({
      name: `${baseDomain}_part_${groups.length + 1}`,
      files: currentGroup.map(f => f.path),
      metrics: currentMetrics,
      splitStrategy: groups.length === 0 ? 'none' : 'by_complexity',
    });
  }

  return groups;
}
// –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è
const LEVEL_DOMAIN_RULES = {
  1: { // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã
    domains: {
      'core-constants': ['constants/core', 'constants/business'],
      'ui-constants': ['constants/ui', 'constants/themes'],
      'api-constants': ['constants/api', 'constants/endpoints'],
      'core-types': ['types/core', 'types/business'],
      'api-types': ['types/api', 'types/dto'],
      'ui-types': ['types/ui', 'types/components'],
    },
    maxFilesPerDomain: 8, // –ö—Ä–∏—Ç–∏—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å - –º–∞–ª—ã–µ –≥—Ä—É–ø–ø—ã
    complexityWeights: { constant: 1, type: 2, enum: 1.5 },
  },

  2: { // –£—Ç–∏–ª–∏—Ç—ã –∏ core –ª–æ–≥–∏–∫–∞
    domains: {
      'data-utils': ['utils/data', 'utils/transform'],
      'validation-utils': ['utils/validation', 'validators'],
      'format-utils': ['utils/format', 'formatters'],
      'business-logic': ['core/business', 'core/calculations'],
      'data-managers': ['core/managers', 'core/services'],
    },
    maxFilesPerDomain: 10,
    complexityWeights: { function: 1, class: 3, method: 1.5 },
  },

  3: { // API —Å–ª–æ–π
    domains: {
      'auth-api': ['routers/auth', 'procedures/auth'],
      'business-api': ['routers/business', 'procedures/business'],
      'admin-api': ['routers/admin', 'procedures/admin'],
      'middleware': ['middleware', 'guards'],
      'schemas': ['schemas', 'validation'],
    },
    maxFilesPerDomain: 6, // –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –æ—á–µ–Ω—å –º–∞–ª—ã–µ –≥—Ä—É–ø–ø—ã
    complexityWeights: { procedure: 2, middleware: 3, schema: 1 },
  },

  4: { // –•—É–∫–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    domains: {
      'stores': ['stores/auth', 'stores/business', 'stores/ui'],
      'enhanced-hooks': ['hooks/enhanced', 'hooks/business'],
      'selectors': ['selectors', 'derived'],
      'state-utils': ['hooks/utils', 'state/utils'],
    },
    maxFilesPerDomain: 8,
    complexityWeights: { store: 4, hook: 2, selector: 1 },
  },

  5: { // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    domains: {
      'ui-primitives': ['ui/primitives', 'ui/atoms'],
      'ui-molecules': ['ui/molecules', 'ui/compounds'],
      'business-components': ['components/business', 'components/features'],
      'layout-components': ['components/layout', 'components/structure'],
      'page-components': ['components/pages', 'app/'],
    },
    maxFilesPerDomain: 5, // –û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    complexityWeights: { component: 3, hook: 2, style: 1 },
  },

  6: { // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    domains: {
      'build-config': ['webpack', 'vite', 'rollup', 'tsconfig'],
      'dev-config': ['eslint', 'prettier', 'jest', 'playwright'],
      'package-config': ['package.json', 'turbo.json'],
      'deployment-config': ['docker', 'nginx', 'vercel'],
    },
    maxFilesPerDomain: 4, // –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
    complexityWeights: { config: 2, script: 1.5, dockerfile: 3 },
  },
};

function determineLogicalDomain(
  filePath: string,
  content: string,
  level: number
): string {
  const rules = LEVEL_DOMAIN_RULES[level];

  // –ê–Ω–∞–ª–∏–∑ –ø—É—Ç–∏ —Ñ–∞–π–ª–∞
  for (const [domain, patterns] of Object.entries(rules.domains)) {
    if (patterns.some(pattern => filePath.includes(pattern))) {
      return domain;
    }
  }

  // –ê–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞
  return analyzeContentDomain(content, level);
}

function calculateComplexity(content: string, level: number): number {
  const rules = LEVEL_DOMAIN_RULES[level];
  let complexity = 0;

  // –ü–æ–¥—Å—á–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
  const elements = analyzeCodeElements(content);

  for (const [type, count] of Object.entries(elements)) {
    const weight = rules.complexityWeights[type] || 1;
    complexity += count * weight;
  }

  return complexity;
}

function assessCriticality(
  filePath: string,
  content: string,
  level: number
): 'critical' | 'important' | 'standard' {
  // –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ —É—Ä–æ–≤–Ω—è–º
  const criticalPatterns = {
    1: ['constants/core', 'types/core', 'API_ENDPOINTS'],
    2: ['validation', 'core/business', 'security'],
    3: ['auth', 'middleware', 'security'],
    4: ['stores/auth', 'stores/core'],
    5: ['layout', 'error-boundary'],
    6: ['package.json', 'tsconfig', 'webpack'],
  };

  const levelPatterns = criticalPatterns[level] || [];

  if (levelPatterns.some(pattern =>
    filePath.includes(pattern) || content.includes(pattern)
  )) {
    return 'critical';
  }

  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏
  if (content.length > 1000 || filePath.includes('index.')) {
    return 'important';
  }

  return 'standard';
}

### –§–∞–∑–∞ 3: –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ

```typescript
async function auditGroup(group: FileGroup, config: LevelAuditConfig): Promise<GroupAuditResult> {
  const results: GroupAuditResult = {
    groupName: group.name,
    files: group.files,
    violations: [],
    metrics: {},
    dependencies: [],
    redundancyReport: null, // –ù–û–í–û–ï: –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
  };

  // 1. –ü–†–ò–û–†–ò–¢–ï–¢: –ü–æ–∏—Å–∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ (Rule 20)
  const redundancyChecks = await runRedundancyAnalysis(group, config);
  results.violations.push(...redundancyChecks.violations);
  results.redundancyReport = redundancyChecks.report;

  // 2. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
  const automatedChecks = await runAutomatedChecks(group, config);
  results.violations.push(...automatedChecks.violations);

  // 3. –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
  const structuralChecks = await runStructuralChecks(group, config);
  results.violations.push(...structuralChecks.violations);

  // 4. –ü—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  const dependencyChecks = await runDependencyChecks(group, config);
  results.violations.push(...dependencyChecks.violations);
  results.dependencies = dependencyChecks.dependencies;

  // 5. AI-assisted –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–Ω–æ–≤—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥)
  const aiAssistedChecks = await runAIAssistedVerification(group, config);
  results.violations.push(...aiAssistedChecks.violations);
  results.contextualInsights = aiAssistedChecks.insights;

  return results;
}

// –ù–û–í–ê–Ø —Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
async function runRedundancyAnalysis(
  group: FileGroup,
  config: LevelAuditConfig
): Promise<RedundancyAnalysisResult> {
  const violations: Violation[] = [];
  const report: RedundancyReport = {
    exactDuplicates: [],
    semanticSimilarities: [],
    functionalOverlaps: [],
    structuralRedundancies: [],
    centralizationOpportunities: [],
  };

  // 1. –ü–æ–∏—Å–∫ —Ç–æ—á–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
  const exactDuplicates = await findExactDuplicates(group.files);
  report.exactDuplicates = exactDuplicates;
  violations.push(...exactDuplicates.map(d => ({
    type: 'exact-duplicate',
    severity: 'critical',
    files: d.files,
    message: `Exact duplicate code found: ${d.codeFragment}`,
    redundancyLevel: 1.0,
  })));

  // 2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏
  const semanticSimilarities = await findSemanticSimilarities(group.files, config.levelNumber);
  report.semanticSimilarities = semanticSimilarities;
  violations.push(...semanticSimilarities
    .filter(s => s.similarity > 0.8)
    .map(s => ({
      type: 'semantic-similarity',
      severity: s.similarity > 0.9 ? 'critical' : 'important',
      files: s.files,
      message: `High semantic similarity (${(s.similarity * 100).toFixed(1)}%): ${s.description}`,
      redundancyLevel: s.similarity,
    })));

  // 3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è
  const functionalOverlaps = await findFunctionalOverlaps(group.files, config.levelNumber);
  report.functionalOverlaps = functionalOverlaps;
  violations.push(...functionalOverlaps.map(o => ({
    type: 'functional-overlap',
    severity: 'important',
    files: o.files,
    message: `Functional overlap detected: ${o.description}`,
    redundancyLevel: o.overlapPercentage,
  })));

  // 4. –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏
  const structuralRedundancies = await findStructuralRedundancies(group.files);
  report.structuralRedundancies = structuralRedundancies;
  violations.push(...structuralRedundancies.map(r => ({
    type: 'structural-redundancy',
    severity: 'recommended',
    files: r.files,
    message: `Structural redundancy: ${r.pattern}`,
    redundancyLevel: r.redundancyLevel,
  })));

  // 5. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
  const centralizationOpportunities = await findCentralizationOpportunities(
    group.files,
    config.levelNumber
  );
  report.centralizationOpportunities = centralizationOpportunities;
  violations.push(...centralizationOpportunities.map(c => ({
    type: 'centralization-opportunity',
    severity: 'important',
    files: c.files,
    message: `Centralization opportunity: ${c.description}`,
    redundancyLevel: c.potentialSavings,
    recommendation: c.suggestion,
  })));

  return { violations, report };
}

// –ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–∏—Å–∫–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ —Ç–∏–ø–∞–º

async function findExactDuplicates(files: string[]): Promise<ExactDuplicate[]> {
  const duplicates: ExactDuplicate[] = [];
  const codeBlocks = new Map<string, string[]>(); // –∫–æ–¥ -> —Ñ–∞–π–ª—ã

  for (const file of files) {
    const content = await readFile(file);
    const blocks = extractCodeBlocks(content);

    for (const block of blocks) {
      const normalizedBlock = normalizeCode(block);
      if (normalizedBlock.length > 50) { // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è –¥—É–±–ª–∏–∫–∞—Ç–∞
        if (!codeBlocks.has(normalizedBlock)) {
          codeBlocks.set(normalizedBlock, []);
        }
        codeBlocks.get(normalizedBlock)!.push(file);
      }
    }
  }

  // –ù–∞—Ö–æ–¥–∏–º –¥—É–±–ª–∏–∫–∞—Ç—ã
  for (const [code, filesList] of codeBlocks) {
    if (filesList.length > 1) {
      duplicates.push({
        codeFragment: code.substring(0, 100) + '...',
        files: filesList,
        linesCount: code.split('\n').length,
      });
    }
  }

  return duplicates;
}

async function findSemanticSimilarities(
  files: string[],
  level: number
): Promise<SemanticSimilarity[]> {
  const similarities: SemanticSimilarity[] = [];
  const analyzers = LEVEL_SEMANTIC_ANALYZERS[level];

  for (let i = 0; i < files.length; i++) {
    for (let j = i + 1; j < files.length; j++) {
      const file1 = files[i];
      const file2 = files[j];

      for (const analyzer of analyzers) {
        const similarity = await analyzer.compare(file1, file2);
        if (similarity.score > 0.7) { // –ü–æ—Ä–æ–≥ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Å—Ö–æ–∂–µ—Å—Ç–∏
          similarities.push({
            files: [file1, file2],
            similarity: similarity.score,
            description: similarity.description,
            analyzer: analyzer.name,
            elements: similarity.matchingElements,
          });
        }
      }
    }
  }

  return similarities;
}

async function findFunctionalOverlaps(
  files: string[],
  level: number
): Promise<FunctionalOverlap[]> {
  const overlaps: FunctionalOverlap[] = [];

  // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —É—Ä–æ–≤–Ω—è –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è
  const analyzers = LEVEL_FUNCTIONAL_ANALYZERS[level];

  for (const analyzer of analyzers) {
    const foundOverlaps = await analyzer.findOverlaps(files);
    overlaps.push(...foundOverlaps);
  }

  return overlaps;
}

// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è
const LEVEL_SEMANTIC_ANALYZERS = {
  1: [ // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã
    new ConstantSemanticAnalyzer(),
    new TypeStructureAnalyzer(),
    new EnumValueAnalyzer(),
  ],
  2: [ // –£—Ç–∏–ª–∏—Ç—ã
    new FunctionSignatureAnalyzer(),
    new BusinessLogicAnalyzer(),
    new ValidationLogicAnalyzer(),
  ],
  3: [ // API
    new ProcedureAnalyzer(),
    new MiddlewareAnalyzer(),
    new SchemaAnalyzer(),
  ],
  4: [ // –•—É–∫–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    new StoreStructureAnalyzer(),
    new HookLogicAnalyzer(),
    new SelectorAnalyzer(),
  ],
  5: [ // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    new ComponentStructureAnalyzer(),
    new PropsAnalyzer(),
    new UILogicAnalyzer(),
  ],
  6: [ // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    new ConfigStructureAnalyzer(),
    new ScriptAnalyzer(),
    new DependencyAnalyzer(),
  ],
};

const LEVEL_FUNCTIONAL_ANALYZERS = {
  1: [
    new ConstantFunctionalAnalyzer(), // –ò—â–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
    new TypeFunctionalAnalyzer(),     // –ò—â–µ—Ç —Ç–∏–ø—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
  ],
  2: [
    new UtilityFunctionalAnalyzer(),  // –ò—â–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏, —Ä–µ—à–∞—é—â–∏–µ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
    new ValidationFunctionalAnalyzer(), // –ò—â–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  ],
  3: [
    new APIFunctionalAnalyzer(),      // –ò—â–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
    new MiddlewareFunctionalAnalyzer(), // –ò—â–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è middleware
  ],
  4: [
    new StateFunctionalAnalyzer(),    // –ò—â–µ—Ç store —Å –ø–æ—Ö–æ–∂–µ–π –ª–æ–≥–∏–∫–æ–π
    new HookFunctionalAnalyzer(),     // –ò—â–µ—Ç —Ö—É–∫–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
  ],
  5: [
    new ComponentFunctionalAnalyzer(), // –ò—â–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
    new UIFunctionalAnalyzer(),       // –ò—â–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â—É—é—Å—è UI –ª–æ–≥–∏–∫—É
  ],
  6: [
    new ConfigFunctionalAnalyzer(),   // –ò—â–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  ],
};
````

### –§–∞–∑–∞ 4: –ú–µ–∂–≥—Ä—É–ø–ø–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏

```typescript
async function runIntegrationChecks(
  groupResults: GroupAuditResult[],
  config: LevelAuditConfig
): Promise<IntegrationViolation[]> {
  const violations: IntegrationViolation[] = [];

  // 1. –ü–†–ò–û–†–ò–¢–ï–¢: –ú–µ–∂–≥—Ä—É–ø–ø–æ–≤–∞—è –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å (Rule 20)
  violations.push(...(await checkCrossGroupRedundancy(groupResults, config)));

  // 2. –ü—Ä–æ–≤–µ—Ä–∫–∏ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ —É—Ä–æ–≤–Ω—è
  violations.push(...(await checkInterGroupDependencies(groupResults)));

  // 3. –ü—Ä–æ–≤–µ—Ä–∫–∏ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏
  violations.push(...(await checkCrossLevelDependencies(groupResults, config)));

  // 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
  violations.push(...(await checkArchitecturalIntegrity(groupResults, config)));

  return violations;
}

// –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏
async function checkCrossGroupRedundancy(
  groupResults: GroupAuditResult[],
  config: LevelAuditConfig
): Promise<IntegrationViolation[]> {
  const violations: IntegrationViolation[] = [];

  // 1. –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏
  const crossGroupDuplicates = await findCrossGroupDuplicates(groupResults);
  violations.push(
    ...crossGroupDuplicates.map(d => ({
      type: 'cross-group-duplicate',
      severity: 'critical',
      groups: d.groups,
      files: d.files,
      message: `Duplicate code found across groups: ${d.description}`,
      redundancyLevel: d.similarity,
      recommendation: d.centralizationSuggestion,
    }))
  );

  // 2. –ü–æ–∏—Å–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
  const centralizationOpportunities = await findCrossGroupCentralization(
    groupResults,
    config.levelNumber
  );
  violations.push(
    ...centralizationOpportunities.map(c => ({
      type: 'centralization-opportunity',
      severity: 'important',
      groups: c.groups,
      files: c.files,
      message: `Cross-group centralization opportunity: ${c.description}`,
      recommendation: c.suggestion,
      potentialSavings: c.linesOfCodeSavings,
    }))
  );

  // 3. –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π
  const architecturalViolations = await findArchitecturalRedundancy(
    groupResults,
    config.levelNumber
  );
  violations.push(...architecturalViolations);

  return violations;
}

async function findCrossGroupDuplicates(
  groupResults: GroupAuditResult[]
): Promise<CrossGroupDuplicate[]> {
  const duplicates: CrossGroupDuplicate[] = [];

  // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–∞–∂–¥—É—é –≥—Ä—É–ø–ø—É —Å –∫–∞–∂–¥–æ–π
  for (let i = 0; i < groupResults.length; i++) {
    for (let j = i + 1; j < groupResults.length; j++) {
      const group1 = groupResults[i];
      const group2 = groupResults[j];

      const groupDuplicates = await compareGroupsForDuplicates(group1, group2);
      duplicates.push(...groupDuplicates);
    }
  }

  return duplicates;
}

async function compareGroupsForDuplicates(
  group1: GroupAuditResult,
  group2: GroupAuditResult
): Promise<CrossGroupDuplicate[]> {
  const duplicates: CrossGroupDuplicate[] = [];

  // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏–∑ –ø–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø—ã —Å –∫–∞–∂–¥—ã–º –∏–∑ –≤—Ç–æ—Ä–æ–π
  for (const file1 of group1.files) {
    for (const file2 of group2.files) {
      const similarity = await calculateFileSimilarity(file1, file2);

      if (similarity.score > 0.8) {
        // –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –º–µ–∂–≥—Ä—É–ø–ø–æ–≤—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
        duplicates.push({
          groups: [group1.groupName, group2.groupName],
          files: [file1, file2],
          similarity: similarity.score,
          description: similarity.description,
          centralizationSuggestion: generateCentralizationSuggestion(file1, file2, similarity),
        });
      }
    }
  }

  return duplicates;
}
```

### –§–∞–∑–∞ 5: –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

```typescript
function calculateLevelScore(
  groupResults: GroupAuditResult[],
  integrationViolations: IntegrationViolation[],
  config: LevelAuditConfig
): LevelAuditScore {
  // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–æ—Ä–º—É–ª—É –∏–∑ CODE_REVIEW_PROTOCOLS.md
  const allViolations = [...groupResults.flatMap(g => g.violations), ...integrationViolations];

  const criticalCount = allViolations.filter(v => v.severity === 'critical').length;
  const importantCount = allViolations.filter(v => v.severity === 'important').length;
  const recommendedCount = allViolations.filter(v => v.severity === 'recommended').length;

  const score = criticalCount * 0 + importantCount * 0.7 + recommendedCount * 0.9;
  const maxScore = groupResults.reduce((sum, g) => sum + g.files.length, 0);

  return {
    score: score / maxScore,
    grade: getGrade(score / maxScore),
    violations: allViolations,
    summary: generateSummary(groupResults, integrationViolations),
  };
}
```

---

## üìä –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è

### –£—Ä–æ–≤–µ–Ω—å 1: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã

```typescript
const LEVEL_1_CONFIG: LevelAuditConfig = {
  levelNumber: 1,
  files: [], // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
  maxGroupSize: 20, // –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑-–∑–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
  criteria: {
    // –í—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ CODE_REVIEW_PROTOCOLS.md –¥–ª—è —É—Ä–æ–≤–Ω—è 1
    architecturalRequirements: [
      'singleSourceOfTruth',
      'properCategorization',
      'strictTyping',
      'typeExports',
    ],
    structuralRequirements: [
      'noCalculations',
      'noCyclicDependencies',
      'properNesting',
      'uniformNaming',
    ],
    automatedChecks: [
      'findDuplicateConstants',
      'checkAsConst',
      'validateImports',
      'checkSemanticSimilarity',
    ],
    manualChecks: ['logicalGrouping', 'namingConsistency', 'architecturalCoherence'],
  },
  dependencies: {
    imports: [], // –ù–∏–∫–æ–≥–æ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç
    exports: ['@repo/constants', '@repo/exchange-core/types'],
    forbidden: ['react', 'zustand', 'trpc', 'next'],
  },
};
```

### –£—Ä–æ–≤–µ–Ω—å 2: –£—Ç–∏–ª–∏—Ç—ã –∏ core –ª–æ–≥–∏–∫–∞

```typescript
const LEVEL_2_CONFIG: LevelAuditConfig = {
  levelNumber: 2,
  files: [],
  maxGroupSize: 15, // –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä
  criteria: {
    architecturalRequirements: [
      'pureFunctions',
      'singleResponsibility',
      'functionalStyle',
      'properDependencies',
    ],
    qualityRequirements: ['functionSize', 'complexity', 'parametersCount', 'nestingLevel'],
    automatedChecks: [
      'findSideEffects',
      'checkFunctionPurity',
      'analyzeFunctionSize',
      'validateDependencies',
    ],
    manualChecks: ['businessLogicSeparation', 'responsibilityCoherence', 'edgeCasesHandling'],
  },
  dependencies: {
    imports: ['@repo/constants', '@repo/exchange-core/types'],
    exports: ['@repo/exchange-core/utils', '@repo/exchange-core/data'],
    forbidden: ['react', 'zustand', 'trpc', 'next/router'],
  },
};
```

### –£—Ä–æ–≤–µ–Ω—å 3: API —Å–ª–æ–π (tRPC)

```typescript
const LEVEL_3_CONFIG: LevelAuditConfig = {
  levelNumber: 3,
  files: [],
  maxGroupSize: 10, // –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
  criteria: {
    architecturalRequirements: [
      'roleBasedSeparation',
      'modularStructure',
      'middlewareChains',
      'centralizedErrorHandling',
    ],
    securityRequirements: ['authentication', 'authorization', 'rateLimiting', 'inputValidation'],
    automatedChecks: [
      'findUnprotectedProcedures',
      'checkRouterSize',
      'validateInputSchemas',
      'checkRoleModel',
    ],
    manualChecks: ['securityImplementation', 'errorHandlingConsistency', 'businessLogicPlacement'],
  },
  dependencies: {
    imports: ['@repo/constants', '@repo/exchange-core/types', '@repo/exchange-core/utils'],
    exports: ['trpc routers'],
    forbidden: ['react', 'zustand', 'direct database calls'],
  },
};
```

### –£—Ä–æ–≤–µ–Ω—å 4: –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ö—É–∫–∏

```typescript
const LEVEL_4_CONFIG: LevelAuditConfig = {
  levelNumber: 4,
  files: [],
  maxGroupSize: 12, // –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä
  criteria: {
    architecturalRequirements: [
      'layerSeparation',
      'encapsulation',
      'immutableUpdates',
      'selectors',
    ],
    structuralRequirements: ['modularity', 'enhancedHooks', 'strictTyping', 'devTools'],
    automatedChecks: [
      'findStateMutations',
      'checkTyping',
      'analyzeStoreSize',
      'validateSelectors',
      'checkMemoryLeaks',
      'findStaleClosures',
    ],
    manualChecks: ['businessLogicEncapsulation', 'storeResponsibility', 'performanceOptimization'],
  },
  dependencies: {
    imports: ['@repo/constants', '@repo/exchange-core/types', '@repo/exchange-core/utils', 'trpc'],
    exports: ['@repo/hooks'],
    forbidden: ['direct api calls', 'localStorage in stores'],
  },
};
```

### –£—Ä–æ–≤–µ–Ω—å 5: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ UI

```typescript
const LEVEL_5_CONFIG: LevelAuditConfig = {
  levelNumber: 5,
  files: [],
  maxGroupSize: 8, // –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞
  criteria: {
    architecturalRequirements: [
      'reusableVsSpecificSeparation',
      'noBusinessLogic',
      'composition',
      'polymorphism',
    ],
    qualityRequirements: [
      'componentSize',
      'singleResponsibility',
      'propsCount',
      'readability',
      'performanceAwareness',
      'accessibilityBasics',
    ],
    automatedChecks: [
      'findApiCalls',
      'checkComponentSize',
      'analyzeProps',
      'validateNesting',
      'checkBundleImports',
      'validateA11y',
    ],
    manualChecks: ['businessLogicSeparation', 'componentResponsibility', 'userExperience'],
  },
  dependencies: {
    imports: ['@repo/constants', '@repo/exchange-core/utils', '@repo/hooks', '@repo/ui'],
    exports: ['@repo/ui', 'app components'],
    forbidden: ['direct trpc calls', 'localStorage', 'direct api calls'],
  },
};
```

### –£—Ä–æ–≤–µ–Ω—å 6: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã

```typescript
const LEVEL_6_CONFIG: LevelAuditConfig = {
  levelNumber: 6,
  files: [],
  maxGroupSize: 5, // –û—á–µ–Ω—å –º–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
  criteria: {
    architecturalRequirements: [
      'dependencyConsistency',
      'configurationSecurity',
      'buildOptimization',
      'monorepoScalability',
    ],
    qualityRequirements: [
      'documentation',
      'minimalism',
      'backwardCompatibility',
      'performance',
      'bundleSizeMonitoring',
    ],
    automatedChecks: [
      'checkDependencyVersions',
      'validateScripts',
      'checkConfigConsistency',
      'analyzeBundleSize',
    ],
    manualChecks: ['configurationSecurity', 'performanceOptimization', 'developmentExperience'],
  },
  dependencies: {
    imports: ['dev dependencies only'],
    exports: ['configuration'],
    forbidden: ['production dependencies in root'],
  },
};
```

---

## ÔøΩ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–£—Ä–æ–≤–µ–Ω—å 1)

```typescript
async function runAutomatedChecks(
  group: FileGroup,
  config: LevelAuditConfig
): Promise<AutomatedCheckResult> {
  const violations: Violation[] = [];

  // –û–±—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π
  violations.push(...(await checkFileSize(group.files)));
  violations.push(...(await checkImports(group.files, config.dependencies)));
  violations.push(...(await findDuplication(group.files)));
  violations.push(...(await checkNaming(group.files)));

  // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —É—Ä–æ–≤–Ω—è
  for (const checkName of config.criteria.automatedChecks) {
    const checkFunction = AUTOMATED_CHECKS[checkName];
    if (checkFunction) {
      violations.push(...(await checkFunction(group.files, config)));
    }
  }

  return {
    violations,
    confidence: 0.95, // –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    timeSpent: '30 —Å–µ–∫—É–Ω–¥ - 2 –º–∏–Ω—É—Ç—ã',
  };
}
```

### 2. AI-assisted –ø—Ä–æ–≤–µ—Ä–∫–∏ (–£—Ä–æ–≤–µ–Ω—å 2) - –û–°–ù–û–í–ù–û–ô –ú–ï–¢–û–î

```typescript
async function runFullAIAssistedAudit(
  level: number,
  files: string[]
): Promise<ComprehensiveAuditResult> {
  // 1. –°—Ç—Ä–æ—é –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
  const projectContext = await buildFullProjectContext(files, level);

  // 2. –ß–∏—Ç–∞—é –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  const fileAnalyses: FileAnalysis[] = [];

  for (const file of files) {
    const analysis = await performDeepFileAnalysis(file, projectContext, level);
    fileAnalyses.push(analysis);
  }

  // 3. –ú–µ–∂—Ñ–∞–π–ª–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
  const architecturalAnalysis = await analyzeArchitecturalPatterns(fileAnalyses, projectContext);

  // 4. –ê–Ω–∞–ª–∏–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ
  const redundancyAnalysis = await analyzeRedundancyAcrossLevel(fileAnalyses, projectContext);

  // 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
  const recommendations = await generateContextualRecommendations(
    fileAnalyses,
    architecturalAnalysis,
    redundancyAnalysis
  );

  return {
    fileAnalyses,
    architecturalAnalysis,
    redundancyAnalysis,
    recommendations,
    overallScore: calculateOverallScore(fileAnalyses),
    confidence: 0.87, // –í—ã—Å–æ–∫–∞—è –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
    timeSpent: `${files.length * 3} –º–∏–Ω—É—Ç`,
    coverage: '100% —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º',
  };
}

async function performDeepFileAnalysis(
  filePath: string,
  projectContext: ProjectContext,
  level: number
): Promise<FileAnalysis> {
  // 1. –ß–∏—Ç–∞—é –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
  const content = await readFile(filePath);

  // 2. –ß–∏—Ç–∞—é –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  const relatedFiles = await getAllRelatedFiles(filePath, projectContext);
  const contextualContent = await readAllContextualFiles(relatedFiles);

  // 3. –ü—Ä–∏–º–µ–Ω—è—é –í–°–ï –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–∑ CODE_REVIEW_PROTOCOLS.md
  const levelCriteria = CODE_REVIEW_PROTOCOLS[level];

  const analysis: FileAnalysis = {
    // –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    structure: await analyzeStructure(content, levelCriteria.structural),

    // –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    architecture: await analyzeArchitecture(
      content,
      contextualContent,
      levelCriteria.architectural
    ),

    // –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
    quality: await analyzeQuality(content, projectContext, levelCriteria.quality),

    // –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
    semantics: await analyzeSemantics(content, projectContext, levelCriteria.semantic),

    // –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞
    redundancy: await analyzeRedundancy(content, contextualContent, levelCriteria.redundancy),

    // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
    businessAlignment: await analyzeBusinessAlignment(content, projectContext.businessRules),

    // –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
    performance: await analyzePerformance(content, projectContext, levelCriteria.performance),

    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    security: await analyzeSecurity(content, projectContext, levelCriteria.security),

    violations: [],
    improvements: [],
    confidence: 0.87,
  };

  // –ö–æ–º–ø–∏–ª–∏—Ä—É—é –≤—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è
  analysis.violations = compileAllViolations(analysis, levelCriteria);
  analysis.improvements = generateImprovements(analysis, levelCriteria);

  return analysis;
}
```

### 3. –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–£—Ä–æ–≤–µ–Ω—å 3) - –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ

```typescript
async function runExpertVerification(
  criticalFiles: string[],
  aiResults: ComprehensiveAuditResult
): Promise<ExpertVerificationResult> {
  const violations: Violation[] = [];

  // –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á–∏ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ AI –∞–Ω–∞–ª–∏–∑–∞
  const expertTasks = generateExpertTasks(criticalFiles, aiResults);

  for (const task of expertTasks) {
    // –≠–∫—Å–ø–µ—Ä—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç AI
    const expertInput = {
      files: task.files,
      aiAnalysis: task.aiAnalysis,
      specificConcerns: task.concerns,
      checklistItems: task.checklist,
    };

    // –≠–∫—Å–ø–µ—Ä—Ç —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–∞–º–æ–º –≤–∞–∂–Ω–æ–º
    const expertAnalysis = await requestExpertAnalysis(expertInput);
    violations.push(...expertAnalysis.violations);
  }

  return {
    violations,
    confidence: 0.98, // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è
    expertHours: criticalFiles.length * 0.5, // 30 –º–∏–Ω –Ω–∞ —Ñ–∞–π–ª
  };
}
```

### 4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workflow

```typescript
async function runIntegratedAudit(
  level: number,
  strategy: AuditStrategy
): Promise<IntegratedAuditResult> {
  const files = await discoverLevelFiles(level);

  // –≠—Ç–∞–ø 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤—Å–µ–≥–¥–∞)
  const automatedResults = await runAutomatedChecks(files);

  // –≠—Ç–∞–ø 2: AI-assisted –ø—Ä–æ–≤–µ—Ä–∫–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥)
  const aiResults = await runFullAIAssistedAudit(level, files);

  // –≠—Ç–∞–ø 3: –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
  const criticalFiles = identifyCriticalFiles(files, aiResults, strategy);
  const expertResults =
    criticalFiles.length > 0 ? await runExpertVerification(criticalFiles, aiResults) : null;

  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  const integratedResults = integrateAllResults(automatedResults, aiResults, expertResults);

  return {
    ...integratedResults,
    strategy,
    coverage: {
      automated: '100% —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫',
      aiAssisted: '100% —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫',
      expert: `${criticalFiles.length} –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤`,
    },
    confidence: calculateIntegratedConfidence(automatedResults, aiResults, expertResults),
    theoreticalCoverage: '100%', // –í—Å–µ –∞—Å–ø–µ–∫—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã
  };
}
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```typescript
async function runStructuralChecks(
  group: FileGroup,
  config: LevelAuditConfig
): Promise<StructuralCheckResult> {
  const violations: Violation[] = [];

  // –ü—Ä–æ–≤–µ—Ä–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
  for (const requirement of config.criteria.architecturalRequirements) {
    const checkFunction = STRUCTURAL_CHECKS[requirement];
    if (checkFunction) {
      violations.push(...(await checkFunction(group.files, config)));
    }
  }

  return { violations };
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```typescript
async function runDependencyChecks(
  group: FileGroup,
  config: LevelAuditConfig
): Promise<DependencyCheckResult> {
  const violations: Violation[] = [];
  const dependencies: Dependency[] = [];

  for (const file of group.files) {
    const fileDeps = await analyzeDependencies(file);
    dependencies.push(...fileDeps);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
    const forbidden = fileDeps.filter(dep =>
      config.dependencies.forbidden.some(f => dep.source.includes(f))
    );

    violations.push(
      ...forbidden.map(dep => ({
        type: 'forbidden-dependency',
        severity: 'critical',
        file: file,
        message: `Forbidden dependency: ${dep.source}`,
        line: dep.line,
      }))
    );
  }

  return { violations, dependencies };
}
```

### 4. –†—É—á–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

```typescript
async function runManualVerification(
  group: FileGroup,
  config: LevelAuditConfig
): Promise<ManualCheckResult> {
  const violations: Violation[] = [];

  // –°–æ–∑–¥–∞–µ–º —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
  const checklist = generateManualChecklist(group, config);

  // –ü–æ–º–µ—á–∞–µ–º —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
  violations.push(
    ...checklist.map(item => ({
      type: 'manual-verification-required',
      severity: 'important',
      file: item.file,
      message: `Manual check required: ${item.description}`,
      checklist: item.criteria,
    }))
  );

  return { violations };
}
```

---

## üìà –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏

### 1. –û—Ç—á–µ—Ç –ø–æ –≥—Ä—É–ø–ø–µ

```typescript
interface GroupAuditReport {
  groupName: string;
  filesCount: number;
  violationsCount: {
    critical: number;
    important: number;
    recommended: number;
  };
  score: number;
  grade: 'excellent' | 'good' | 'needs-work' | 'critical';
  topIssues: Violation[];
  dependencies: Dependency[];
}
```

### 2. –û—Ç—á–µ—Ç –ø–æ —É—Ä–æ–≤–Ω—é

```typescript
interface LevelAuditReport {
  levelNumber: number;
  levelName: string;
  totalFiles: number;
  groupsCount: number;
  overallScore: number;
  overallGrade: string;
  groups: GroupAuditReport[];
  integrationIssues: IntegrationViolation[];
  recommendations: string[];
  manualVerificationRequired: ManualCheckItem[];
}
```

### 3. –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

```typescript
interface CompleteAuditReport {
  timestamp: string;
  levels: LevelAuditReport[];
  summary: {
    totalFiles: number;
    overallScore: number;
    criticalIssues: number;
    architecturalViolations: number;
    recommendedFixes: string[];
  };
  nextSteps: string[];
}
```

---

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º

**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∏–Ω—è—Ç–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

#### üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

1. **–ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º** - –∫–∞–∂–¥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –ø–æ–ª–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** - —Ä–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–ª—É—á—à–∞—Ç—å –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
3. **–ü—Ä–∏–Ω—Ü–∏–ø DRY** - –∏–∑–±–µ–≥–∞–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
4. **–ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞–¥ —Å–∫–æ—Ä–æ—Å—Ç—å—é** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –Ω–∞–¥ –±—ã—Å—Ç—Ä—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

#### üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UNIVERSAL_AUDIT_SYSTEM

```typescript
// –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
async function runReuseDecisionChecks(
  group: FileGroup,
  config: LevelAuditConfig
): Promise<ReuseDecisionResult> {
  const decisions: ReuseDecision[] = [];

  // 1. –ê–Ω–∞–ª–∏–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
  const duplicateAnalysis = await analyzeDuplication(group.files);

  // 2. –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  const similarComponents = await findSimilarComponents(group.files, config);

  // 3. –û—Ü–µ–Ω–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
  const centralizationOpportunities = await analyzeCentralization(group.files);

  // 4. –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –ø–æ –∫–∞–∂–¥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É
  for (const file of group.files) {
    const decision = await makeComponentDecision(file, {
      duplicates: duplicateAnalysis,
      similar: similarComponents,
      centralization: centralizationOpportunities,
      criteria: config.criteria,
    });

    decisions.push(decision);
  }

  return { decisions, recommendations: generateRecommendations(decisions) };
}
```

#### üîç –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è:**

```typescript
// –£—Ä–æ–≤–µ–Ω—å 1: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã
const LEVEL_1_REUSE_CHECKS = {
  automatedChecks: [
    'findDuplicateConstants',
    'checkSemanticSimilarity',
    'analyzeCentralizationOpportunities',
    'validateConstantUsage',
  ],
  decisionCriteria: {
    reuseThreshold: 0.9, // –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç
    maxSimilarityTolerance: 0.1, // –ù–∏–∑–∫–∞—è —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ –¥—É–±–ª–∏–∫–∞—Ç–∞–º
    centralizationPriority: 'critical', // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏
  },
};

// –£—Ä–æ–≤–µ–Ω—å 2: –£—Ç–∏–ª–∏—Ç—ã
const LEVEL_2_REUSE_CHECKS = {
  automatedChecks: [
    'findSimilarFunctions',
    'analyzeParameterCompatibility',
    'checkPureFunctionReuse',
    'validateUtilityAbstractions',
  ],
  decisionCriteria: {
    reuseThreshold: 0.8,
    maxComplexityIncrease: 2, // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏
    abstractionPriority: 'high',
  },
};

// –£—Ä–æ–≤–µ–Ω—å 3: API —Å–ª–æ–π
const LEVEL_3_REUSE_CHECKS = {
  automatedChecks: [
    'findSimilarProcedures',
    'analyzeMiddlewareReuse',
    'checkSchemaCompatibility',
    'validateRoleBasedReuse',
  ],
  decisionCriteria: {
    reuseThreshold: 0.7,
    securityCompatibility: 'required',
    roleConstraints: 'strict',
  },
};

// –£—Ä–æ–≤–µ–Ω—å 4: –•—É–∫–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const LEVEL_4_REUSE_CHECKS = {
  automatedChecks: [
    'findSimilarStores',
    'analyzeHookComposition',
    'checkStateSharing',
    'validateSelectorReuse',
  ],
  decisionCriteria: {
    reuseThreshold: 0.75,
    stateIsolation: 'required',
    performanceImpact: 'minimal',
  },
};

// –£—Ä–æ–≤–µ–Ω—å 5: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
const LEVEL_5_REUSE_CHECKS = {
  automatedChecks: [
    'findSimilarComponents',
    'analyzePropsCompatibility',
    'checkCompositionOpportunities',
    'validateUIConsistency',
  ],
  decisionCriteria: {
    reuseThreshold: 0.6,
    propsCompatibility: 'high',
    designConsistency: 'required',
  },
};
```

#### üö¶ –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –ø–æ —É—Ä–æ–≤–Ω—è–º

```typescript
interface LevelDecisionContext {
  level: number;
  existingComponents: ComponentAnalysis[];
  requirements: Requirement[];
  qualityStandards: QualityStandard[];
  architecturalConstraints: ArchitecturalConstraint[];
}

async function makeLevelBasedDecision(context: LevelDecisionContext): Promise<LevelDecision> {
  const levelConfig = LEVEL_CONFIGS[context.level];
  const decisions: ComponentDecision[] = [];

  for (const requirement of context.requirements) {
    // 1. –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    const candidates = await findCandidateComponents(
      requirement,
      context.existingComponents,
      levelConfig
    );

    // 2. –û—Ü–µ–Ω–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
    const evaluations = await evaluateCandidates(
      candidates,
      requirement,
      levelConfig.decisionCriteria
    );

    // 3. –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è
    const decision = await selectBestOption(evaluations, levelConfig);
    decisions.push(decision);
  }

  return {
    levelNumber: context.level,
    decisions,
    overallStrategy: determineOverallStrategy(decisions),
    architecturalImpact: assessArchitecturalImpact(decisions),
    recommendations: generateLevelRecommendations(decisions),
  };
}
```

#### üìã –ß–µ–∫-–ª–∏—Å—Ç—ã –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ—à–µ–Ω–∏–π

**–û–±—â–∏–π —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:**

- [ ] **–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω** - –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [ ] **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
- [ ] **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞** - —Ä–µ—à–µ–Ω–∏–µ –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- [ ] **DRY —Å–æ–±–ª—é–¥–µ–Ω** - –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- [ ] **–ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ** - —Ä–µ—à–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞

**–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —á–µ–∫-–ª–∏—Å—Ç—ã –ø–æ —É—Ä–æ–≤–Ω—è–º:**

**–£—Ä–æ–≤–µ–Ω—å 1 (–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã/–¢–∏–ø—ã):**

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- [ ] –ò—Å–∫–ª—é—á–µ–Ω—ã —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
- [ ] –¢–∏–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è
- [ ] –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–£—Ä–æ–≤–µ–Ω—å 2 (–£—Ç–∏–ª–∏—Ç—ã):**

- [ ] –§—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è —á–∏—Å—Ç—ã–º–∏
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- [ ] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- [ ] –ù–µ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

**–£—Ä–æ–≤–µ–Ω—å 3 (API):**

- [ ] –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Ä—É—à–µ–Ω–∞
- [ ] –†–æ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
- [ ] –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- [ ] Middleware –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–£—Ä–æ–≤–µ–Ω—å 4 (–•—É–∫–∏/–°–æ—Å—Ç–æ—è–Ω–∏–µ):**

- [ ] –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ
- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–µ–Ω–∞

**–£—Ä–æ–≤–µ–Ω—å 5 (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã):**

- [ ] –ü—Ä–æ–ø—Å—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- [ ] –î–∏–∑–∞–π–Ω –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–µ–Ω
- [ ] –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞
- [ ] –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

#### üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏–π

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**

- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** = (–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã / –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) √ó 100%
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** = (–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ / –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫) √ó 100%
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** = (–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ / –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π) √ó 100%

**–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**

- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞** - —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –æ—Ç 1 –¥–æ 5
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –æ—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∏ –ø—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**

- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: ‚â•70%
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è: ‚â§5%
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: ‚â•95%
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å: ‚â•4/5
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: ‚â•80%

---

## üéØ –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∞—É–¥–∏—Ç–∞

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–¥—Ö–æ–¥–∞

```typescript
interface AuditContext {
  projectSize: number;
  criticality: 'life-critical' | 'business-critical' | 'standard';
  budget: 'unlimited' | 'high' | 'medium' | 'low';
  timeline: 'immediate' | 'urgent' | 'normal' | 'flexible';
  expertiseAvailable: boolean;
}

function selectOptimalAuditStrategy(context: AuditContext): AuditStrategy {
  // –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã: –º–∞–∫—Å–∏–º—É–º –∫–∞—á–µ—Å—Ç–≤–∞
  if (context.criticality === 'life-critical') {
    return {
      automated: 20, // –ë—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–∏–Ω–∏–Ω–≥
      aiAssisted: 40, // –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑
      expertReview: 40, // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
      target: '99.9% —Ç–æ—á–Ω–æ—Å—Ç—å',
    };
  }

  // –ë–æ–ª—å—à–∏–µ –ø—Ä–æ–µ–∫—Ç—ã: –º–∞–∫—Å–∏–º—É–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  if (context.projectSize > 200) {
    return {
      automated: 60, // –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞
      aiAssisted: 35, // –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞
      expertReview: 5, // –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
      target: '85-90% —Ç–æ—á–Ω–æ—Å—Ç—å',
    };
  }

  // –ú–∞–ª—ã–µ –ø—Ä–æ–µ–∫—Ç—ã: –º–æ–∂–µ–º –ø–æ–∑–≤–æ–ª–∏—Ç—å –±–æ–ª—å—à–µ –∫–∞—á–µ—Å—Ç–≤–∞
  if (context.projectSize <= 20 && context.budget !== 'low') {
    return {
      automated: 10, // –ú–∏–Ω–∏–º—É–º
      aiAssisted: 30, // –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑
      expertReview: 60, // –ú–∞–∫—Å–∏–º—É–º —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã
      target: '95-98% —Ç–æ—á–Ω–æ—Å—Ç—å',
    };
  }

  // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: –±–∞–ª–∞–Ω—Å –≤—Å–µ–≥–æ
  return {
    automated: 40, // –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
    aiAssisted: 50, // –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞
    expertReview: 10, // –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
    target: '90-95% —Ç–æ—á–Ω–æ—Å—Ç—å',
  };
}
```

### –£—Ä–æ–≤–µ–Ω—å 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Ä–æ–±–æ—Ç—ã)

```typescript
interface AutomatedLayer {
  purpose: '–ë—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–∏–Ω–∏–Ω–≥ –æ—á–µ–≤–∏–¥–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º';
  speed: '—Å–µ–∫—É–Ω–¥—ã –Ω–∞ —Ñ–∞–π–ª';
  accuracy: '–≤—ã—Å–æ–∫–∞—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º (90-100%)';
  coverage: [
    '—Ç–æ—á–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–¥–∞',
    '–Ω–∞—Ä—É—à–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤',
    '—Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤',
    '—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏',
    '–±–∞–∑–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∫–æ–¥–∞',
  ];
  cost: '–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ';
  limitations: [
    '–Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É',
    '–Ω–µ –≤–∏–¥–∏—Ç –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç',
    '–º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏',
  ];
}

async function runAutomatedLayer(files: string[]): Promise<AutomatedResult> {
  return {
    exactDuplicates: await findExactDuplicates(files),
    importViolations: await checkImportViolations(files),
    structuralIssues: await checkStructuralIssues(files),
    confidence: 0.95, // –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    timeSpent: '30 —Å–µ–∫—É–Ω–¥ - 2 –º–∏–Ω—É—Ç—ã',
  };
}
```

### –£—Ä–æ–≤–µ–Ω—å 2: AI-assisted –ø—Ä–æ–≤–µ—Ä–∫–∏ (—è —á–µ—Ä–µ–∑ —á—Ç–µ–Ω–∏–µ)

```typescript
interface AIAssistedLayer {
  purpose: '–ì–ª—É–±–æ–∫–∏–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑';
  speed: '2-5 –º–∏–Ω—É—Ç –Ω–∞ —Ñ–∞–π–ª';
  accuracy: '–≤—ã—Å–æ–∫–∞—è –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (80-95%)';
  coverage: [
    '—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã',
    '–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è',
    '–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å',
    '–∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã',
    '–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏',
    '–∫–∞—á–µ—Å—Ç–≤–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π',
  ];
  cost: '—Ç–æ–∫–µ–Ω—ã –º–æ–¥–µ–ª–∏ (~$0.01-0.10 –∑–∞ —Ñ–∞–π–ª)';
  advantages: [
    '–ø–æ–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞',
    '–≤–∏–¥–∏—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏',
    '–∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫–µ –¥–æ–º–µ–Ω–∞',
    '–º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏—è',
  ];
}

async function runAIAssistedLayer(
  files: string[],
  context: ProjectContext
): Promise<AIAssistedResult> {
  const results = [];

  for (const file of files) {
    // 1. –ß–∏—Ç–∞—é —Ñ–∞–π–ª —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    const fileContent = await readFile(file);
    const projectContext = await buildProjectContext(file);
    const relatedFiles = await findRelatedFiles(file);

    // 2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    const analysis = await analyzeFileWithContext(fileContent, {
      projectStructure: projectContext,
      relatedCode: relatedFiles,
      businessDomain: context.domain,
      architecturalLevel: determineLevel(file),
    });

    // 3. –ü–æ–∏—Å–∫ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
    const semanticIssues = await findSemanticIssues(analysis);
    const architecturalIssues = await findArchitecturalIssues(analysis);
    const redundancyIssues = await findRedundancyIssues(analysis, relatedFiles);

    results.push({
      file,
      semanticIssues,
      architecturalIssues,
      redundancyIssues,
      confidence: calculateConfidence(analysis),
      reasoning: generateReasoning(analysis),
    });
  }

  return {
    results,
    overallConfidence: 0.87, // –í—ã—Å–æ–∫–∞—è –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
    timeSpent: `${files.length * 3} –º–∏–Ω—É—Ç`,
    contextCoverage: '–ø–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç',
  };
}

// –ö–ª—é—á–µ–≤–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
async function analyzeFileWithContext(
  content: string,
  context: AnalysisContext
): Promise<DetailedAnalysis> {
  return {
    // –Ø –ø–æ–Ω–∏–º–∞—é –Ω–µ —Ç–æ–ª—å–∫–æ –∫–æ–¥, –Ω–æ –∏ –µ–≥–æ –º–µ—Å—Ç–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
    semanticPurpose: await determineSemanticPurpose(content, context),
    architecturalRole: await analyzeArchitecturalRole(content, context),
    businessLogic: await extractBusinessLogic(content, context),
    redundancyRisks: await analyzeRedundancyRisks(content, context),
    qualityIssues: await findQualityIssues(content, context),

    // –ú–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è
    centralizationOpportunities: await findCentralizationOpportunities(content, context),
    refactoringOpportunities: await findRefactoringOpportunities(content, context),

    // –û–±—ä—è—Å–Ω—è—é —Ä–µ—à–µ–Ω–∏—è
    reasoning: generateDetailedReasoning(content, context),
  };
}
```

### –£—Ä–æ–≤–µ–Ω—å 3: –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª—é–¥–∏)

```typescript
interface ExpertLayer {
  purpose: '–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π';
  speed: '15-30 –º–∏–Ω—É—Ç –Ω–∞ —Ñ–∞–π–ª';
  accuracy: '–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è (95-100%)';
  coverage: [
    '—Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è',
    '–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—è–∑–≤–∏–º–æ—Å—Ç–∏',
    '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è',
    '—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ –±–∏–∑–Ω–µ—Å-–¥–æ–º–µ–Ω–∞',
    '—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∏–Ω–¥—É—Å—Ç—Ä–∏–∏',
  ];
  cost: '–¥–æ—Ä–æ–≥–æ ($20-50 –∑–∞ —Ñ–∞–π–ª)';
  when_required: [
    '–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
    '–Ω–æ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã',
    '—Å–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞',
    '—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–≤',
    '–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è AI',
  ];
}

async function runExpertLayer(
  criticalFiles: string[],
  aiResults: AIAssistedResult[]
): Promise<ExpertResult> {
  return {
    // –≠–∫—Å–ø–µ—Ä—Ç —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–∞–º–æ–º –≤–∞–∂–Ω–æ–º
    strategicDecisions: await reviewStrategicDecisions(criticalFiles),
    securityValidation: await validateSecurity(criticalFiles),
    performanceAnalysis: await analyzePerformance(criticalFiles),

    // –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è AI —Ä–µ—à–µ–Ω–∏–π
    aiValidation: await validateAIRecommendations(aiResults),
    finalRecommendations: await generateFinalRecommendations(criticalFiles),

    confidence: 0.98, // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è
    timeSpent: `${criticalFiles.length * 20} –º–∏–Ω—É—Ç`,
  };
}
```

---

## ÔøΩ –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø —á–µ—Å—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### ‚úÖ –ß—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –†–ï–ê–õ–¨–ù–û –º–æ–∂–µ—Ç —Ç–µ–ø–µ—Ä—å:

**1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–£—Ä–æ–≤–µ–Ω—å 1) - 90-100% —Ç–æ—á–Ω–æ—Å—Ç—å:**

- ‚úÖ –¢–æ—á–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–¥–∞ (100% —Ç–æ—á–Ω–æ—Å—Ç—å)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è (95% —Ç–æ—á–Ω–æ—Å—Ç—å)
- ‚úÖ –ò–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (98% —Ç–æ—á–Ω–æ—Å—Ç—å)
- ‚úÖ –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (100% —Ç–æ—á–Ω–æ—Å—Ç—å)

**2. AI-assisted –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ —á—Ç–µ–Ω–∏–µ (–£—Ä–æ–≤–µ–Ω—å 2) - 80-95% —Ç–æ—á–Ω–æ—Å—Ç—å:**

- üß† –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (85% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å —á—Ç–µ–Ω–∏–µ–º –≤—Å–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã (80% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üß† –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å —Å –¥–æ–º–µ–Ω–Ω—ã–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º (75% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üß† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –∞–Ω–∞–ª–∏–∑–æ–º –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (85% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üß† –ö–∞—á–µ—Å—Ç–≤–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (80% —Ç–æ—á–Ω–æ—Å—Ç—å)

**3. –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (–£—Ä–æ–≤–µ–Ω—å 3) - 95-100% —Ç–æ—á–Ω–æ—Å—Ç—å:**

- üë®‚Äçüíº –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (100% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üë®‚Äçüíº –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (98% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üë®‚Äçüíº –î–æ–º–µ–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ (100% —Ç–æ—á–Ω–æ—Å—Ç—å)
- üë®‚Äçüíº –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è AI —Ä–µ—à–µ–Ω–∏–π (95% —Ç–æ—á–Ω–æ—Å—Ç—å)

### üéØ –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ 100% –ø–æ–∫—Ä—ã—Ç–∏–µ

```typescript
const THEORETICAL_COVERAGE = {
  structural: {
    method: 'automated',
    coverage: '100%',
    accuracy: '95-100%',
  },
  semantic: {
    method: 'ai-assisted',
    coverage: '100%',
    accuracy: '80-95%',
  },
  architectural: {
    method: 'ai-assisted + expert',
    coverage: '100%',
    accuracy: '90-100%',
  },
  strategic: {
    method: 'expert',
    coverage: '100%',
    accuracy: '95-100%',
  },
  overall: {
    coverage: '100%', // –í—Å–µ –∞—Å–ø–µ–∫—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã
    accuracy: '85-100%', // –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    confidence: '–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è',
  },
};
```

### üîß –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 100%

**1. AI —á–∏—Ç–∞–µ—Ç –í–°–Æ –∫–æ–¥–æ–≤—É—é –±–∞–∑—É:**

- –ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- –ü–æ–Ω–∏–º–∞–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –í–∏–¥–∏—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ü–æ–Ω–∏–º–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç

**2. –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**

- –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞ –æ—Ç—Å–µ–∏–≤–∞–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- AI –Ω–∞—Ö–æ–¥–∏—Ç —Å–ª–æ–∂–Ω—ã–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- –≠–∫—Å–ø–µ—Ä—Ç—ã —Ä–µ—à–∞—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**3. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**

- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã: –±–æ–ª—å—à–µ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã: –±–æ–ª—å—à–µ AI
- –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏: –±–æ–ª—å—à–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∏

### ‚ùì –ß—Ç–æ –æ—Å—Ç–∞–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º (–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–æ–π):

- **–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è** - —ç–∫—Å–ø–µ—Ä—Ç
- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞ —É–∑–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤** - —ç–∫—Å–ø–µ—Ä—Ç + AI —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- **–ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ –±–∏–∑–Ω–µ—Å-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - —ç–∫—Å–ø–µ—Ä—Ç
- **–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã** - —ç–∫—Å–ø–µ—Ä—Ç

### üìä –ß–µ—Å—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º:

```typescript
const STRATEGY_METRICS = {
  automated: {
    coverage: '70%',
    accuracy: '95%',
    time: '–º–∏–Ω—É—Ç—ã',
    cost: '$0.01',
    suitable: '–ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, CI/CD',
  },

  aiAssisted: {
    coverage: '90%',
    accuracy: '87%',
    time: '—á–∞—Å—ã',
    cost: '$0.10-1.00',
    suitable: '–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–æ–≤',
  },

  expert: {
    coverage: '100%',
    accuracy: '98%',
    time: '–¥–Ω–∏',
    cost: '$50-500',
    suitable: '–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
  },

  hybrid: {
    coverage: '100%',
    accuracy: '90-95%',
    time: '–Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤',
    cost: '$1-50',
    suitable: '–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä',
  },
};
```

### üéØ –ß–ï–°–¢–ù–´–ï –ª–∏–º–∏—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞:

```typescript
// –†–µ–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ
const HONEST_AI_LIMITS = {
  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
  maxEffectiveContext: {
    totalLines: 3000, // –í–µ—Ä—Ö–Ω–∏–π –ª–∏–º–∏—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
    complexityPoints: 100, // –°—É–º–º–∞—Ä–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø—ã
    filesCount: 12, // –ú–∞–∫—Å–∏–º—É–º —Ñ–∞–π–ª–æ–≤ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
    dependenciesCount: 50, // –ú–∞–∫—Å–∏–º—É–º —Å–≤—è–∑–µ–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
  },

  // –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–≤–µ—Ä–æ–∫
  accuracyRates: {
    structuralViolations: 0.95, // –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    exactDuplicates: 1.0, // –ê–±—Å–æ–ª—é—Ç–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    importViolations: 0.98, // –ü–æ—á—Ç–∏ –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    semanticSimilarity: 0.75, // –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å
    businessLogicRedundancy: 0.55, // –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å - –Ω—É–∂–Ω–∞ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
    architecturalViolations: 0.65, // –°—Ä–µ–¥–Ω–µ-–Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    performanceIssues: 0.45, // –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
  },

  // –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ (—á–µ—Å—Ç–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏)
  analysisTime: {
    smallGroup: '2-5 –º–∏–Ω—É—Ç', // 1-5 —Ñ–∞–π–ª–æ–≤
    mediumGroup: '5-10 –º–∏–Ω—É—Ç', // 6-12 —Ñ–∞–π–ª–æ–≤
    largeGroup: '10-20 –º–∏–Ω—É—Ç', // 13+ —Ñ–∞–π–ª–æ–≤ (—Å —Ä–∞–∑–±–∏–≤–∫–æ–π)
  },

  // –¢–∏–ø—ã –æ—à–∏–±–æ–∫
  commonErrors: {
    falsePositives: '15-25%', // –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
    missedViolations: '10-20%', // –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è
    contextMisunderstanding: '20-30%', // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  },
};
```

### üîß –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:

**1. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**

```typescript
interface CompensationStrategy {
  // –£—Ä–æ–≤–µ–Ω—å 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
  automated: {
    confidence: 'high';
    coverage: '80-90%';
    types: ['structural', 'syntactic', 'import-based'];
  };

  // –£—Ä–æ–≤–µ–Ω—å 2: –¶–µ–ª–µ–≤–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
  targeted: {
    confidence: 'medium';
    coverage: '50-70%';
    types: ['semantic', 'architectural', 'business-logic'];
    requiresHuman: true;
  };

  // –£—Ä–æ–≤–µ–Ω—å 3: –≠–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ —Ä–µ–≤—å—é
  expert: {
    confidence: 'high';
    coverage: '90-95%';
    types: ['strategic', 'security', 'performance'];
    requiresHuman: true;
    timing: 'critical-decisions-only';
  };
}
```

**2. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏:**

```typescript
// –ü–æ—Ä–æ–≥–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –∫ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ —É—Ä–æ–≤–Ω—è
const ADAPTIVE_THRESHOLDS = {
  1: {
    // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã - –∫—Ä–∏—Ç–∏—á–Ω–æ
    redundancyThreshold: 0.9, // –û—á–µ–Ω—å —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥
    manualVerificationRate: 0.3, // 30% –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
    falsePositiveTolerance: 0.05, // –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å
  },
  2: {
    // –£—Ç–∏–ª–∏—Ç—ã - –≤–∞–∂–Ω–æ
    redundancyThreshold: 0.8,
    manualVerificationRate: 0.2,
    falsePositiveTolerance: 0.1,
  },
  3: {
    // API - –∫—Ä–∏—Ç–∏—á–Ω–æ
    redundancyThreshold: 0.85,
    manualVerificationRate: 0.4, // –ú–Ω–æ–≥–æ —Ä—É—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    falsePositiveTolerance: 0.05,
  },
  4: {
    // –•—É–∫–∏ - –≤–∞–∂–Ω–æ
    redundancyThreshold: 0.75,
    manualVerificationRate: 0.25,
    falsePositiveTolerance: 0.15,
  },
  5: {
    // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã - —Å–ª–æ–∂–Ω–æ
    redundancyThreshold: 0.7,
    manualVerificationRate: 0.5, // –ü–æ–ª–æ–≤–∏–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
    falsePositiveTolerance: 0.2,
  },
  6: {
    // –ö–æ–Ω—Ñ–∏–≥ - –∫—Ä–∏—Ç–∏—á–Ω–æ
    redundancyThreshold: 0.95,
    manualVerificationRate: 0.6, // –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
    falsePositiveTolerance: 0.02,
  },
};
```

**3. –°–∏—Å—Ç–µ–º–∞ –∫—Ä–∞—Å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤:**

```typescript
interface RedFlagSystem {
  // –ü–∞—Ç—Ç–µ—Ä–Ω—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã
  criticalPatterns: [
    'security-related-code',
    'performance-critical-paths',
    'complex-business-logic',
    'architectural-decisions',
    'cross-level-dependencies',
  ];

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è
  escalationTriggers: {
    highComplexity: 'complexity > 50';
    manyDependencies: 'dependencies > 20';
    criticalFiles: 'contains core/auth/security patterns';
    crossLevelViolations: 'imports from wrong levels';
    businessLogic: 'contains complex calculations/rules';
  };
}
```

### üìä –ú–µ—Ç—Ä–∏–∫–∏ —á–µ—Å—Ç–Ω–æ—Å—Ç–∏:

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:**

- **False Positive Rate:** % –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- **False Negative Rate:** % –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π
- **Context Accuracy:** % –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω—è—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **Expert Agreement:** % —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π —Å —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–º —Ä–µ–≤—å—é
- **Time to Resolution:** –≤—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—á–µ—Å—Ç–Ω—ã–µ):**

- False Positive Rate: <20%
- False Negative Rate: <15%
- Context Accuracy: >70%
- Expert Agreement: >75%
- Time to Resolution: <2 hours average

### üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow (—á–µ—Å—Ç–Ω—ã–π):

```typescript
const HONEST_WORKFLOW = {
  // –§–∞–∑–∞ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–Ω–∏–Ω–≥ (60% –≤—Ä–µ–º–µ–Ω–∏)
  automated: {
    purpose: '–ù–∞–π—Ç–∏ –æ—á–µ–≤–∏–¥–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è',
    confidence: 'high',
    coverage: 'structural + syntactic',
    time: '60% –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏',
    output: '—Å–ø–∏—Å–æ–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã',
  },

  // –§–∞–∑–∞ 2: –¶–µ–ª–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (30% –≤—Ä–µ–º–µ–Ω–∏)
  targeted: {
    purpose: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏',
    confidence: 'medium',
    coverage: 'semantic + architectural',
    time: '30% –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏',
    output: '–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è',
  },

  // –§–∞–∑–∞ 3: –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (10% –≤—Ä–µ–º–µ–Ω–∏)
  expert: {
    purpose: '–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π',
    confidence: 'high',
    coverage: 'strategic + business-critical',
    time: '10% –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏',
    output: '–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏',
  },
};
```
