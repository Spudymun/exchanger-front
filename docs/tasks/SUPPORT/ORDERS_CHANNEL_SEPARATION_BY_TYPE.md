# üìã –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–∫–∞–∑–∞—Ö –ø–æ —Ç–∏–ø–∞–º

**–î–∞—Ç–∞**: 2025-10-10  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û  
**–ó–∞–¥–∞—á–∞**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Orders Group –ø–æ —Ç–∏–ø–∞–º –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ Telegram –∫–∞–Ω–∞–ª—ã

---

## üéØ –¶–µ–ª—å

–†–∞–∑–¥–µ–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö –ø–æ —Ç–∏–ø–∞–º —Å–æ–±—ã—Ç–∏–π –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ Telegram –∫–∞–Ω–∞–ª—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤:

- **–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã** ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª
- **–û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã** ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª
- **–û–ø–ª–∞—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã** ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª

---

## üìä –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –§–ê–ö–¢–ò–ß–ï–°–ö–ò —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –∫–æ–¥–µ):

| –¢–∏–ø           | –ó–Ω–∞—á–µ–Ω–∏–µ                    | –ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è           | –§–∞–π–ª                                              |
| ------------- | --------------------------- | ---------------------------- | ------------------------------------------------- |
| –ù–æ–≤—ã–π –∑–∞–∫–∞–∑   | `new_order` –∏–ª–∏ `undefined` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–ª –∑–∞–∫–∞–∑    | `apps/web/src/server/trpc/routers/exchange.ts`    |
| –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ | `order_cancelled`           | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –∑–∞–∫–∞–∑   | `apps/web/src/server/trpc/routers/user/orders.ts` |
| –û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ | `order_paid`                | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–û–ø–ª–∞—Ç–∏–ª" | `apps/web/src/server/trpc/routers/user/orders.ts` |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç ‚Üí –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–∏–ø ‚Üí –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –∫–∞–Ω–∞–ª
                                              ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                        ‚îÇ                        ‚îÇ
                    ‚ñº                        ‚ñº                        ‚ñº
         –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª          –û–±—â–∏–π –∫–∞–Ω–∞–ª            Broadcast
         (TELEGRAM_*_CHAT_ID)    (TELEGRAM_ORDERS_CHAT_ID)  (–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º)
                    ‚îÇ                        ‚îÇ                        ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                        ‚îÇ
                                        ‚ñº
                            –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
```

### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã):

1. **–ü–†–ò–û–†–ò–¢–ï–¢ 1**: –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è —Ç–∏–ø–∞
   - `new_order` ‚Üí `TELEGRAM_NEW_ORDERS_CHAT_ID`
   - `order_cancelled` ‚Üí `TELEGRAM_CANCELLED_ORDERS_CHAT_ID`
   - `order_paid` ‚Üí `TELEGRAM_PAID_ORDERS_CHAT_ID`

2. **–ü–†–ò–û–†–ò–¢–ï–¢ 2**: –û–±—â–∏–π –∫–∞–Ω–∞–ª –∑–∞–∫–∞–∑–æ–≤ (fallback)
   - `TELEGRAM_ORDERS_CHAT_ID` (–µ—Å–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

3. **–ü–†–ò–û–†–ò–¢–ï–¢ 3**: Broadcast –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º (fallback)
   - –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –§—É–Ω–∫—Ü–∏—è —Ä–æ—É—Ç–∏–Ω–≥–∞

```typescript
/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID –ø–æ —Ç–∏–ø—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
 */
function getChatIdForNotificationType(
  notificationType?: 'new_order' | 'order_cancelled' | 'order_paid'
): string | null {
  const type = notificationType || 'new_order';

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª
  switch (type) {
    case 'new_order':
      return process.env.TELEGRAM_NEW_ORDERS_CHAT_ID || process.env.TELEGRAM_ORDERS_CHAT_ID || null;
    case 'order_cancelled':
      return (
        process.env.TELEGRAM_CANCELLED_ORDERS_CHAT_ID || process.env.TELEGRAM_ORDERS_CHAT_ID || null
      );
    case 'order_paid':
      return (
        process.env.TELEGRAM_PAID_ORDERS_CHAT_ID || process.env.TELEGRAM_ORDERS_CHAT_ID || null
      );
  }
}
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

```bash
# === –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–∞—Ö ===

# –í–ê–†–ò–ê–ù–¢ 1: –û–±—â–∏–π –∫–∞–Ω–∞–ª –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ (fallback)
TELEGRAM_ORDERS_CHAT_ID=-1003037178274

# –í–ê–†–ò–ê–ù–¢ 2: –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ø–æ —Ç–∏–ø–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

# –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã
TELEGRAM_NEW_ORDERS_CHAT_ID=-1001234567890

# –û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
TELEGRAM_CANCELLED_ORDERS_CHAT_ID=-1001234567891

# –û–ø–ª–∞—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
TELEGRAM_PAID_ORDERS_CHAT_ID=-1001234567892
```

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –¢–æ–ª—å–∫–æ –æ–±—â–∏–π –∫–∞–Ω–∞–ª (—Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

```bash
TELEGRAM_ORDERS_CHAT_ID=-1003037178274
# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚Üí `TELEGRAM_ORDERS_CHAT_ID`

---

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤

```bash
TELEGRAM_NEW_ORDERS_CHAT_ID=-1001111111111
TELEGRAM_CANCELLED_ORDERS_CHAT_ID=-1002222222222
TELEGRAM_PAID_ORDERS_CHAT_ID=-1003333333333
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:

- –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã ‚Üí `-1001111111111`
- –û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ ‚Üí `-1002222222222`
- –û–ø–ª–∞—á–µ–Ω–Ω—ã–µ ‚Üí `-1003333333333`

---

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ + fallback

```bash
TELEGRAM_ORDERS_CHAT_ID=-1003037178274  # –û–±—â–∏–π –∫–∞–Ω–∞–ª
TELEGRAM_NEW_ORDERS_CHAT_ID=-1001111111111  # –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –æ—Ç–¥–µ–ª—å–Ω–æ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:

- –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã ‚Üí `-1001111111111` (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π)
- –û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ ‚Üí `-1003037178274` (fallback –Ω–∞ –æ–±—â–∏–π)
- –û–ø–ª–∞—á–µ–Ω–Ω—ã–µ ‚Üí `-1003037178274` (fallback –Ω–∞ –æ–±—â–∏–π)

---

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –¢–æ–ª—å–∫–æ broadcast (–±–µ–∑ –∫–∞–Ω–∞–ª–æ–≤)

```bash
# –í—Å–µ TELEGRAM_*_CHAT_ID –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí broadcast –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º (—Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

---

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞ (–Ω–æ–≤–∞—è)

**–§–∞–π–ª**: `apps/telegram-bot/pages/api/notify-operators.ts`

```typescript
function getChatIdForNotificationType(
  notificationType?: 'new_order' | 'order_cancelled' | 'order_paid'
): string | null {
  const type = notificationType || 'new_order';
  let specificChatId: string | undefined;

  switch (type) {
    case 'new_order':
      specificChatId = process.env.TELEGRAM_NEW_ORDERS_CHAT_ID;
      break;
    case 'order_cancelled':
      specificChatId = process.env.TELEGRAM_CANCELLED_ORDERS_CHAT_ID;
      break;
    case 'order_paid':
      specificChatId = process.env.TELEGRAM_PAID_ORDERS_CHAT_ID;
      break;
  }

  if (specificChatId) return specificChatId;

  const generalOrdersChatId = process.env.TELEGRAM_ORDERS_CHAT_ID;
  if (generalOrdersChatId) return generalOrdersChatId;

  return null; // Broadcast
}
```

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã `sendOperatorNotifications()`

**–ë—ã–ª–æ**:

```typescript
async function sendOperatorNotifications(
  message: string,
  keyboard: InlineKeyboard,
  orderId: string
);
```

**–°—Ç–∞–ª–æ**:

```typescript
async function sendOperatorNotifications(
  message: string,
  keyboard: InlineKeyboard,
  orderId: string,
  notificationType?: 'new_order' | 'order_cancelled' | 'order_paid' // üÜï
);
```

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞

**–ë—ã–ª–æ**:

```typescript
const ordersChatId = process.env.TELEGRAM_ORDERS_CHAT_ID;
if (ordersChatId) {
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ–±—â–∏–π –∫–∞–Ω–∞–ª
}
```

**–°—Ç–∞–ª–æ**:

```typescript
const chatIdByType = getChatIdForNotificationType(notificationType);
if (chatIdByType) {
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∏–ª–∏ –æ–±—â–∏–π –∫–∞–Ω–∞–ª
}
```

### 4. –ü–µ—Ä–µ–¥–∞—á–∞ —Ç–∏–ø–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ

**–§–∞–π–ª**: `apps/telegram-bot/pages/api/notify-operators.ts`

```typescript
const result = await sendOperatorNotifications(
  message,
  keyboard,
  payload.order.id,
  payload.notificationType // üÜï –ü–µ—Ä–µ–¥–∞—ë–º —Ç–∏–ø
);
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `turbo.json`

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤–æ –≤—Å–µ tasks (`build`, `lint`, `lint:strict`, `check-types`):

```json
"TELEGRAM_NEW_ORDERS_CHAT_ID",
"TELEGRAM_CANCELLED_ORDERS_CHAT_ID",
"TELEGRAM_PAID_ORDERS_CHAT_ID"
```

---

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

#### 1. –†–æ—É—Ç–∏–Ω–≥ –ø–æ —Ç–∏–ø—É

```json
{
  "level": "info",
  "event": "TELEGRAM_NOTIFICATION_TYPE_ROUTE",
  "notificationType": "new_order",
  "chatId": "-1001234567890",
  "orderId": "abc-123",
  "messageLength": 245
}
```

#### 2. –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

```json
{
  "level": "info",
  "message": "Notification sent to type-specific channel",
  "orderId": "abc-123",
  "notificationType": "new_order",
  "chatId": "-1001234567890"
}
```

#### 3. Fallback –Ω–∞ broadcast

```json
{
  "level": "info",
  "event": "TELEGRAM_ORDERS_FALLBACK_BROADCAST",
  "reason": "Type-specific channel not configured",
  "notificationType": "order_paid",
  "orderId": "abc-123"
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Å—Ç 1: –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ ‚Üí —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```bash
TELEGRAM_NEW_ORDERS_CHAT_ID=-1001111111111
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –∫–∞–Ω–∞–ª `-1001111111111`
- ‚úÖ –õ–æ–≥: `TELEGRAM_NOTIFICATION_TYPE_ROUTE` —Å `notificationType: "new_order"`

---

#### –¢–µ—Å—Ç 2: –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ ‚Üí —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```bash
TELEGRAM_CANCELLED_ORDERS_CHAT_ID=-1002222222222
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –∫–∞–Ω–∞–ª `-1002222222222`
- ‚úÖ –õ–æ–≥: `TELEGRAM_NOTIFICATION_TYPE_ROUTE` —Å `notificationType: "order_cancelled"`

---

#### –¢–µ—Å—Ç 3: –û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ ‚Üí —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```bash
TELEGRAM_PAID_ORDERS_CHAT_ID=-1003333333333
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù–∞–∂–∞—Ç—å "–û–ø–ª–∞—Ç–∏–ª" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–∫–∞–∑–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –∫–∞–Ω–∞–ª `-1003333333333`
- ‚úÖ –õ–æ–≥: `TELEGRAM_NOTIFICATION_TYPE_ROUTE` —Å `notificationType: "order_paid"`

---

#### –¢–µ—Å—Ç 4: Fallback –Ω–∞ –æ–±—â–∏–π –∫–∞–Ω–∞–ª

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```bash
TELEGRAM_ORDERS_CHAT_ID=-1003037178274
# –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å, –æ—Ç–º–µ–Ω–∏—Ç—å, –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

- ‚úÖ –í—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ `-1003037178274`
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç fallback

---

#### –¢–µ—Å—Ç 5: Fallback –Ω–∞ broadcast

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:

```bash
# –í—Å–µ TELEGRAM_*_CHAT_ID –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
```

**–î–µ–π—Å—Ç–≤–∏–µ**: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º —á–µ—Ä–µ–∑ broadcast
- ‚úÖ –õ–æ–≥: `TELEGRAM_ORDERS_FALLBACK_BROADCAST` —Å `reason: "Type-specific channel not configured"`

---

## üîí –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ì–∞—Ä–∞–Ω—Ç–∏–∏

1. ‚úÖ **–ë–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**: –†–∞–±–æ—Ç–∞–µ—Ç broadcast (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
2. ‚úÖ **–° TELEGRAM_ORDERS_CHAT_ID**: –†–∞–±–æ—Ç–∞–µ—Ç –æ–±—â–∏–π –∫–∞–Ω–∞–ª (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
3. ‚úÖ **–°–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏**: –ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º
4. ‚úÖ **–ß–∞—Å—Ç–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ ‚Üí –æ–±—â–∏–π ‚Üí broadcast (graceful degradation)

### –°—Ü–µ–Ω–∞—Ä–∏–π –æ—Ç–∫–∞—Ç–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é:

```bash
# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
# TELEGRAM_NEW_ORDERS_CHAT_ID=-1001111111111
# TELEGRAM_CANCELLED_ORDERS_CHAT_ID=-1002222222222
# TELEGRAM_PAID_ORDERS_CHAT_ID=-1003333333333

# –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –æ–±—â–∏–π –∫–∞–Ω–∞–ª
TELEGRAM_ORDERS_CHAT_ID=-1003037178274
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–Ω–æ–≤–∞ –∏–¥—É—Ç –≤ –æ–¥–∏–Ω –∫–∞–Ω–∞–ª.

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª                                                      | –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ                                                                                                                    |
| --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `apps/telegram-bot/pages/api/notify-operators.ts`         | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getChatIdForNotificationType()`, –∏–∑–º–µ–Ω–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `sendOperatorNotifications()`, –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ |
| `apps/telegram-bot/.env`                                  | –î–æ–±–∞–≤–ª–µ–Ω—ã 3 –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏                                                                                    |
| `turbo.json`                                              | –î–æ–±–∞–≤–ª–µ–Ω—ã 3 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ –≤—Å–µ tasks                                                                                             |
| `docs/tasks/SUPPORT/ORDERS_CHANNEL_SEPARATION_BY_TYPE.md` | –ù–æ–≤—ã–π —Ñ–∞–π–ª (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)                                                                                                       |

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [x] –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö 3 —Ç–∏–ø–æ–≤
- [x] Fallback –Ω–∞ –æ–±—â–∏–π –∫–∞–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Fallback –Ω–∞ broadcast —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [x] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ turbo.json

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞—Ç—å 3 Telegram –≥—Ä—É–ø–ø—ã**:
   - "–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã ExchangeGO"
   - "–û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã ExchangeGO"
   - "–û–ø–ª–∞—á–µ–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã ExchangeGO"

2. **–î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—ã** –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

3. **–ü–æ–ª—É—á–∏—Ç—å Chat ID** –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã (—Å–º. `HOW_TO_GET_TELEGRAM_GROUP_CHAT_ID.md`)

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env`** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ Chat ID

5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞**: `npm run dev`

6. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –ø–æ –ø–ª–∞–Ω—É –≤—ã—à–µ

---

**–ì–æ—Ç–æ–≤–æ –∫ production –¥–µ–ø–ª–æ—é!** üéâ
