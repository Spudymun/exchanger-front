# üèóÔ∏è –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–æ–ª–µ–π –≤ OrderStatus ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

> **–†–û–õ–¨:** Agent-coder (—Ñ–æ–∫—É—Å –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã)  
> **–ó–ê–î–ê–ß–ê:** –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 3 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–æ–ª–µ–π: recipient card data, blockchain network, email  
> **–ü–û–î–•–û–î:** –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞, —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º  
> **–°–¢–ê–¢–£–°:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–û** - –≤—Å–µ –ø–æ–ª—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üìä –°–í–û–î–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ü–û–õ–Ø** (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)

1. **Email**: `spudymun@gmail.com` - ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ö–∞—Ä—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è**: `**** **** **** 4270` - ‚úÖ –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ë–ª–æ–∫—á–µ–π–Ω —Å–µ—Ç—å**: - ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≥–æ—Ç–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è tokenStandard –≤ –¥–∞–Ω–Ω—ã—Ö)
4. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**: - ‚úÖ Collapsible –≤–∫–ª–∞–¥–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

### üîß **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –≠–¢–ê–ü–´**

- ‚úÖ **PHASE 1**: Backend Integration - Order type + API —Ä–∞—Å—à–∏—Ä–µ–Ω—ã
- ‚úÖ **PHASE 2**: Utility Functions - Card masking —Å–æ–∑–¥–∞–Ω
- ‚úÖ **PHASE 3**: Frontend Integration - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û**: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ (ru/en)
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å collapsible –≤–∫–ª–∞–¥–∫–∏

## üìã –ê–Ω–∞–ª–∏–∑ –†–ï–ê–õ–¨–ù–û–ì–û —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

### ‚úÖ –ß—Ç–æ –†–ï–ê–õ–¨–ù–û —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –∫–æ–¥–µ)

- **TokenStandardSelector**: ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –≤ `SendingCard.tsx` (`apps/web/src/components/hero-exchange/`)
- **TOKEN_STANDARD_DETAILS**: ‚úÖ –°–£–©–ï–°–¢–í–£–ï–¢ –≤ constants (`@repo/constants`)
- **Order.email**: ‚úÖ –£–ñ–ï –ï–°–¢–¨ –≤ Order interface (`packages/exchange-core/src/types/order.ts`)
- **Order.recipientData**: ‚úÖ –£–ñ–ï –ï–°–¢–¨ –≤ Order interface —Å `cardNumber` –∏ `bankDetails`
- **sanitizeCardNumber**: ‚úÖ –£–¢–ò–õ–ò–¢–ê –£–ñ–ï –ï–°–¢–¨ (`packages/utils/src/validation/card-validation.ts`)

### ‚úÖ –ß—Ç–æ –†–ï–ê–õ–¨–ù–û –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ) ‚Üí –°–¢–ê–¢–£–° –í–´–ü–û–õ–ù–ï–ù–ò–Ø

1. **Order.tokenStandard** - ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ –≤ Order type
2. **API getOrderStatus** - ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `email`, `recipientData`, `tokenStandard`
3. **Card masking utility** - ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `maskCardNumber`
4. **OrderStatus –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** - ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ 3 –Ω–æ–≤—ã—Ö –ø–æ–ª—è

## üîß –ö–û–ù–ö–†–ï–¢–ù–´–ô –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### **PHASE 1: Backend Integration (1-2 —á–∞—Å–∞)** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

#### **1.1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Order Type** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

_–§–∞–π–ª: `packages/exchange-core/src/types/order.ts`_

**–ù–ê–ô–î–ï–ù –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–î:**

```typescript
export interface Order {
  id: string;
  email: string; // ‚úÖ –£–ñ–ï –ï–°–¢–¨
  cryptoAmount: number;
  currency: CryptoCurrency;
  uahAmount: number;
  status: OrderStatus;
  depositAddress: string;
  recipientData?: RecipientData; // ‚úÖ –£–ñ–ï –ï–°–¢–¨
  createdAt: Date;
  updatedAt: Date;
  processedAt?: Date;
  txHash?: string;
}
```

**–ò–ó–ú–ï–ù–ï–ù–ò–ï (–î–û–ë–ê–í–ò–¢–¨ –û–î–ù–û –ü–û–õ–ï):**

```typescript
export interface Order {
  id: string;
  email: string;
  cryptoAmount: number;
  currency: CryptoCurrency;
  uahAmount: number;
  tokenStandard?: string; // üÜï –î–û–ë–ê–í–ò–¢–¨
  status: OrderStatus;
  depositAddress: string;
  recipientData?: RecipientData;
  createdAt: Date;
  updatedAt: Date;
  processedAt?: Date;
  txHash?: string;
}
```

#### **1.2. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è API getOrderStatus** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

_–§–∞–π–ª: `apps/web/src/server/trpc/routers/exchange.ts`_

**–ù–ê–ô–î–ï–ù –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–î (—Å—Ç—Ä–æ–∫–∏ 242-256):**

```typescript
getOrderStatus: publicProcedure
  .input(securityEnhancedOrderByIdSchema)
  .query(async ({ input }) => {
    const order = orderManager.findById(input.orderId);

    if (!order) {
      throw createOrderError('not_found', input.orderId);
    }

    return {
      id: order.id,
      status: order.status,
      cryptoAmount: order.cryptoAmount,
      uahAmount: order.uahAmount,
      currency: order.currency,
      depositAddress: order.depositAddress,
      createdAt: order.createdAt,
      updatedAt: order.updatedAt,
      processedAt: order.processedAt,
      txHash: order.txHash,
    };
  }),
```

**–ò–ó–ú–ï–ù–ï–ù–ò–ï (–î–û–ë–ê–í–ò–¢–¨ 3 –ü–û–õ–Ø –í RESPONSE):**

```typescript
getOrderStatus: publicProcedure
  .input(securityEnhancedOrderByIdSchema)
  .query(async ({ input }) => {
    const order = orderManager.findById(input.orderId);

    if (!order) {
      throw createOrderError('not_found', input.orderId);
    }

    return {
      id: order.id,
      status: order.status,
      cryptoAmount: order.cryptoAmount,
      uahAmount: order.uahAmount,
      currency: order.currency,
      tokenStandard: order.tokenStandard,    // üÜï –î–û–ë–ê–í–ò–¢–¨
      depositAddress: order.depositAddress,
      recipientData: order.recipientData,    // üÜï –î–û–ë–ê–í–ò–¢–¨
      email: order.email,                    // üÜï –î–û–ë–ê–í–ò–¢–¨
      createdAt: order.createdAt,
      updatedAt: order.updatedAt,
      processedAt: order.processedAt,
      txHash: order.txHash,
    };
  }),
```

### **PHASE 2: Utility Functions (30 –º–∏–Ω—É—Ç)** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

#### **2.1. –°–æ–∑–¥–∞–Ω–∏–µ Card Masking Utility** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

_–§–∞–π–ª: `packages/utils/src/card-utils.ts` (–ù–û–í–´–ô)_

**–°–û–ó–î–ê–¢–¨ –ù–û–í–£–Æ –£–¢–ò–õ–ò–¢–£ (—Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º `sanitizeCardNumber`):**

```typescript
/**
 * Card display utilities
 * –°–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º validation/card-validation.ts
 */

import { sanitizeCardNumber } from './validation/card-validation';

/**
 * –ú–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã
 * –ü–∞—Ç—Ç–µ—Ä–Ω: –∫–∞–∫ sanitizeCardNumber, –Ω–æ –¥–ª—è display
 */
export function maskCardNumber(cardNumber: string): string {
  const sanitized = sanitizeCardNumber(cardNumber);

  if (sanitized.length < 4) {
    return '****';
  }

  const lastFour = sanitized.slice(-4);
  return `**** **** **** ${lastFour}`;
}

/**
 * –ü–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã –∫–∞—Ä—Ç—ã
 */
export function getLastFourDigits(cardNumber: string): string {
  const sanitized = sanitizeCardNumber(cardNumber);
  return sanitized.slice(-4) || '****';
}
```

#### **2.2. –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ utils index** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

_–§–∞–π–ª: `packages/utils/src/index.ts`_

**–î–û–ë–ê–í–ò–¢–¨ –ö –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú –≠–ö–°–ü–û–†–¢–ê–ú:**

```typescript
// Card utilities
export { maskCardNumber, getLastFourDigits } from './card-utils';
```

### **PHASE 3: Frontend Integration (1 —á–∞—Å)** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

#### **3.1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ OrderStatus Component** ‚Üí ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

_–§–∞–π–ª: `apps/web/src/components/OrderStatus.tsx`_

**–ù–ê–ô–î–ï–ù –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ü–ê–¢–¢–ï–†–ù (—Å—Ç—Ä–æ–∫–∏ 188-220):**

```typescript
function OrderBasicInfo({
  orderData,
  statusConfig,
  locale,
  t,
}: {
  orderData: Order;
  statusConfig: StatusConfig;
  locale: string;
  t: ReturnType<typeof useTranslations>;
}) {
  return (
    <>
      <div>
        <p className={textStyles.heading.sm}>{t('orderId')}</p>
        <p className={textStyles.body.md}>{orderData.id}</p>
      </div>
      <div>
        <p className={textStyles.heading.sm}>{t('status')}</p>
        {/* existing status display */}
      </div>
      <AmountDisplayWithCopy orderData={orderData} locale={locale} t={t} />
      {/* ... existing fields ... */}
    </>
  );
}
```

**–†–ê–°–®–ò–†–ï–ù–ò–ï (–î–û–ë–ê–í–ò–¢–¨ 3 –ù–û–í–´–• –ü–û–õ–Ø, –°–õ–ï–î–£–Ø –°–£–©–ï–°–¢–í–£–Æ–©–ï–ú–£ –ü–ê–¢–¢–ï–†–ù–£):**

```typescript
// –î–û–ë–ê–í–ò–¢–¨ IMPORT
import { TOKEN_STANDARD_DETAILS } from '@repo/constants';
import { maskCardNumber } from '@repo/utils';

function OrderBasicInfo({
  orderData,
  statusConfig,
  locale,
  t,
}: {
  orderData: Order;
  statusConfig: StatusConfig;
  locale: string;
  t: ReturnType<typeof useTranslations>;
}) {
  return (
    <>
      {/* –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è... */}

      {/* üÜï Email (—Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É existing fields) */}
      <div>
        <p className={textStyles.heading.sm}>{t('email')}</p>
        <p className={textStyles.body.md}>{orderData.email}</p>
      </div>

      {/* üÜï Blockchain Network (—Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É TOKEN_STANDARD_DETAILS) */}
      {orderData.tokenStandard && (
        <div>
          <p className={textStyles.heading.sm}>{t('blockchainNetwork')}</p>
          <p className={textStyles.body.md}>
            {TOKEN_STANDARD_DETAILS[orderData.tokenStandard]?.networkName || orderData.tokenStandard}
          </p>
        </div>
      )}

      {/* üÜï Recipient Card (—Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É maskCardNumber) */}
      {orderData.recipientData?.cardNumber && (
        <div>
          <p className={textStyles.heading.sm}>{t('recipientCard')}</p>
          <p className={combineStyles(textStyles.body.md, 'font-mono')}>
            {maskCardNumber(orderData.recipientData.cardNumber)}
          </p>
        </div>
      )}

      {/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è... */}
    </>
  );
}
```

### **PHASE 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è createOrder API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**

#### **4.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ createOrder –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è tokenStandard**

_–§–∞–π–ª: `apps/web/src/server/trpc/routers/exchange.ts`_

**–ù–ê–ô–¢–ò –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô createOrder (—Å—Ç—Ä–æ–∫–∏ 200-230) –∏ –¥–æ–±–∞–≤–∏—Ç—å tokenStandard processing**

## üîç –†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ü–†–ò–ù–¶–ò–ü–´

### ‚úÖ **–°–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º**

1. **Card utilities**: –°–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É `sanitizeCardNumber` –∏–∑ `card-validation.ts`
2. **Component fields**: –°–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É `OrderBasicInfo` —Å `textStyles.heading.sm`
3. **Constants usage**: –°–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É `TOKEN_STANDARD_DETAILS` usage
4. **API response**: –°–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É existing getOrderStatus fields

### ‚úÖ **–ò–∑–±–µ–≥–∞–Ω–∏–µ copy-paste**

1. **maskCardNumber**: –ê–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –∏–∑ validation utilities
2. **Consistent styling**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `textStyles` –∏ `combineStyles`
3. **Error handling**: –°–ª–µ–¥—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `createOrderError` –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º

### ‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**

- **1 –Ω–æ–≤–æ–µ –ø–æ–ª–µ** –≤ Order interface
- **3 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è** –≤ API response
- **1 –Ω–æ–≤–∞—è —É—Ç–∏–ª–∏—Ç–∞** –¥–ª—è card masking
- **3 –Ω–æ–≤—ã—Ö –±–ª–æ–∫–∞** –≤ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

## üìÅ –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã (—Ç–æ–ª—å–∫–æ 5 —Ñ–∞–π–ª–æ–≤)

```
packages/exchange-core/src/types/order.ts           # –†–ê–°–®–ò–†–ò–¢–¨: +1 –ø–æ–ª–µ
packages/utils/src/card-utils.ts                    # –°–û–ó–î–ê–¢–¨: card masking
packages/utils/src/index.ts                         # –†–ê–°–®–ò–†–ò–¢–¨: exports
apps/web/src/server/trpc/routers/exchange.ts        # –†–ê–°–®–ò–†–ò–¢–¨: API response
apps/web/src/components/OrderStatus.tsx             # –†–ê–°–®–ò–†–ò–¢–¨: UI display
```

function OrderStatusDetails({ order }: { order: Order }) {
// –ü–æ–ª—É—á–∞–µ–º network display name –∏–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const networkName = order.tokenStandard
? TOKEN_STANDARD_DETAILS[order.tokenStandard]?.networkName
: null;

// –ú–∞—Å–∫–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
const maskedCardNumber = order.recipientData?.cardNumber
? maskCardNumber(order.recipientData.cardNumber)
: null;

return (

<div className="space-y-4">
{/_ üÜï Email display _/}
<div className="flex justify-between">
<span className="text-muted-foreground">Email</span>
<span className="font-medium">{order.email}</span>
</div>

      {/* üÜï Blockchain Network */}
      {networkName && (
        <div className="flex justify-between">
          <span className="text-muted-foreground">Blockchain Network</span>
          <span className="font-medium">{networkName}</span>
        </div>
      )}

      {/* üÜï Recipient Card (last 4 digits) */}
      {maskedCardNumber && (
        <div className="flex justify-between">
          <span className="text-muted-foreground">Recipient Card</span>
          <span className="font-medium">{maskedCardNumber}</span>
        </div>
      )}
    </div>

);
}

````

## üîß Utility Functions

### Card Masking Utility

_`packages/utils/src/card-utils.ts`_

```typescript
/**
 * Masks card number showing only last 4 digits
 * Example: "1234567812345678" -> "**** **** **** 5678"
 */
export function maskCardNumber(cardNumber: string): string {
  const cleaned = cardNumber.replace(/\D/g, '');
  if (cleaned.length < 4) return cardNumber;

  const lastFour = cleaned.slice(-4);
  const masked = '**** **** **** ' + lastFour;
  return masked;
}
````

## üîÑ Data Flow Integration

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π Flow (‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç)

```
ExchangeForm ‚Üí form.values.tokenStandard ‚Üí createOrder API
```

### –ù–æ–≤—ã–π Flow (üÜï –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

```
ExchangeForm ‚Üí form.values.tokenStandard ‚Üí createOrder API ‚Üí Order.tokenStandard ‚Üí DB
                                                            ‚Üì
getOrderStatus API ‚Üê Order.tokenStandard ‚Üê DB ‚Üê OrderStatus Component
```

## üì¶ Packages Dependencies

### Required Updates

- **`@repo/exchange-core`**: Order type extension
- **`@repo/utils`**: Card masking utility
- **`@repo/constants`**: ‚úÖ –£–ñ–ï –ï–°–¢–¨ TOKEN_STANDARD_DETAILS
- **`apps/web`**: API endpoints + OrderStatus component

### No Changes Required

- **`@repo/ui`**: ‚úÖ TokenStandardSelector —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **`packages/validation`**: ‚úÖ Security schemas —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç tokenStandard

## üéØ Implementation Steps

### Phase 1: Backend (Order Type & API)

1. ‚úÖ Extend Order interface —Å tokenStandard field
2. ‚úÖ Update getOrderStatus API response
3. ‚úÖ Database migration –¥–ª—è tokenStandard column

### Phase 2: Frontend (UI Display)

1. ‚úÖ Add maskCardNumber utility
2. ‚úÖ Update OrderStatus component
3. ‚úÖ Add network name display logic

### Phase 3: Testing & Validation

1. ‚úÖ Test existing TokenStandardSelector integration
2. ‚úÖ Validate card masking function
3. ‚úÖ End-to-end flow testing

## üèÜ Architectural Benefits

### ‚úÖ **Minimal Changes**

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é TOKEN_STANDARDS –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç security-enhanced validation schemas
- Minimal API changes (—Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π)

### ‚úÖ **Type Safety**

- TypeScript types –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç—Å—è
- tRPC –æ–±–µ—Å–ø–µ—á–∏—Ç type-safe API calls
- Zod schemas already support tokenStandard

### ‚úÖ **Security First**

- Card masking –∑–∞—â–∏—â–∞–µ—Ç sensitive data
- XSS protection —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ validation schemas
- Existing security patterns —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

## üîç Integration Points Summary ‚Üí ‚úÖ **–°–¢–ê–¢–£–° –í–´–ü–û–õ–ù–ï–ù–ò–Ø**

| Component             | –°—Ç–∞—Ç—É—Å –î–æ     | Integration Required         | ‚úÖ –°—Ç–∞—Ç—É—Å –ü–æ—Å–ª–µ  |
| --------------------- | ------------- | ---------------------------- | ---------------- |
| TokenStandardSelector | ‚úÖ Working    | None - —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω      | ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| TOKEN_STANDARDS       | ‚úÖ Complete   | None - —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç          | ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| Order Type            | ‚ùå Missing    | Add tokenStandard field      | ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** |
| API getOrderStatus    | ‚ùå Incomplete | Return tokenStandard & email | ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** |
| OrderStatus UI        | ‚ùå Missing    | Display 3 new fields         | ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** |
| Card Masking          | ‚ùå Missing    | New utility function         | ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û** |

---

## üìÅ –ò–¢–û–ì–û–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

### ‚úÖ **Backend (API & Types)**

```
‚úÖ packages/exchange-core/src/types/order.ts           - –î–æ–±–∞–≤–ª–µ–Ω–æ tokenStandard –ø–æ–ª–µ
‚úÖ apps/web/src/server/trpc/routers/exchange.ts        - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç email, recipientData, tokenStandard
```

### ‚úÖ **Utils & Libraries**

```
‚úÖ packages/utils/src/card-utils.ts                    - –ù–û–í–´–ô: —Ñ—É–Ω–∫—Ü–∏–∏ maskCardNumber, getLastFourDigits
‚úÖ packages/utils/src/index.ts                         - –≠–∫—Å–ø–æ—Ä—Ç card-utils
```

### ‚úÖ **Frontend Components**

```
‚úÖ apps/web/src/components/OrderStatus.tsx             - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö helpers
‚úÖ apps/web/src/components/order-status/OrderStatusHelpers.tsx - –ù–û–í–´–ô: helper –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

### ‚úÖ **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**

```
‚úÖ apps/web/messages/ru/order-page.json                - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ–ª–µ–π
‚úÖ apps/web/messages/en/order-page.json                - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ–ª–µ–π
```

### ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

```
‚úÖ docs/tasks/ORDERSTATUS_FIELDS_INTEGRATION_ARCHITECTURE.md - –û–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```

**–ò—Ç–æ–≥**: ‚úÖ **–ó–ê–î–ê–ß–ê –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–ê** - –≤—Å–µ 3 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–æ–ª—è (email, blockchain network, recipient card) –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.
