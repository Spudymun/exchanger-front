# ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ: ะขะฐะนะผะตั ะพะฑัะฐัะฝะพะณะพ ะพัััะตัะฐ ะธ ะบะฝะพะฟะบะธ ะฝะฐ ัััะฐะฝะธัะต ะทะฐะบะฐะทะฐ

**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 4 ะพะบััะฑัั 2025  
**ะกัะฐััั:** ะะปะฐะฝะธัะพะฒะฐะฝะธะต  
**ะัะธะพัะธัะตั:** ะกัะตะดะฝะธะน  
**ะะพะปั ะฐะณะตะฝัะฐ:** ะะณะตะฝั-ะบะพะดะตั (ัะพะบัั ะฝะฐ ัะตัะฐะบัะพัะธะฝะณ ะธ ะฟะฐััะตัะฝั)

---

## ๐ ะฆะตะปั ะทะฐะดะฐัะธ

ะะพะฑะฐะฒะธัั UI ัะปะตะผะตะฝัั ะฝะฐ ัััะฐะฝะธัั ะทะฐะบะฐะทะฐ (`/order/[orderId]`) ะดะปั ัะปัััะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะพะฟััะฐ:

1. **ะขะฐะนะผะตั ะพะฑัะฐัะฝะพะณะพ ะพัััะตัะฐ** (1ั 30ะผะธะฝ 00ัะตะบ) ั ัะตะบััะพะผ ะฟัะตะดัะฟัะตะถะดะตะฝะธั
2. **ะะฝะพะฟะบะฐ "ะะฟะปะฐัะธะป"** ะดะปั ัะฒะตะดะพะผะปะตะฝะธั ัะธััะตะผั ะพ ัะพะฒะตััะตะฝะธะธ ะฟะปะฐัะตะถะฐ
3. **ะะฝะพะฟะบะฐ "ะัะผะตะฝะธัั ะทะฐะบะฐะท"** ั ะผะพะดะฐะปัะฝัะผ ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ

**ะะฑะปะฐััั ัะฐะทะผะตัะตะฝะธั:** ะะพะด ะธะฝัะพัะผะฐัะธะตะน ะพ ะฑะฐะฝะบะต, ะบะฐััะต ะธ ะบัััะต ะฒ ัะฐะทะดะตะปะต "ะกัะผะผะฐ" (OrderFinancialInfo)

**ะคะพะบัั:** ะขะะะฌะะ ะฒะธะทัะฐะปัะฝะพะต ะดะพะฑะฐะฒะปะตะฝะธะต ัะปะตะผะตะฝัะพะฒ ะฑะตะท backend ะปะพะณะธะบะธ (ะดะธะทะฐะนะฝ-ัะธััะตะผะฐ ะธ UI)

---

## ๐ฏ ะััะธัะตะบัััะฝัะน ะฐะฝะฐะปะธะท ัััะตััะฒัััะตะณะพ ะบะพะดะฐ

### Rule 24: ะะะะะะะะะขะะะะะ ะะะะะะ ะกะขะะฃะะขะฃะะซ

ะัะพัะธัะฐะฝ `PROJECT_STRUCTURE_MAP.md`. ะะตะปะตะฒะฐะฝัะฝัะต ะฟะฐะบะตัั:

- `packages/ui/` - ัะตะฝััะฐะปัะฝะฐั ะฑะธะฑะปะธะพัะตะบะฐ UI ะบะพะผะฟะพะฝะตะฝัะพะฒ
- `packages/constants/` - ะบะพะฝััะฐะฝัั ะดะปั UI
- `apps/web/app/[locale]/order/[orderId]/` - ัััะฐะฝะธัะฐ ะทะฐะบะฐะทะฐ
- `packages/hooks/` - state management

### 1. ะขะตะบััะฐั ััััะบัััะฐ ัััะฐะฝะธัั ะทะฐะบะฐะทะฐ

**ะคะฐะนะป:** `apps/web/app/[locale]/order/[orderId]/OrderPageClient.tsx`

```tsx
export function OrderPageClient({ orderId }: OrderPageClientProps) {
  return (
    <>
      <OrderStatus
        orderId={orderId}
        showDetails={true}
        collapsibleTechnicalDetails={true}
        useOrderStatusHook={orderStatusHook}
      />
      <OrderDevTools ... />
    </>
  );
}
```

**ะะพะผะฟะพะฝะตะฝั OrderStatus** (`packages/ui/src/components/order/OrderStatus.tsx`):

- ะะตะฝะดะตัะธั `OrderStatusHeader` (ะธะบะพะฝะบะฐ, ะฝะฐะทะฒะฐะฝะธะต ััะฐัััะฐ, ะพะฟะธัะฐะฝะธะต)
- ะะตะฝะดะตัะธั `OrderStatusDetails` ั ะณััะฟะฟะฐะผะธ:
  - **OrderPriorityInfo** - ID ะทะฐะบะฐะทะฐ, ััะฐััั
  - **OrderCryptoInfo** - ะฐะดัะตั ะดะตะฟะพะทะธัะฐ, ัะตัั, email (ะปะตะฒะฐั ะบะพะปะพะฝะบะฐ)
  - **OrderFinancialInfo** - ััะผะผะฐ, ะบะฐััะฐ ะฟะพะปััะฐัะตะปั (ะฟัะฐะฒะฐั ะบะพะปะพะฝะบะฐ) โ **ะฆะะะะะะ ะะะกะขะ**
  - **OrderMetadataInfo** - ะดะฐัั ัะพะทะดะฐะฝะธั/ะพะฑะฝะพะฒะปะตะฝะธั
  - **TechnicalDetailsCollapsible** - ัะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### 2. ะกััะตััะฒัััะธะต UI ะบะพะผะฟะพะฝะตะฝัั (Rule 17 + Rule 20)

#### 2.1 Button ะบะพะผะฟะพะฝะตะฝั

**ะคะฐะนะป:** `packages/ui/src/components/ui/button.tsx`

โ **ะกะฃะฉะะกะขะะฃะะข** - shadcn/ui ะบะพะผะฟะพะฝะตะฝั ั ะฒะฐัะธะฐะฝัะฐะผะธ:

```tsx
<Button variant="default | destructive | outline | secondary | ghost | link">
<Button size="default | sm | lg | icon">
```

**ะะฐะนะดะตะฝะฝัะต ะฟะฐััะตัะฝั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**

- `variant="outline"` - ะดะปั ะฒัะพัะธัะฝัั ะดะตะนััะฒะธะน (ะพัะผะตะฝะฐ)
- `variant="destructive"` - ะดะปั ะพะฟะฐัะฝัั ะดะตะนััะฒะธะน (ัะดะฐะปะตะฝะธะต)
- `size="sm"` - ะบะพะผะฟะฐะบัะฝัะน ัะฐะทะผะตั

#### 2.2 Dialog ะบะพะผะฟะพะฝะตะฝั (ะผะพะดะฐะปัะฝัะต ะพะบะฝะฐ)

**ะคะฐะนะป:** `packages/ui/src/components/ui/dialog.tsx`

โ **ะกะฃะฉะะกะขะะฃะะข** - Radix UI ะบะพะผะฟะพะฝะตะฝั ะดะปั ะผะพะดะฐะปัะฝัั ะพะบะพะฝ:

```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>ะัะบัััั</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>ะะฐะณะพะปะพะฒะพะบ</DialogTitle>
      <DialogDescription>ะะฟะธัะฐะฝะธะต</DialogDescription>
    </DialogHeader>
    <DialogFooter>
      <Button variant="outline">ะัะผะตะฝะฐ</Button>
      <Button variant="destructive">ะะพะดัะฒะตัะดะธัั</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

**ะะฐะนะดะตะฝะฝัะต Story examples:**

- `Confirmation` - ะดะธะฐะปะพะณ ะฟะพะดัะฒะตัะถะดะตะฝะธั ะดะตะนััะฒะธั
- `Controlled` - ัะฟัะฐะฒะปัะตะผะพะต ัะพััะพัะฝะธะต ัะตัะตะท `useState`

#### 2.3 Countdown Timer ะบะพะผะฟะพะฝะตะฝั

**ะกัะฐััั:** โ **ะะ ะะะะะะ** ะฒ ะฟัะพะตะบัะต

**ะะพะธัะบ ะฒัะฟะพะปะฝะตะฝ:**

- `semantic_search` ะฟะพ "countdown timer ะพะฑัะฐัะฝัะน ะพัััะตั ัะฐะนะผะตั"
- `grep_search` ะฒ `packages/ui/`
- ะะตะทัะปััะฐั: ะบะพะผะฟะพะฝะตะฝั ะพััััััะฒัะตั, ะฝัะถะฝะพ ัะพะทะดะฐัั

**ะะตัะตะฝะธะต:** ะกะพะทะดะฐัั ะฝะพะฒัะน ะบะพะผะฟะพะฝะตะฝั `CountdownTimer` ะฒ `packages/ui/src/components/ui/`

### 3. ะกััะตััะฒัััะธะต ะฟะฐััะตัะฝั ััะธะปะธะทะฐัะธะธ

#### 3.1 Text Styles

**ะคะฐะนะป:** `packages/ui/src/components/order/helpers/OrderStatusHelpers.tsx`

ะัะฟะพะปัะทัะตะผัะต ััะธะปะธ ะธะท ะดะธะทะฐะนะฝ-ัะธััะตะผั:

```tsx
import { textStyles, combineStyles } from '@repo/ui';

<p className={textStyles.heading.sm}>ะะฐะณะพะปะพะฒะพะบ</p>
<p className={textStyles.body.md}>ะขะตะบัั</p>
<p className={combineStyles(textStyles.heading.sm, 'text-warning')}>
  โ๏ธ ะัะตะดัะฟัะตะถะดะตะฝะธะต
</p>
```

#### 3.2 Status Styles

```tsx
import { statusStyles } from '@repo/ui';

statusStyles.success; // ะทะตะปะตะฝัะน
statusStyles.warning; // ะถะตะปััะน
statusStyles.error; // ะบัะฐัะฝัะน
statusStyles.neutral; // ัะตััะน
```

#### 3.3 Spacing Styles

```tsx
import { responsiveStyles } from '@repo/ui';

responsiveStyles.spacing.sectionTop; // ะพััััะฟ ัะฒะตััั ัะตะบัะธะธ
responsiveStyles.spacing.content; // ะพััััะฟั ะบะพะฝัะตะฝัะฐ
responsiveStyles.spacing.columnGap; // gap ะผะตะถะดั ะบะพะปะพะฝะบะฐะผะธ
```

### 4. ะะพะบะฐะปะธะทะฐัะธั (i18n)

**ะคะฐะนะปั ะฟะตัะตะฒะพะดะพะฒ:**

- `apps/web/messages/en/order-page.json`
- `apps/web/messages/ru/order-page.json` (ะฟัะตะดะฟะพะปะพะถะธัะตะปัะฝะพ)

**ะกััะตััะฒัััะธะต ะบะปััะธ:**

```json
{
  "OrderStatus": {
    "orderId": "Order ID",
    "status": "Status",
    "amount": "Amount",
    ...
  }
}
```

**ะัะถะฝะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะต ะบะปััะธ:**

```json
{
  "OrderStatus": {
    "countdownWarning": "ะ ัะปััะฐัั ะทะฐะดะตัะถะบะธ ะธะปะธ ะฝะต ัะพะฒะตััะตะฝะธั ะพะฟะปะฐัั โ ะะฐัะฐ ะทะฐัะฒะบะฐ ะฑัะดะตั ัะดะฐะปะตะฝะฐ ัะตัะตะท:",
    "paidButton": "ะะฟะปะฐัะธะป",
    "cancelOrderButton": "ะัะผะตะฝะธัั ะทะฐะบะฐะท",
    "cancelConfirmTitle": "ะะพะดัะฒะตัะถะดะตะฝะธะต ะพัะผะตะฝั ะทะฐะบะฐะทะฐ",
    "cancelConfirmDescription": "ะัะปะธ ะฒั ัะถะต ัะพะฒะตััะธะปะธ ะฟะตัะตะฒะพะด ะบัะธะฟัะพะฒะฐะปััั, ััะตะดััะฒะฐ ะฑัะดัั ะฟะพัะตััะฝั. ะั ัะฒะตัะตะฝั, ััะพ ัะพัะธัะต ะพัะผะตะฝะธัั ะทะฐะบะฐะท?",
    "cancelConfirmButton": "ะะฐ, ะพัะผะตะฝะธัั ะทะฐะบะฐะท",
    "cancelAbortButton": "ะะตั, ะฒะตัะฝััััั"
  }
}
```

---

## ๐ฆ ะะตัะฐะปัะฝัะน ะฟะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ

### Rule 25: ะคะะะฃะก ะขะะะฌะะ ะะ ะฆะะะ ะะะะะงะ

**ะะะะะะจะะะะซะ ะธะทะผะตะฝะตะฝะธั:**

- โ ะกะพะทะดะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะฐ `CountdownTimer`
- โ ะกะพะทะดะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะฐ `OrderActions` (ะบะฝะพะฟะบะธ + ัะฐะนะผะตั)
- โ ะะพะดะธัะธะบะฐัะธั `OrderStatusHelpers.tsx` ะดะปั ะดะพะฑะฐะฒะปะตะฝะธั `OrderActions`
- โ ะะพะฑะฐะฒะปะตะฝะธะต ะบะปััะตะน ะปะพะบะฐะปะธะทะฐัะธะธ ะฒ `order-page.json`

**ะะะะะะฉะะะะซะ ะธะทะผะตะฝะตะฝะธั:**

- โ Backend ะปะพะณะธะบะฐ ะพะฑัะฐะฑะพัะบะธ ะบะฝะพะฟะพะบ
- โ State management ะดะปั ัะฐะนะผะตัะฐ
- โ API endpoints ะดะปั ะดะตะนััะฒะธะน
- โ ะะทะผะตะฝะตะฝะธะต ะดััะณะธั ัะฐััะตะน OrderStatus
- โ ะะตัะฐะบัะพัะธะฝะณ ัััะตััะฒัััะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ

---

### ะญะขะะ 1: ะกะพะทะดะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะฐ CountdownTimer

**ะคะฐะนะป:** `packages/ui/src/components/ui/countdown-timer.tsx`

**ะะฑะพัะฝะพะฒะฐะฝะธะต ัะตัะตะฝะธั (Rule 20 - ะะฐะฟัะตั ะธะทะฑััะพัะฝะพััะธ):**

- ะะพะผะฟะพะฝะตะฝั ะะ ัััะตััะฒัะตั ะฒ ะฟัะพะตะบัะต (ะฟัะพะฒะตัะตะฝะพ ัะตัะตะท semantic_search)
- ะกะฟะตัะธัะธัะฝะฐั ััะฝะบัะธะพะฝะฐะปัะฝะพััั ะพะฑัะฐัะฝะพะณะพ ะพัััะตัะฐ
- ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ะบะพะผะฟะพะฝะตะฝัะฐ ะพะฟัะฐะฒะดะฐะฝะพ

**ะกะฟะตัะธัะธะบะฐัะธั:**

```tsx
interface CountdownTimerProps {
  // ะัะตะผั ะพะบะพะฝัะฐะฝะธั ะฒ ISO ัะพัะผะฐัะต
  expiresAt: string | Date;

  // Callback ะฟัะธ ะธััะตัะตะฝะธะธ ะฒัะตะผะตะฝะธ
  onExpire?: () => void;

  // ะะฐััะพะผะฝัะต ััะธะปะธ
  className?: string;

  // ะะฐะทะผะตั ัะตะบััะฐ
  size?: 'sm' | 'md' | 'lg';

  // ะะพะบะฐะทัะฒะฐัั ะปะธ ะผะตัะบะธ (ั, ะผะธะฝ, ัะตะบ)
  showLabels?: boolean;
}

export function CountdownTimer({
  expiresAt,
  onExpire,
  className,
  size = 'md',
  showLabels = true,
}: CountdownTimerProps): JSX.Element;
```

**ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั:**

1. ะะฐััะตั ะพััะฐะฒัะตะณะพัั ะฒัะตะผะตะฝะธ ะพั ัะตะบััะตะณะพ ะผะพะผะตะฝัะฐ ะดะพ `expiresAt`
2. ะะฑะฝะพะฒะปะตะฝะธะต ะบะฐะถะดัั ัะตะบัะฝะดั ัะตัะตะท `setInterval`
3. ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะฒ ัะพัะผะฐั "1ั 30ะผะธะฝ 00ัะตะบ" ะธะปะธ "01:30:00"
4. ะัะทะพะฒ `onExpire` ะฟัะธ ะดะพััะธะถะตะฝะธะธ 0
5. Cleanup `setInterval` ะฟัะธ unmount

**ะกัะธะปะธะทะฐัะธั:**

- ะัะฟะพะปัะทะพะฒะฐัั `textStyles` ะธะท ะดะธะทะฐะนะฝ-ัะธััะตะผั
- ะะพะฝะพัะธัะธะฝะฝัะน ััะธัั ะดะปั ัะธัั (`font-mono`)
- ะฆะฒะตัะพะฒะฐั ะธะฝะดะธะบะฐัะธั:
  - ะะตะปะตะฝัะน: > 60 ะผะธะฝัั
  - ะะตะปััะน: 10-60 ะผะธะฝัั
  - ะัะฐัะฝัะน: < 10 ะผะธะฝัั

**ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**

```tsx
<CountdownTimer
  expiresAt={order.expiresAt}
  size="lg"
  showLabels={true}
  onExpire={() => console.log('Order expired')}
/>
```

---

### ะญะขะะ 2: ะกะพะทะดะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะฐ OrderActions

**ะคะฐะนะป:** `packages/ui/src/components/order/helpers/OrderActions.tsx`

**ะะฑะพัะฝะพะฒะฐะฝะธะต ัะตัะตะฝะธั (Rule 2 - ะกัััะบัััะธัะพะฒะฐะฝะฝัะน ะฟะพะดัะพะด):**

- ะะพะฒะฐั ััะฝะบัะธะพะฝะฐะปัะฝะพััั, ะฝะต ะดัะฑะปะธััะตั ัััะตััะฒััััั
- ะะพะณะธัะฝะพ ะณััะฟะฟะธััะตััั: ัะฐะนะผะตั + ะบะฝะพะฟะบะธ ะดะตะนััะฒะธะน
- ะะฐะทะผะตัะฐะตััั ะฒ `order/helpers/` ัะพะณะปะฐัะฝะพ ัััะตััะฒัััะตะน ััััะบัััะต

**ะกะฟะตัะธัะธะบะฐัะธั:**

```tsx
interface OrderActionsProps {
  // ID ะทะฐะบะฐะทะฐ ะดะปั ะฟะตัะตะดะฐัะธ ะฒ callbacks
  orderId: string;

  // ะัะตะผั ะธััะตัะตะฝะธั ะทะฐะบะฐะทะฐ
  expiresAt: string | Date;

  // Callback ะฟัะธ ะฝะฐะถะฐัะธะธ "ะะฟะปะฐัะธะป"
  onMarkAsPaid?: (orderId: string) => void;

  // Callback ะฟัะธ ะฟะพะดัะฒะตัะถะดะตะฝะธะธ ะพัะผะตะฝั
  onCancelOrder?: (orderId: string) => void;

  // Callback ะฟัะธ ะธััะตัะตะฝะธะธ ัะฐะนะผะตัะฐ
  onExpire?: () => void;

  // Loading states ะดะปั ะบะฝะพะฟะพะบ
  isMarkingPaid?: boolean;
  isCancelling?: boolean;
}

export function OrderActions({
  orderId,
  expiresAt,
  onMarkAsPaid,
  onCancelOrder,
  onExpire,
  isMarkingPaid = false,
  isCancelling = false,
}: OrderActionsProps): JSX.Element;
```

**ะกัััะบัััะฐ ะบะพะผะฟะพะฝะตะฝัะฐ:**

```tsx
export function OrderActions(props: OrderActionsProps) {
  const t = useTranslations('OrderStatus');
  const [showCancelDialog, setShowCancelDialog] = useState(false);

  return (
    <div className="space-y-4 pt-4 border-t">
      {/* ะัะตะดัะฟัะตะถะดะตะฝะธะต ั ัะฐะนะผะตัะพะผ */}
      <div className="space-y-2">
        <p className={textStyles.body.sm}>{t('countdownWarning')}</p>
        <CountdownTimer expiresAt={props.expiresAt} size="lg" onExpire={props.onExpire} />
      </div>

      {/* ะะฝะพะฟะบะธ ะดะตะนััะฒะธะน */}
      <div className="flex gap-3 flex-col sm:flex-row">
        <Button
          variant="default"
          className="flex-1"
          onClick={() => props.onMarkAsPaid?.(props.orderId)}
          disabled={props.isMarkingPaid}
        >
          {props.isMarkingPaid ? 'ะัะฟัะฐะฒะบะฐ...' : t('paidButton')}
        </Button>

        <Button
          variant="outline"
          className="flex-1"
          onClick={() => setShowCancelDialog(true)}
          disabled={props.isCancelling}
        >
          {t('cancelOrderButton')}
        </Button>
      </div>

      {/* ะะธะฐะปะพะณ ะฟะพะดัะฒะตัะถะดะตะฝะธั ะพัะผะตะฝั */}
      <Dialog open={showCancelDialog} onOpenChange={setShowCancelDialog}>
        <DialogContent>
          <DialogHeader>
            <DialogTitle>{t('cancelConfirmTitle')}</DialogTitle>
            <DialogDescription>{t('cancelConfirmDescription')}</DialogDescription>
          </DialogHeader>
          <DialogFooter>
            <Button variant="outline" onClick={() => setShowCancelDialog(false)}>
              {t('cancelAbortButton')}
            </Button>
            <Button
              variant="destructive"
              onClick={() => {
                props.onCancelOrder?.(props.orderId);
                setShowCancelDialog(false);
              }}
              disabled={props.isCancelling}
            >
              {t('cancelConfirmButton')}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
}
```

**ะกัะธะปะธะทะฐัะธั:**

- ะัะฟะพะปัะทะพะฒะฐัั `responsiveStyles.spacing.sectionTop` ะดะปั ะพััััะฟะฐ ัะฒะตััั
- `border-t` ะดะปั ะฒะธะทัะฐะปัะฝะพะณะพ ัะฐะทะดะตะปะตะฝะธั ะพั ัะธะฝะฐะฝัะพะฒะพะน ะธะฝัะพัะผะฐัะธะธ
- Responsive layout: ะบะพะปะพะฝะบะฐ ะฝะฐ mobile, ัััะพะบะฐ ะฝะฐ desktop (`flex-col sm:flex-row`)
- `flex-1` ะดะปั ัะฐะฒะฝะพะน ัะธัะธะฝั ะบะฝะพะฟะพะบ

---

### ะญะขะะ 3: ะะฝัะตะณัะฐัะธั ะฒ OrderStatusHelpers

**ะคะฐะนะป:** `packages/ui/src/components/order/helpers/OrderStatusHelpers.tsx`

**ะะทะผะตะฝะตะฝะธะต:** ะะพะฑะฐะฒะธัั ะฝะพะฒัั ััะฝะบัะธั `OrderActionsSection` ะธ ัะบัะฟะพััะธัะพะฒะฐัั

```tsx
export function OrderActionsSection({
  orderData,
  onMarkAsPaid,
  onCancelOrder,
  onExpire,
  isMarkingPaid,
  isCancelling,
}: {
  orderData: Order;
  onMarkAsPaid?: (orderId: string) => void;
  onCancelOrder?: (orderId: string) => void;
  onExpire?: () => void;
  isMarkingPaid?: boolean;
  isCancelling?: boolean;
}) {
  // ะะพะบะฐะทัะฒะฐัั ัะพะปัะบะพ ะตัะปะธ ะทะฐะบะฐะท ะฝะต ะฒ ัะธะฝะฐะปัะฝะพะผ ััะฐัััะต
  const showActions = orderData.status === 'PENDING' || orderData.status === 'PROCESSING';

  if (!showActions || !orderData.expiresAt) {
    return null;
  }

  return (
    <OrderActions
      orderId={orderData.id}
      expiresAt={orderData.expiresAt}
      onMarkAsPaid={onMarkAsPaid}
      onCancelOrder={onCancelOrder}
      onExpire={onExpire}
      isMarkingPaid={isMarkingPaid}
      isCancelling={isCancelling}
    />
  );
}
```

**ะะฑะพัะฝะพะฒะฐะฝะธะต:**

- ะะธะฝะธะผะฐะปัะฝัะต ะธะทะผะตะฝะตะฝะธั ัััะตััะฒัััะตะณะพ ะบะพะดะฐ (Rule 25)
- ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะน ััะฝะบัะธะธ, ะฝะต ะผะพะดะธัะธะบะฐัะธั ัััะตััะฒัััะธั
- ะะพะณะธะบะฐ ะฒะธะดะธะผะพััะธ (ััะฐััั ะทะฐะบะฐะทะฐ) ะธะทะพะปะธัะพะฒะฐะฝะฐ

---

### ะญะขะะ 4: ะะฝัะตะณัะฐัะธั ะฒ OrderStatus ะบะพะผะฟะพะฝะตะฝั

**ะคะฐะนะป:** `packages/ui/src/components/order/OrderStatus.tsx`

**ะะทะผะตะฝะตะฝะธะต:** ะะพะดะธัะธัะธัะพะฒะฐัั `OrderStatusDetails` ะดะปั ะดะพะฑะฐะฒะปะตะฝะธั `OrderActionsSection` ะฟะพัะปะต `OrderFinancialInfo`

**ะขะะะฃะฉะะฏ ะกะขะะฃะะขะฃะะ:**

```tsx
<div className={responsiveStyles.spacing.columnGap}>
  <div className="flex-1">
    <OrderCryptoInfo ... />
  </div>
  <div className={responsiveStyles.spacing.sideSection}>
    <OrderFinancialInfo ... />
  </div>
</div>
```

**ะะะะะฏ ะกะขะะฃะะขะฃะะ:**

```tsx
<div className={responsiveStyles.spacing.columnGap}>
  <div className="flex-1">
    <OrderCryptoInfo ... />
  </div>
  <div className={responsiveStyles.spacing.sideSection}>
    <OrderFinancialInfo ... />

    {/* ะะะะซะ ะะะะ */}
    <OrderActionsSection
      orderData={orderData}
      onMarkAsPaid={undefined} // TODO: ะฑัะดะตั ัะตะฐะปะธะทะพะฒะฐะฝะพ ะฟะพะทะถะต
      onCancelOrder={undefined} // TODO: ะฑัะดะตั ัะตะฐะปะธะทะพะฒะฐะฝะพ ะฟะพะทะถะต
      onExpire={undefined} // TODO: ะฑัะดะตั ัะตะฐะปะธะทะพะฒะฐะฝะพ ะฟะพะทะถะต
    />
  </div>
</div>
```

**ะะฑะพัะฝะพะฒะฐะฝะธะต:**

- ะะฐะทะผะตัะตะฝะธะต ะฒ ะฟัะฐะฒะพะน ะบะพะปะพะฝะบะต ัะพะณะปะฐัะฝะพ ััะตะฑะพะฒะฐะฝะธัะผ
- ะะพะด ัะธะฝะฐะฝัะพะฒะพะน ะธะฝัะพัะผะฐัะธะตะน ะปะพะณะธัะตัะบะธ ะณััะฟะฟะธััะตััั ั ะดะตะนััะฒะธัะผะธ
- `undefined` callbacks - ัะฒะฝะพะต ัะบะฐะทะฐะฝะธะต ะฝะฐ ะพััััััะฒะธะต ะปะพะณะธะบะธ (ะทะฐะณะปััะบะฐ)

---

### ะญะขะะ 5: ะะพะฑะฐะฒะปะตะฝะธะต ะบะปััะตะน ะปะพะบะฐะปะธะทะฐัะธะธ

**ะคะฐะนะป:** `apps/web/messages/en/order-page.json`

```json
{
  "OrderStatus": {
    "orderId": "Order ID",
    "status": "Status",
    "amount": "Amount",
    "depositAddress": "Deposit address",
    "created": "Created",
    "updated": "Updated",

    "countdownWarning": "In case of delay or failure to complete payment โ Your order will be deleted in:",
    "paidButton": "I Have Paid",
    "cancelOrderButton": "Cancel Order",
    "cancelConfirmTitle": "Confirm Order Cancellation",
    "cancelConfirmDescription": "If you have already transferred cryptocurrency, the funds will be lost. Are you sure you want to cancel the order?",
    "cancelConfirmButton": "Yes, Cancel Order",
    "cancelAbortButton": "No, Go Back"
  }
}
```

**ะคะฐะนะป:** `apps/web/messages/ru/order-page.json` (ัะพะทะดะฐัั ะตัะปะธ ะฝะต ัััะตััะฒัะตั)

```json
{
  "OrderStatus": {
    "orderId": "ID ะทะฐะบะฐะทะฐ",
    "status": "ะกัะฐััั",
    "amount": "ะกัะผะผะฐ",
    "depositAddress": "ะะดัะตั ะดะปั ะดะตะฟะพะทะธัะฐ",
    "created": "ะกะพะทะดะฐะฝะพ",
    "updated": "ะะฑะฝะพะฒะปะตะฝะพ",

    "countdownWarning": "ะ ัะปััะฐัั ะทะฐะดะตัะถะบะธ ะธะปะธ ะฝะต ัะพะฒะตััะตะฝะธั ะพะฟะปะฐัั โ ะะฐัะฐ ะทะฐัะฒะบะฐ ะฑัะดะตั ัะดะฐะปะตะฝะฐ ัะตัะตะท:",
    "paidButton": "ะะฟะปะฐัะธะป",
    "cancelOrderButton": "ะัะผะตะฝะธัั ะทะฐะบะฐะท",
    "cancelConfirmTitle": "ะะพะดัะฒะตัะถะดะตะฝะธะต ะพัะผะตะฝั ะทะฐะบะฐะทะฐ",
    "cancelConfirmDescription": "ะัะปะธ ะฒั ัะถะต ัะพะฒะตััะธะปะธ ะฟะตัะตะฒะพะด ะบัะธะฟัะพะฒะฐะปััั, ััะตะดััะฒะฐ ะฑัะดัั ะฟะพัะตััะฝั. ะั ัะฒะตัะตะฝั, ััะพ ัะพัะธัะต ะพัะผะตะฝะธัั ะทะฐะบะฐะท?",
    "cancelConfirmButton": "ะะฐ, ะพัะผะตะฝะธัั ะทะฐะบะฐะท",
    "cancelAbortButton": "ะะตั, ะฒะตัะฝััััั"
  }
}
```

---

### ะญะขะะ 6: ะญะบัะฟะพััั ะบะพะผะฟะพะฝะตะฝัะพะฒ

**ะคะฐะนะป:** `packages/ui/src/components/index.ts`

```typescript
// ===== ORDER COMPONENTS =====
export { OrderStatus } from './order/OrderStatus';
export { OrderDevTools } from './dev/OrderDevTools';
export { CountdownTimer } from './ui/countdown-timer'; // ะะะะซะ ะญะะกะะะะข

// Order Helpers
export {
  TechnicalDetailsCollapsible,
  OrderPriorityInfo,
  OrderMetadataInfo,
  OrderCryptoInfo,
  OrderFinancialInfo,
  OrderActionsSection, // ะะะะซะ ะญะะกะะะะข
} from './order/helpers/OrderStatusHelpers';

export { OrderActions } from './order/helpers/OrderActions'; // ะะะะซะ ะญะะกะะะะข
```

---

## ๐จ ะะธะทัะฐะปัะฝัะน ะดะธะทะฐะนะฝ

### ะะฐะบะตั ัะฐะทะผะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ OrderStatus                                         โ
โ                                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ OrderStatusHeader                            โ  โ
โ  โ  ๐ ะะถะธะดะฐะฝะธะต ะพะฟะปะฐัั                          โ  โ
โ  โ  ะะตัะตะฒะตะดะธัะต ะบัะธะฟัะพะฒะฐะปััั ะฝะฐ ัะบะฐะทะฐะฝะฝัะน ะฐะดัะตั  โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ OrderStatusDetails                           โ  โ
โ  โ                                              โ  โ
โ  โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ         โ  โ
โ  โ  โ Crypto Info  โ  โ Financial    โ         โ  โ
โ  โ  โ              โ  โ Info         โ         โ  โ
โ  โ  โ โข ะะดัะตั      โ  โ โข ะกัะผะผะฐ      โ         โ  โ
โ  โ  โ โข ะกะตัั       โ  โ โข ะะฐััะฐ      โ         โ  โ
โ  โ  โ โข Email      โ  โ โข ะััั       โ         โ  โ
โ  โ  โ              โ  โ              โ         โ  โ
โ  โ  โ              โ  โ โโโโโโโโโโโโ  โ  โฌ๏ธ ะะะะกะฌ โ
โ  โ  โ              โ  โ OrderActions โ         โ  โ
โ  โ  โ              โ  โ              โ         โ  โ
โ  โ  โ              โ  โ โ๏ธ ะฃะดะฐะปะตะฝะธะต  โ         โ  โ
โ  โ  โ              โ  โ ัะตัะตะท:       โ         โ  โ
โ  โ  โ              โ  โ [1ั 30ะผ 00ั] โ         โ  โ
โ  โ  โ              โ  โ              โ         โ  โ
โ  โ  โ              โ  โ [ะะฟะปะฐัะธะป]    โ         โ  โ
โ  โ  โ              โ  โ [ะัะผะตะฝะธัั]   โ         โ  โ
โ  โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ         โ  โ
โ  โ                                              โ  โ
โ  โ  ะะตัะฐะดะฐะฝะฝัะต (ะดะฐัั)                          โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Responsive ะฟะพะฒะตะดะตะฝะธะต

**Desktop (โฅ640px):**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ๏ธ ะะฐัะฒะบะฐ ัะดะฐะปะธััั ัะตัะตะท: โ
โ [  1ั   30ะผะธะฝ   00ัะตะบ  ] โ
โ                          โ
โ [    ะะฟะปะฐัะธะป    ] [  ะัะผะตะฝะธัั ะทะฐะบะฐะท  ] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**Mobile (<640px):**

```
โโโโโโโโโโโโโโโโโโโ
โ โ๏ธ ะะฐัะฒะบะฐ       โ
โ ัะดะฐะปะธััั ัะตัะตะท: โ
โ [ 1ั 30ะผ 00ั ]  โ
โ                 โ
โ [   ะะฟะปะฐัะธะป   ] โ
โ [   ะัะผะตะฝะธัั  ] โ
โ [     ะทะฐะบะฐะท   ] โ
โโโโโโโโโโโโโโโโโโโ
```

### ะฆะฒะตัะพะฒะฐั ััะตะผะฐ ัะฐะนะผะตัะฐ

```tsx
// > 60 ะผะธะฝัั - ะทะตะปะตะฝัะน
className = 'text-success font-mono text-2xl';

// 10-60 ะผะธะฝัั - ะถะตะปััะน
className = 'text-warning font-mono text-2xl';

// < 10 ะผะธะฝัั - ะบัะฐัะฝัะน (ะผะธะณะฐะตั)
className = 'text-destructive font-mono text-2xl animate-pulse';
```

---

## ๐ ะัะพะฒะตัะบะฐ ัะพะพัะฒะตัััะฒะธั ะฟัะฐะฒะธะปะฐะผ

### โ Rule 25: ะคะะะฃะก ะะ ะฆะะะ

- ะะทะผะตะฝััััั ะขะะะฌะะ ะบะพะผะฟะพะฝะตะฝัั ัััะฐะฝะธัั ะทะฐะบะฐะทะฐ
- ะะะข ะฟะพะฑะพัะฝัั ัะปัััะตะฝะธะน ะธะปะธ ัะตัะฐะบัะพัะธะฝะณะฐ
- ะะะข ะธะทะผะตะฝะตะฝะธะน ะฒ backend ะธะปะธ state management

### โ Rule 24: ะะะะะะ ะกะขะะฃะะขะฃะะซ

- ะัะพัะธัะฐะฝ `PROJECT_STRUCTURE_MAP.md`
- ะัะพะฐะฝะฐะปะธะทะธัะพะฒะฐะฝั ะฒัะต ัะตะปะตะฒะฐะฝัะฝัะต ะฟะฐะบะตัั
- ะะตัะตะฝะธั ะพัะฝะพะฒะฐะฝั ะฝะฐ ัััะตััะฒัััะตะน ะฐััะธัะตะบัััะต

### โ Rule 20: ะะะะะะข ะะะะซะขะะงะะะกะขะ

- ะัะฟะพะปัะทััััั ัััะตััะฒัััะธะต ะบะพะผะฟะพะฝะตะฝัั: `Button`, `Dialog`
- ะะ ะดัะฑะปะธััะตััั ััะฝะบัะธะพะฝะฐะปัะฝะพััั
- ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ `CountdownTimer` ะพะฑะพัะฝะพะฒะฐะฝะพ ะพััััััะฒะธะตะผ ะฐะฝะฐะปะพะณะพะฒ

### โ Rule 17: ะฆะะะขะะะะะะะะะะะซะ ะกะะกะขะะะซ

- ะัะฟะพะปัะทัะตััั `packages/ui/` ะดะปั ะบะพะผะฟะพะฝะตะฝัะพะฒ
- ะัะฟะพะปัะทัะตััั ะดะธะทะฐะนะฝ-ัะธััะตะผะฐ (`textStyles`, `statusStyles`)
- ะัะฟะพะปัะทัะตััั `next-intl` ะดะปั ะฟะตัะตะฒะพะดะพะฒ

### โ Rule 8: ะะะะะะข ะะะะะะะะะะะะะ

- ะัะต ัะตัะตะฝะธั ะพัะฝะพะฒะฐะฝั ะฝะฐ ะคะะะขะะงะะกะะะ ะบะพะดะต
- ะัะพะฒะตัะตะฝะพ ัััะตััะฒะพะฒะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะพะฒ ัะตัะตะท `semantic_search`
- ะัะพะฒะตัะตะฝะฐ ััััะบัััะฐ ัะตัะตะท `read_file`

### โ Rule 2: ะกะขะะฃะะขะฃะะะะะะะะะซะ ะะะะฅะะ

- ะะพะปะฝัะน ะฐััะธัะตะบัััะฝัะน ะฐะฝะฐะปะธะท ะฒัะฟะพะปะฝะตะฝ
- ะะตัะตะฝะธั ะพะฑะพัะฝะพะฒะฐะฝั
- ะะปะฐะฝ ัะฐะทะฑะธั ะฝะฐ ััะฐะฟั

---

## ๐ ะคะฐะนะปั ะดะปั ัะพะทะดะฐะฝะธั/ะธะทะผะตะฝะตะฝะธั

### ะกะพะทะดะฐัั ะฝะพะฒัะต ัะฐะนะปั:

1. โ `packages/ui/src/components/ui/countdown-timer.tsx`
2. โ `packages/ui/src/components/order/helpers/OrderActions.tsx`
3. โ `apps/web/messages/ru/order-page.json` (ะตัะปะธ ะฝะต ัััะตััะฒัะตั)

### ะะทะผะตะฝะธัั ัััะตััะฒัััะธะต ัะฐะนะปั:

1. โ `packages/ui/src/components/order/helpers/OrderStatusHelpers.tsx` - ะดะพะฑะฐะฒะธัั `OrderActionsSection`
2. โ `packages/ui/src/components/order/OrderStatus.tsx` - ะธะฝัะตะณัะธัะพะฒะฐัั `OrderActionsSection`
3. โ `apps/web/messages/en/order-page.json` - ะดะพะฑะฐะฒะธัั ะบะปััะธ
4. โ `packages/ui/src/components/index.ts` - ัะบัะฟะพััั

---

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ (ะะะ SCOPE ะญะขะะ ะะะะะงะ)

ะะพัะปะต ะฒะธะทัะฐะปัะฝะพะณะพ ะดะพะฑะฐะฒะปะตะฝะธั ัะปะตะผะตะฝัะพะฒ ะฟะพััะตะฑัะตััั:

### ะญัะฐะฟ 2: Backend ะปะพะณะธะบะฐ (ะพัะดะตะปัะฝะฐั ะทะฐะดะฐัะฐ)

1. **API endpoints:**
   - `POST /api/orders/:id/mark-paid` - ะพัะผะตัะธัั ะพะฟะปะฐัั
   - `POST /api/orders/:id/cancel` - ะพัะผะตะฝะธัั ะทะฐะบะฐะท

2. **State management:**
   - ะะพะฑะฐะฒะธัั ะดะตะนััะฒะธั ะฒ `exchange-store` ะธะปะธ ัะพะทะดะฐัั `order-actions-store`
   - ะะฑัะฐะฑะพัะบะฐ loading states
   - ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

3. **tRPC procedures:**
   - `orders.markAsPaid` mutation
   - `orders.cancel` mutation

4. **ะขะฐะนะผะตั backend:**
   - ะะพะปะต `expiresAt` ะฒ Order type
   - ะะฒัะพะผะฐัะธัะตัะบะพะต ัะดะฐะปะตะฝะธะต ะฟัะพััะพัะตะฝะฝัั ะทะฐะบะฐะทะพะฒ (cron job)

### ะญัะฐะฟ 3: ะขะตััะธัะพะฒะฐะฝะธะต (ะพัะดะตะปัะฝะฐั ะทะฐะดะฐัะฐ)

1. Unit ัะตััั ะดะปั `CountdownTimer`
2. Integration ัะตััั ะดะปั `OrderActions`
3. E2E ัะตััั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ััะตะฝะฐัะธะตะฒ

---

## ๐ ะัะตะฝะบะฐ ัะปะพะถะฝะพััะธ

**ะัะตะผั ัะตะฐะปะธะทะฐัะธะธ:** 4-6 ัะฐัะพะฒ  
**ะกะปะพะถะฝะพััั:** ะกัะตะดะฝัั

**ะะฐะทะฑะธะฒะบะฐ:**

- CountdownTimer ะบะพะผะฟะพะฝะตะฝั: 2 ัะฐัะฐ
- OrderActions ะบะพะผะฟะพะฝะตะฝั: 1.5 ัะฐัะฐ
- ะะฝัะตะณัะฐัะธั: 1 ัะฐั
- ะะพะบะฐะปะธะทะฐัะธั: 0.5 ัะฐัะฐ
- ะขะตััะธัะพะฒะฐะฝะธะต/ะพัะปะฐะดะบะฐ: 1 ัะฐั

---

## โ ะัะธัะตัะธะธ ะณะพัะพะฒะฝะพััะธ

1. โ ะขะฐะนะผะตั ะพะฑัะฐัะฝะพะณะพ ะพัััะตัะฐ ะพัะพะฑัะฐะถะฐะตััั ะธ ะพะฑะฝะพะฒะปัะตััั ะบะฐะถะดัั ัะตะบัะฝะดั
2. โ ะฆะฒะตั ัะฐะนะผะตัะฐ ะผะตะฝัะตััั ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะพััะฐะฒัะตะณะพัั ะฒัะตะผะตะฝะธ
3. โ ะะฝะพะฟะบะธ "ะะฟะปะฐัะธะป" ะธ "ะัะผะตะฝะธัั ะทะฐะบะฐะท" ะพัะพะฑัะฐะถะฐัััั
4. โ ะะฝะพะฟะบะธ ะบะพััะตะบัะฝะพ ัะฐะฑะพัะฐัั ะฝะฐ mobile ะธ desktop
5. โ ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะฟะพะดัะฒะตัะถะดะตะฝะธั ะพัะผะตะฝั ะพัะบััะฒะฐะตััั ะธ ะทะฐะบััะฒะฐะตััั
6. โ ะัะต ัะตะบััั ะปะพะบะฐะปะธะทะพะฒะฐะฝั (en/ru)
7. โ ะญะปะตะผะตะฝัั ะพัะพะฑัะฐะถะฐัััั ัะพะปัะบะพ ะดะปั ะฐะบัะธะฒะฝัั ะทะฐะบะฐะทะพะฒ
8. โ ะะะข console errors
9. โ ะกะพะพัะฒะตัััะฒะธะต ะดะธะทะฐะนะฝ-ัะธััะตะผะต ะฟัะพะตะบัะฐ

---

**ะะพะบัะผะตะฝั ัะพะทะดะฐะฝ:** ะะณะตะฝั-ะบะพะดะตั (ัะพะบัั ะฝะฐ ัะตัะฐะบัะพัะธะฝะณ ะธ ะฟะฐััะตัะฝั)  
**ะะตััะธั:** 1.0  
**ะกะปะตะดัััะธะน ัะฐะณ:** ะะพะปััะธัั ะพะดะพะฑัะตะฝะธะต ะฟะปะฐะฝะฐ ะฟะตัะตะด ะฝะฐัะฐะปะพะผ ัะตะฐะปะธะทะฐัะธะธ
