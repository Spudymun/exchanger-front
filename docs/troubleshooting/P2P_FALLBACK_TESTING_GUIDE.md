# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Fallback –ú–µ—Ö–∞–Ω–∏–∑–º–∞ P2P API

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è USDT –∫—É—Ä—Å–∞ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ Binance P2P API. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ Manual DB fallback.

## üéØ –¶–µ–ª—å

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∏–µ—Ä–∞—Ä—Ö–∏–∏ fallback –¥–ª—è USDT:

```
P2P API ‚Üí Cache ‚Üí Manual DB ‚Üí Error
```

–ü—Ä–∏ —Å–∏–º—É–ª—è—Ü–∏–∏ –æ—à–∏–±–∫–∏ P2P API:

```
P2P API ‚ùå (—Å–∏–º—É–ª—è—Ü–∏—è) ‚Üí Cache ‚Üí Manual DB ‚úÖ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –∫—É—Ä—Å
```

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Fallback

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **BinanceP2PProvider** (`packages/exchange-core/src/services/binance-p2p-provider.ts`)
   - –ü–æ–ª—É—á–∞–µ—Ç –∫—É—Ä—Å—ã —Å Binance P2P API
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `SIMULATE_P2P_ERROR`

2. **SmartPricingService** (`packages/exchange-core/src/services/smart-pricing-service.ts`)
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–π –ª–æ–≥–∏–∫–æ–π —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
   - –†–µ–∞–ª–∏–∑—É–µ—Ç fallback chain –¥–ª—è USDT
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

3. **Manual DB** (—Ç–∞–±–ª–∏—Ü–∞ `manualExchangeRate`)
   - –•—Ä–∞–Ω–∏—Ç —Ä—É—á–Ω—ã–µ –∫—É—Ä—Å—ã –¥–ª—è fallback
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ P2P API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª–µ `isActive = true`

## üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –®–∞–≥ 1: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤ –ë–î –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π manual rate

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ä—É—á–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –≤ –ë–î:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä—É—á–Ω—ã–µ –∫—É—Ä—Å—ã
SELECT * FROM "ManualExchangeRate"
WHERE currency = 'USDT'
  AND "isActive" = true
ORDER BY "createdAt" DESC
LIMIT 1;
```

–ï—Å–ª–∏ –∫—É—Ä—Å–∞ –Ω–µ—Ç, –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π:

```sql
-- –í—Å—Ç–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä—É—á–Ω–æ–π –∫—É—Ä—Å –¥–ª—è USDT
INSERT INTO "ManualExchangeRate" (
  id,
  currency,
  "uahRate",
  "isActive",
  note,
  "createdAt",
  "updatedAt"
) VALUES (
  gen_random_uuid(),
  'USDT',
  46.00,  -- –¢–µ—Å—Ç–æ–≤—ã–π –∫—É—Ä—Å (–±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∞—Ä–∂–∞: 46.00 √ó 0.958 ‚âà 44.07 UAH –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π)
  true,
  'üß™ TEST: Manual fallback rate –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è P2P API error simulation',
  NOW(),
  NOW()
);
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**

```bash
npm run insert-manual-usdt-rate
```

### –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Å–∏–º—É–ª—è—Ü–∏–∏ –æ—à–∏–±–∫–∏

–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

```bash
# üß™ TESTING: –°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏ P2P API
SIMULATE_P2P_ERROR=true
```

**–ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å:**

- `apps/web/.env.local` (–¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- –ò–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π dev —Å–µ—Ä–≤–µ—Ä (Ctrl+C)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
npm run dev
```

## üîç –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫—É—Ä—Å–∞ USDT –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
‚ö†Ô∏è SIMULATION MODE: P2P API error simulated
{
  "currency": "USDT",
  "reason": "SIMULATE_P2P_ERROR environment variable is set to true",
  "fallbackChain": "Will fallback to: Cache ‚Üí Manual DB ‚Üí Error"
}
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ —á–µ—Ä–µ–∑ Manual DB

–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:3000`

–í –ª–æ–≥–∞—Ö –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
INFO[SmartPricingService] Manual rate found for USDT
{
  "rate": 46.00,
  "source": "manual_db"
}

INFO[SmartPricingService] Rate fetched successfully for USDT
{
  "source": "binance-p2p",
  "marketRate": 46.00,
  "clientRate": 44.07,  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞: 46.00 √ó (1 - 0.045 + 0.003) = 46.00 √ó 0.958
  "spread": 0.045,
  "competitiveBuffer": 0.003
}
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—É—Ä—Å–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

1. –í—ã–±–µ—Ä–∏—Ç–µ USDT –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –≤–∞–ª—é—Ç
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫—É—Ä—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (~44.07 UAH)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–±–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —ç—Ç–∏–º –∫—É—Ä—Å–æ–º

### –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à:

```
VERBOSE[SmartPricingService] Using cached rate for USDT
{
  "source": "cache",
  "originalSource": "binance-p2p",
  "rate": 44.07,
  "isFresh": true,
  "cacheAge": 5234  // –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
}
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. **P2P API** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` (—Å–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–∫–∏)
2. **Cache** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è (–ø—É—Å—Ç–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ)
3. **Manual DB** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—É—Ä—Å (46.00 UAH)
4. **SmartPricingService** –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∞—Ä–∂—É (46.00 √ó 0.958 = 44.07 UAH)
5. **–ö–ª–∏–µ–Ω—Ç** –≤–∏–¥–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫—É—Ä—Å (~44.07 UAH)

### ‚ùå –°—Ü–µ–Ω–∞—Ä–∏–π –±–µ–∑ Manual DB

–ï—Å–ª–∏ –≤ –ë–î –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ –∫—É—Ä—Å–∞:

```
ERROR[SmartPricingService] USDT rate unavailable - no P2P data and no manual rate
{
  "currency": "USDT"
}

Error: USDT rate unavailable: P2P API failed and no manual fallback configured
```

## üõ†Ô∏è –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –®–∞–≥ 1: –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

–í `.env`:

```bash
# SIMULATE_P2P_ERROR=true  # ‚Üê –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```

–ò–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É.

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä

```bash
# Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
npm run dev
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã P2P API

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É P2P API:

```
INFO[BinanceP2PProvider] P2P rate calculated for USDT
{
  "rate": 42.35,  // –†–µ–∞–ª—å–Ω—ã–π –∫—É—Ä—Å —Å —Ä—ã–Ω–∫–∞
  "totalAds": 100,
  "analyzedAds": 50
}
```

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è SIMULATE_P2P_ERROR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**

- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `.env.local` –¥–ª—è `apps/web`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö `.env` —Ñ–∞–π–ª–∞—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: Manual DB –∫—É—Ä—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫—É—Ä—Å –∞–∫—Ç–∏–≤–µ–Ω
SELECT * FROM "ManualExchangeRate" WHERE currency = 'USDT';

-- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
UPDATE "ManualExchangeRate"
SET "isActive" = true
WHERE currency = 'USDT';
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö—É—Ä—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**

- –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à SmartPricingService (–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
- –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 –º–∏–Ω—É—Ç (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–µ—à–∞)
- –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å `SMART_CACHE_CONFIG.STALE_MS` –≤ `packages/constants/src/pricing-config.ts`

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ä—É—á–Ω—ã–µ –∫—É—Ä—Å—ã USDT

```sql
UPDATE "ManualExchangeRate"
SET "isActive" = false
WHERE currency = 'USDT';
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ä—É—á–Ω—ã—Ö –∫—É—Ä—Å–æ–≤

```sql
SELECT
  currency,
  "uahRate",
  "isActive",
  note,
  "createdAt"
FROM "ManualExchangeRate"
WHERE currency = 'USDT'
ORDER BY "createdAt" DESC;
```

### –í—Å—Ç–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫—É—Ä—Å

```sql
INSERT INTO "ManualExchangeRate" (
  id, currency, "uahRate", "isActive", note, "createdAt", "updatedAt"
) VALUES (
  gen_random_uuid(),
  'USDT',
  50.00,  -- –í–∞—à —Ç–µ—Å—Ç–æ–≤—ã–π –∫—É—Ä—Å
  true,
  'Custom test rate',
  NOW(),
  NOW()
);
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è Production

**–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨** `SIMULATE_P2P_ERROR=true` –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏!

–≠—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ **–¢–û–õ–¨–ö–û –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –≤ development.

–í production –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ã–π P2P API, –∞ Manual DB fallback –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –æ—Ç–∫–∞–∑–µ API.

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

- –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Manual DB fallback
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ fallback
- –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É P2P –∏ Manual –∫—É—Ä—Å–∞–º–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º—É–ª—è—Ü–∏–π –≤ –ª–æ–≥–∞—Ö (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –≤ production)

### –õ–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

```typescript
// –ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Manual DB
grep "Manual rate found for USDT" logs/*.log

// –ü–æ–∏—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –≤ production)
grep "SIMULATION MODE" logs/*.log

// –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∫—É—Ä—Å–æ–≤
grep "Rate fetched successfully" logs/*.log
```

---

## üéØ –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] Manual rate –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ë–î (`isActive = true`)
- [ ] `SIMULATE_P2P_ERROR=true` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.env.local`
- [ ] Dev —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "SIMULATION MODE: P2P API error simulated"
- [ ] –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "Manual rate found for USDT"
- [ ] –ö—É—Ä—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ª–æ–≥–∏ "Using cached rate")
- [ ] –ü–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏ P2P API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–Ω–æ–≤–∞
- [ ] Manual rate –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ —É–¥–∞–ª–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!** üöÄ

–ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
